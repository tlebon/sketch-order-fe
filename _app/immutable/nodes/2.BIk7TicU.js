import{c as Q,a as x,f as D}from"../chunks/C5oqtnP4.js";import{p as V,a as q,f as R,w as W,B as k,C as M,D as l,c as o,s as v,r as a,m as r,F as X,t as O}from"../chunks/CjiiXA-r.js";import{d as Y,e as z,r as Z,s as P}from"../chunks/jG0SD3Bx.js";import{s as ee,r as te,i as U}from"../chunks/Xd8GBmdn.js";import{I as ae,e as re,r as oe,b as J,s as se}from"../chunks/BEv6A3bc.js";import{a as ie}from"../chunks/Ba432IRW.js";import{dndzone as de}from"svelte-dnd-action";import{s as ne}from"../chunks/oG3m_XG8.js";function le(f,d){V(d,!0);let s=te(d,["$$slots","$$events","$$legacy"]);ae(f,ee({name:"trash-2"},()=>s,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(b,u)=>{var w=Q(),C=R(w);ne(C,()=>d.children??W),x(b,w)},$$slots:{default:!0}})),q()}var ce=(f,d)=>l(d,!0),ve=(f,d)=>l(d,!1),pe=D('<div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-xl font-semibold mb-4">Create New Show</h2> <form><div class="space-y-4"><div><label for="title" class="block text-sm font-medium text-gray-700">Title</label> <input type="text" id="title" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required/></div> <div><label for="description" class="block text-sm font-medium text-gray-700">Description</label> <textarea id="description" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" rows="3"></textarea></div> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button> <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">Create Show</button></div></div></form></div>'),he=D('<p class="mt-1 text-gray-600"> </p>'),ue=(f,d,s)=>d(r(s).id),me=D('<div class="bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow"><div class="flex justify-between items-start"><div><h2 class="text-xl font-semibold text-gray-900"><a class="hover:text-blue-500"> </a></h2> <!></div> <div class="flex space-x-2"><button class="text-red-500 hover:text-red-600" aria-label="Delete show"><!></button></div></div></div>'),fe=D('<div class="max-w-7xl mx-auto p-8"><div class="text-center mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-2">Sketch Show Manager</h1> <p class="text-gray-600">Create and manage your sketch shows. Drag and drop to reorder.</p></div> <div class="flex justify-end mb-6"><button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">Create New Show</button></div> <!> <div class="space-y-4"></div></div>');function Se(f,d){V(d,!0);let s=k(M(d.data.shows)),S=k(!1),b=k(!1),u=k(M({title:"",description:""}));async function w(t){const{items:e}=t.detail;l(S,!0),l(s,e,!0)}async function C(t){const{items:e}=t.detail;l(S,!1),l(s,e,!0);const i=e.map((c,n)=>({id:c.id,position:n}));try{if(!(await fetch("/api/shows",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:i})})).ok)throw new Error("Failed to update show order")}catch(c){console.error("Failed to update show order:",c),l(s,[...r(s)].sort((n,p)=>n.position-p.position),!0)}}async function B(){const t=new Date().toISOString(),e={id:crypto.randomUUID(),...r(u),position:r(s).length,created_at:t,updated_at:t};try{if(!(await fetch("/api/shows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Failed to create show");l(s,[...r(s),e],!0),l(b,!1),l(u,{title:"",description:""},!0)}catch(i){console.error("Failed to create show:",i)}}async function H(t){try{if(!(await fetch(`/api/shows/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete show");l(s,r(s).filter(i=>i.id!==t),!0)}catch(e){console.error("Failed to delete show:",e)}}var F=fe(),T=v(o(F),2),L=o(T);L.__click=[ce,b],a(T);var I=v(T,2);{var A=t=>{var e=pe(),i=v(o(e),2),c=o(i),n=o(c),p=v(o(n),2);oe(p),a(n);var m=v(n,2),y=v(o(m),2);Z(y),a(m);var g=v(m,2),E=o(g);E.__click=[ve,b],X(2),a(g),a(c),a(i),a(e),z("submit",i,h=>{h.preventDefault(),B()}),J(p,()=>r(u).title,h=>r(u).title=h),J(y,()=>r(u).description,h=>r(u).description=h),x(t,e)};U(I,t=>{r(b)&&t(A)})}var _=v(I,2);re(_,21,()=>r(s),t=>t.id,(t,e)=>{var i=me(),c=o(i),n=o(c),p=o(n),m=o(p),y=o(m,!0);a(m),a(p);var g=v(p,2);{var E=$=>{var j=he(),K=o(j,!0);a(j),O(()=>P(K,r(e).description)),x($,j)};U(g,$=>{r(e).description&&$(E)})}a(n);var h=v(n,2),N=o(h);N.__click=[ue,H,e];var G=o(N);le(G,{size:20}),a(N),a(h),a(c),a(i),O(()=>{se(m,"href",`/shows/${r(e).id??""}`),P(y,r(e).title)}),x(t,i)}),a(_),ie(_,(t,e)=>de?.(t,e),()=>({items:r(s)})),a(F),z("consider",_,w),z("finalize",_,C),x(f,F),q()}Y(["click"]);export{Se as component};
