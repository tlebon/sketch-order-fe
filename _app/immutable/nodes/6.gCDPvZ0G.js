import{c as We,a as V,t as ae,n as ht,d as pt}from"../chunks/CFdHu8IA.js";import"../chunks/BbmbYZNE.js";import{a9 as kt,E as er,aI as tr,aJ as rr,e as _t,u as zt,aK as ar,a4 as sr,q as ir,w as Re,ad as xt,ae as Ct,af as nr,aL as or,G as lr,p as ze,f as Fe,a as Pe,s as d,c as o,r as i,t as he,m as r,Q as be,D as P,X as Ie,aM as at,aN as dt,d as cr,aO as Pt,aP as dr}from"../chunks/lowV6HZa.js";import{k as vr,w as ur,l as fr,s as re,e as ne,d as Tt,r as hr}from"../chunks/5gYYOIeN.js";import{s as Ze,r as Xe,p as Ce,i as fe,a as pr,b as _r}from"../chunks/ZOUqE9m-.js";import{c as gr,I as Ye,e as Le,i as ot,a as xe,s as Oe,r as st,b as Qe}from"../chunks/CDohF1HD.js";import{i as Ve}from"../chunks/lXCSdFG9.js";import{s as mr}from"../chunks/BhcKz6G5.js";import{c as Ke,o as Ot}from"../chunks/x7zS-rwl.js";import{b as br}from"../chunks/CDEW-RGa.js";import{s as et}from"../chunks/CnvLdIrB.js";const wr=()=>performance.now(),Me={tick:n=>requestAnimationFrame(n),now:()=>wr(),tasks:new Set};function Rt(){const n=Me.now();Me.tasks.forEach(a=>{a.c(n)||(Me.tasks.delete(a),a.f())}),Me.tasks.size!==0&&Me.tick(Rt)}function yr(n){let a;return Me.tasks.size===0&&Me.tick(Rt),{promise:new Promise(s=>{Me.tasks.add(a={c:n,f:s})}),abort(){Me.tasks.delete(a)}}}function ct(n,a){ur(()=>{n.dispatchEvent(new CustomEvent(a))})}function kr(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const a=n.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("")}function St(n){const a={},s=n.split(";");for(const l of s){const[f,_]=l.split(":");if(!f||_===void 0)break;const p=kr(f.trim());a[p]=_.trim()}return a}const xr=n=>n;function Et(n,a,s){var l=gr,f,_,p,x=null;l.a??(l.a={element:n,measure(){f=this.element.getBoundingClientRect()},apply(){if(p==null||p.abort(),_=this.element.getBoundingClientRect(),f.left!==_.left||f.right!==_.right||f.top!==_.top||f.bottom!==_.bottom){const Z=a()(this.element,{from:f,to:_},s==null?void 0:s());p=ut(this.element,Z,void 0,1,()=>{p==null||p.abort(),p=void 0})}},fix(){if(!n.getAnimations().length){var{position:Z,width:v,height:D}=getComputedStyle(n);if(Z!=="absolute"&&Z!=="fixed"){var k=n.style;x={position:k.position,width:k.width,height:k.height,transform:k.transform},k.position="absolute",k.width=v,k.height=D;var z=n.getBoundingClientRect();if(f.left!==z.left||f.top!==z.top){var q=`translate(${f.left-z.left}px, ${f.top-z.top}px)`;k.transform=k.transform?`${k.transform} ${q}`:q}}}},unfix(){if(x){var Z=n.style;Z.position=x.position,Z.width=x.width,Z.height=x.height,Z.transform=x.transform}}}),l.a.element=n}function It(n,a,s,l){var f=(n&ar)!==0,_="both",p,x=a.inert,Z=a.style.overflow,v,D;function k(){var J=nr,m=kt;xt(null),Ct(null);try{return p??(p=s()(a,(l==null?void 0:l())??{},{direction:_}))}finally{xt(J),Ct(m)}}var z={is_global:f,in(){a.inert=x,ct(a,"introstart"),v=ut(a,k(),D,1,()=>{ct(a,"introend"),v==null||v.abort(),v=p=void 0,a.style.overflow=Z})},out(J){a.inert=!0,ct(a,"outrostart"),D=ut(a,k(),v,0,()=>{ct(a,"outroend"),J==null||J()})},stop:()=>{v==null||v.abort(),D==null||D.abort()}},q=kt;if((q.transitions??(q.transitions=[])).push(z),vr){var Y=f;if(!Y){for(var se=q.parent;se&&(se.f&er)!==0;)for(;(se=se.parent)&&(se.f&tr)===0;);Y=!se||(se.f&rr)!==0}Y&&_t(()=>{zt(()=>z.in())})}}function ut(n,a,s,l,f){var _=l===1;if(sr(a)){var p,x=!1;return ir(()=>{if(!x){var J=a({direction:_?"in":"out"});p=ut(n,J,s,l,f)}}),{abort:()=>{x=!0,p==null||p.abort()},deactivate:()=>p.deactivate(),reset:()=>p.reset(),t:()=>p.t()}}if(s==null||s.deactivate(),!(a!=null&&a.duration))return f(),{abort:Re,deactivate:Re,reset:Re,t:()=>l};const{delay:Z=0,css:v,tick:D,easing:k=xr}=a;var z=[];if(_&&s===void 0&&(D&&D(0,1),v)){var q=St(v(0,1));z.push(q,q)}var Y=()=>1-l,se=n.animate(z,{duration:Z});return se.onfinish=()=>{var J=(s==null?void 0:s.t())??1-l;s==null||s.abort();var m=l-J,F=a.duration*Math.abs(m),K=[];if(F>0){var de=!1;if(v)for(var ee=Math.ceil(F/16.666666666666668),ie=0;ie<=ee;ie+=1){var j=J+m*k(ie/ee),t=St(v(j,1-j));K.push(t),de||(de=t.overflow==="hidden")}de&&(n.style.overflow="hidden"),Y=()=>{var e=se.currentTime;return J+m*k(e/F)},D&&yr(()=>{if(se.playState!=="running")return!1;var e=Y();return D(e,1-e),!0})}se=n.animate(K,{duration:F,fill:"forwards"}),se.onfinish=()=>{Y=()=>l,D==null||D(l,1-l),f()}},{abort:()=>{se&&(se.cancel(),se.effect=null,se.onfinish=Re)},deactivate:()=>{f=Re},reset:()=>{l===0&&(D==null||D(1,0))},t:()=>Y()}}function ft(n,a,s){if(n.multiple)return Sr(n,a);for(var l of n.options){var f=it(l);if(or(f,a)){l.selected=!0;return}}(!s||a!==void 0)&&(n.selectedIndex=-1)}function Mt(n,a){let s=!0;_t(()=>{a&&ft(n,zt(a),s),s=!1;var l=new MutationObserver(()=>{var f=n.__value;ft(n,f)});return l.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function Cr(n,a,s=a){var l=!0;fr(n,"change",f=>{var _=f?"[selected]":":checked",p;if(n.multiple)p=[].map.call(n.querySelectorAll(_),it);else{var x=n.querySelector(_)??n.querySelector("option:not([disabled])");p=x&&it(x)}s(p)}),_t(()=>{var f=a();if(ft(n,f,l),l&&f===void 0){var _=n.querySelector(":checked");_!==null&&(f=it(_),s(f))}n.__value=f,l=!1}),Mt(n)}function Sr(n,a){for(var s of n.options)s.selected=~a.indexOf(it(s))}function it(n){return"__value"in n?n.__value:n.value}function nt(n){return function(...a){var s=a[0];return s.stopPropagation(),n==null?void 0:n.apply(this,a)}}function Er(n,a){var _;var s=(_=n.$$events)==null?void 0:_[a.type],l=lr(s)?s.slice():s==null?[]:[s];for(var f of l)f.call(this,a)}function $r(n,a){ze(a,!0);let s=Xe(a,["$$slots","$$events","$$legacy"]);Ye(n,Ze({name:"funnel"},()=>s,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:(f,_)=>{var p=We(),x=Fe(p);et(x,()=>a.children??Re),V(f,p)},$$slots:{default:!0}})),Pe()}function Dr(n,a){ze(a,!0);let s=Xe(a,["$$slots","$$events","$$legacy"]);Ye(n,Ze({name:"layout-grid"},()=>s,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(f,_)=>{var p=We(),x=Fe(p);et(x,()=>a.children??Re),V(f,p)},$$slots:{default:!0}})),Pe()}function zr(n,a){ze(a,!0);let s=Xe(a,["$$slots","$$events","$$legacy"]);Ye(n,Ze({name:"list"},()=>s,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(f,_)=>{var p=We(),x=Fe(p);et(x,()=>a.children??Re),V(f,p)},$$slots:{default:!0}})),Pe()}function At(n,a){ze(a,!0);let s=Xe(a,["$$slots","$$events","$$legacy"]);Ye(n,Ze({name:"printer"},()=>s,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(f,_)=>{var p=We(),x=Fe(p);et(x,()=>a.children??Re),V(f,p)},$$slots:{default:!0}})),Pe()}function Lt(n,a){ze(a,!0);let s=Xe(a,["$$slots","$$events","$$legacy"]);Ye(n,Ze({name:"triangle-alert"},()=>s,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(f,_)=>{var p=We(),x=Fe(p);et(x,()=>a.children??Re),V(f,p)},$$slots:{default:!0}})),Pe()}function Pr(n,a){ze(a,!0);let s=Xe(a,["$$slots","$$events","$$legacy"]);Ye(n,Ze({name:"upload"},()=>s,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(f,_)=>{var p=We(),x=Fe(p);et(x,()=>a.children??Re),V(f,p)},$$slots:{default:!0}})),Pe()}const Tr=()=>{const n=mr;return{page:{subscribe:n.page.subscribe},navigating:{subscribe:n.navigating.subscribe},updated:n.updated}},Or={subscribe(n){return Tr().page.subscribe(n)}};var Rr=ae("<option> </option>"),Ir=ae('<div class="performer-filter svelte-9vn570"><label for="performer-select" class="svelte-9vn570">Filter by Performer</label> <select id="performer-select" class="svelte-9vn570"><option>All Performers</option><!></select></div>');function Ft(n,a){ze(a,!1);let s=Ce(a,"performers",24,()=>[]),l=Ce(a,"selectedPerformer",12,null);const f=Ke();function _(k){const z=k.target,q=z.value===""?null:z.value;l(q),f("select",{performer:q})}Ve();var p=Ir(),x=d(o(p),2);Mt(x,()=>l()||"");var Z,v=o(x);v.value=v.__value="";var D=d(v);Le(D,1,s,ot,(k,z)=>{var q=Rr(),Y={},se=o(q,!0);i(q),he(()=>{Y!==(Y=r(z))&&(q.value=(q.__value=r(z))??""),re(se,r(z))}),V(k,q)}),i(x),i(p),he(()=>{Z!==(Z=l()||"")&&(x.value=(x.__value=l()||"")??"",ft(x,l()||""))}),ne("change",x,_),V(n,p),Pe()}function Mr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vt={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var Ar=vt.exports,$t;function Lr(){return $t||($t=1,function(n,a){((s,l)=>{n.exports=l()})(Ar,function s(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},f,_=!l.document&&!!l.postMessage,p=l.IS_PAPA_WORKER||!1,x={},Z=0,v={};function D(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var c=ee(e);c.chunkSize=parseInt(c.chunkSize),e.step||e.chunk||(c.chunkSize=null),this._handle=new se(c),(this._handle.streamer=this)._config=c}).call(this,t),this.parseChunk=function(e,c){var C=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<C){let N=this._config.newline;N||(w=this._config.quoteChar||'"',N=this._handle.guessLineEndings(e,w)),e=[...e.split(N).slice(C)].join(N)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(w=this._config.beforeFirstChunk(e))!==void 0&&(e=w),this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+e,w=(this._partialLine="",this._handle.parse(C,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=w.meta.cursor,C=(this._finished||(this._partialLine=C.substring(e-this._baseIndex),this._baseIndex=e),w&&w.data&&(this._rowCount+=w.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),p)l.postMessage({results:w,workerId:v.WORKER_ID,finished:C});else if(j(this._config.chunk)&&!c){if(this._config.chunk(w,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=w=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(w.data),this._completeResults.errors=this._completeResults.errors.concat(w.errors),this._completeResults.meta=w.meta),this._completed||!C||!j(this._config.complete)||w&&w.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),C||w&&w.meta.paused||this._nextChunk(),w}this._halted=!0},this._sendError=function(e){j(this._config.error)?this._config.error(e):p&&this._config.error&&l.postMessage({workerId:v.WORKER_ID,error:e,finished:!1})}}function k(t){var e;(t=t||{}).chunkSize||(t.chunkSize=v.RemoteChunkSize),D.call(this,t),this._nextChunk=_?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),_||(e.onload=ie(this._chunkLoaded,this),e.onerror=ie(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!_),this._config.downloadRequestHeaders){var c,C=this._config.downloadRequestHeaders;for(c in C)e.setRequestHeader(c,C[c])}var w;this._config.chunkSize&&(w=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+w));try{e.send(this._config.downloadRequestBody)}catch(N){this._chunkError(N.message)}_&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(c=>(c=c.getResponseHeader("Content-Range"))!==null?parseInt(c.substring(c.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(c){c=e.statusText||c,this._sendError(new Error(c))}}function z(t){(t=t||{}).chunkSize||(t.chunkSize=v.LocalChunkSize),D.call(this,t);var e,c,C=typeof FileReader<"u";this.stream=function(w){this._input=w,c=w.slice||w.webkitSlice||w.mozSlice,C?((e=new FileReader).onload=ie(this._chunkLoaded,this),e.onerror=ie(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var w=this._input,N=(this._config.chunkSize&&(N=Math.min(this._start+this._config.chunkSize,this._input.size),w=c.call(w,this._start,N)),e.readAsText(w,this._config.encoding));C||this._chunkLoaded({target:{result:N}})},this._chunkLoaded=function(w){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(w.target.result)},this._chunkError=function(){this._sendError(e.error)}}function q(t){var e;D.call(this,t=t||{}),this.stream=function(c){return e=c,this._nextChunk()},this._nextChunk=function(){var c,C;if(!this._finished)return c=this._config.chunkSize,e=c?(C=e.substring(0,c),e.substring(c)):(C=e,""),this._finished=!e,this.parseChunk(C)}}function Y(t){D.call(this,t=t||{});var e=[],c=!0,C=!1;this.pause=function(){D.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){D.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(w){this._input=w,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):c=!0},this._streamData=ie(function(w){try{e.push(typeof w=="string"?w:w.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(N){this._streamError(N)}},this),this._streamError=ie(function(w){this._streamCleanUp(),this._sendError(w)},this),this._streamEnd=ie(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function se(t){var e,c,C,w,N=Math.pow(2,53),le=-N,me=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ge=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,U=this,B=0,I=0,oe=!1,H=!1,W=[],y={data:[],errors:[],meta:{}};function h(u){return t.skipEmptyLines==="greedy"?u.join("").trim()==="":u.length===1&&u[0].length===0}function X(){if(y&&C&&(b("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),C=!1),t.skipEmptyLines&&(y.data=y.data.filter(function(T){return!h(T)})),pe()){let T=function(O,G){j(t.transformHeader)&&(O=t.transformHeader(O,G)),W.push(O)};if(y)if(Array.isArray(y.data[0])){for(var u=0;pe()&&u<y.data.length;u++)y.data[u].forEach(T);y.data.splice(0,1)}else y.data.forEach(T)}function g(T,O){for(var G=t.header?{}:[],M=0;M<T.length;M++){var A=M,S=T[M],S=((E,$)=>(Q=>(t.dynamicTypingFunction&&t.dynamicTyping[Q]===void 0&&(t.dynamicTyping[Q]=t.dynamicTypingFunction(Q)),(t.dynamicTyping[Q]||t.dynamicTyping)===!0))(E)?$==="true"||$==="TRUE"||$!=="false"&&$!=="FALSE"&&((Q=>{if(me.test(Q)&&(Q=parseFloat(Q),le<Q&&Q<N))return 1})($)?parseFloat($):ge.test($)?new Date($):$===""?null:$):$)(A=t.header?M>=W.length?"__parsed_extra":W[M]:A,S=t.transform?t.transform(S,A):S);A==="__parsed_extra"?(G[A]=G[A]||[],G[A].push(S)):G[A]=S}return t.header&&(M>W.length?b("FieldMismatch","TooManyFields","Too many fields: expected "+W.length+" fields but parsed "+M,I+O):M<W.length&&b("FieldMismatch","TooFewFields","Too few fields: expected "+W.length+" fields but parsed "+M,I+O)),G}var L;y&&(t.header||t.dynamicTyping||t.transform)&&(L=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(g),L=y.data.length):y.data=g(y.data,0),t.header&&y.meta&&(y.meta.fields=W),I+=L)}function pe(){return t.header&&W.length===0}function b(u,g,L,T){u={type:u,code:g,message:L},T!==void 0&&(u.row=T),y.errors.push(u)}j(t.step)&&(w=t.step,t.step=function(u){y=u,pe()?X():(X(),y.data.length!==0&&(B+=u.data.length,t.preview&&B>t.preview?c.abort():(y.data=y.data[0],w(y,U))))}),this.parse=function(u,g,L){var T=t.quoteChar||'"',T=(t.newline||(t.newline=this.guessLineEndings(u,T)),C=!1,t.delimiter?j(t.delimiter)&&(t.delimiter=t.delimiter(u),y.meta.delimiter=t.delimiter):((T=((O,G,M,A,S)=>{var E,$,Q,R;S=S||[",","	","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var ve=0;ve<S.length;ve++){for(var te,Se=S[ve],_e=0,we=0,ce=0,ye=(Q=void 0,new m({comments:A,delimiter:Se,newline:G,preview:10}).parse(O)),ke=0;ke<ye.data.length;ke++)M&&h(ye.data[ke])?ce++:(te=ye.data[ke].length,we+=te,Q===void 0?Q=te:0<te&&(_e+=Math.abs(te-Q),Q=te));0<ye.data.length&&(we/=ye.data.length-ce),($===void 0||_e<=$)&&(R===void 0||R<we)&&1.99<we&&($=_e,E=Se,R=we)}return{successful:!!(t.delimiter=E),bestDelimiter:E}})(u,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=T.bestDelimiter:(C=!0,t.delimiter=v.DefaultDelimiter),y.meta.delimiter=t.delimiter),ee(t));return t.preview&&t.header&&T.preview++,e=u,c=new m(T),y=c.parse(e,g,L),X(),oe?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return oe},this.pause=function(){oe=!0,c.abort(),e=j(t.chunk)?"":e.substring(c.getCharIndex())},this.resume=function(){U.streamer._halted?(oe=!1,U.streamer.parseChunk(e,!0)):setTimeout(U.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,c.abort(),y.meta.aborted=!0,j(t.complete)&&t.complete(y),e=""},this.guessLineEndings=function(O,T){O=O.substring(0,1048576);var T=new RegExp(J(T)+"([^]*?)"+J(T),"gm"),L=(O=O.replace(T,"")).split("\r"),T=O.split(`
`),O=1<T.length&&T[0].length<L[0].length;if(L.length===1||O)return`
`;for(var G=0,M=0;M<L.length;M++)L[M][0]===`
`&&G++;return G>=L.length/2?`\r
`:"\r"}}function J(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e=(t=t||{}).delimiter,c=t.newline,C=t.comments,w=t.step,N=t.preview,le=t.fastMode,me=null,ge=!1,U=t.quoteChar==null?'"':t.quoteChar,B=U;if(t.escapeChar!==void 0&&(B=t.escapeChar),(typeof e!="string"||-1<v.BAD_DELIMITERS.indexOf(e))&&(e=","),C===e)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<v.BAD_DELIMITERS.indexOf(C))&&(C=!1),c!==`
`&&c!=="\r"&&c!==`\r
`&&(c=`
`);var I=0,oe=!1;this.parse=function(H,W,y){if(typeof H!="string")throw new Error("Input must be a string");var h=H.length,X=e.length,pe=c.length,b=C.length,u=j(w),g=[],L=[],T=[],O=I=0;if(!H)return _e();if(le||le!==!1&&H.indexOf(U)===-1){for(var G=H.split(c),M=0;M<G.length;M++){if(T=G[M],I+=T.length,M!==G.length-1)I+=c.length;else if(y)return _e();if(!C||T.substring(0,b)!==C){if(u){if(g=[],R(T.split(e)),we(),oe)return _e()}else R(T.split(e));if(N&&N<=M)return g=g.slice(0,N),_e(!0)}}return _e()}for(var A=H.indexOf(e,I),S=H.indexOf(c,I),E=new RegExp(J(B)+J(U),"g"),$=H.indexOf(U,I);;)if(H[I]===U)for($=I,I++;;){if(($=H.indexOf(U,$+1))===-1)return y||L.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:g.length,index:I}),te();if($===h-1)return te(H.substring(I,$).replace(E,U));if(U===B&&H[$+1]===B)$++;else if(U===B||$===0||H[$-1]!==B){A!==-1&&A<$+1&&(A=H.indexOf(e,$+1));var Q=ve((S=S!==-1&&S<$+1?H.indexOf(c,$+1):S)===-1?A:Math.min(A,S));if(H.substr($+1+Q,X)===e){T.push(H.substring(I,$).replace(E,U)),H[I=$+1+Q+X]!==U&&($=H.indexOf(U,I)),A=H.indexOf(e,I),S=H.indexOf(c,I);break}if(Q=ve(S),H.substring($+1+Q,$+1+Q+pe)===c){if(T.push(H.substring(I,$).replace(E,U)),Se($+1+Q+pe),A=H.indexOf(e,I),$=H.indexOf(U,I),u&&(we(),oe))return _e();if(N&&g.length>=N)return _e(!0);break}L.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:g.length,index:I}),$++}}else if(C&&T.length===0&&H.substring(I,I+b)===C){if(S===-1)return _e();I=S+pe,S=H.indexOf(c,I),A=H.indexOf(e,I)}else if(A!==-1&&(A<S||S===-1))T.push(H.substring(I,A)),I=A+X,A=H.indexOf(e,I);else{if(S===-1)break;if(T.push(H.substring(I,S)),Se(S+pe),u&&(we(),oe))return _e();if(N&&g.length>=N)return _e(!0)}return te();function R(ce){g.push(ce),O=I}function ve(ce){var ye=0;return ye=ce!==-1&&(ce=H.substring($+1,ce))&&ce.trim()===""?ce.length:ye}function te(ce){return y||(ce===void 0&&(ce=H.substring(I)),T.push(ce),I=h,R(T),u&&we()),_e()}function Se(ce){I=ce,R(T),T=[],S=H.indexOf(c,I)}function _e(ce){if(t.header&&!W&&g.length&&!ge){var ye=g[0],ke={},je=new Set(ye);let tt=!1;for(let Ae=0;Ae<ye.length;Ae++){let De=ye[Ae];if(ke[De=j(t.transformHeader)?t.transformHeader(De,Ae):De]){let qe,rt=ke[De];for(;qe=De+"_"+rt,rt++,je.has(qe););je.add(qe),ye[Ae]=qe,ke[De]++,tt=!0,(me=me===null?{}:me)[qe]=De}else ke[De]=1,ye[Ae]=De;je.add(De)}tt&&console.warn("Duplicate headers found and renamed."),ge=!0}return{data:g,errors:L,meta:{delimiter:e,linebreak:c,aborted:oe,truncated:!!ce,cursor:O+(W||0),renamedHeaders:me}}}function we(){w(_e()),g=[],L=[]}},this.abort=function(){oe=!0},this.getCharIndex=function(){return I}}function F(t){var e=t.data,c=x[e.workerId],C=!1;if(e.error)c.userError(e.error,e.file);else if(e.results&&e.results.data){var w={abort:function(){C=!0,K(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:de,resume:de};if(j(c.userStep)){for(var N=0;N<e.results.data.length&&(c.userStep({data:e.results.data[N],errors:e.results.errors,meta:e.results.meta},w),!C);N++);delete e.results}else j(c.userChunk)&&(c.userChunk(e.results,w,e.file),delete e.results)}e.finished&&!C&&K(e.workerId,e.results)}function K(t,e){var c=x[t];j(c.userComplete)&&c.userComplete(e),c.terminate(),delete x[t]}function de(){throw new Error("Not implemented.")}function ee(t){if(typeof t!="object"||t===null)return t;var e,c=Array.isArray(t)?[]:{};for(e in t)c[e]=ee(t[e]);return c}function ie(t,e){return function(){t.apply(e,arguments)}}function j(t){return typeof t=="function"}return v.parse=function(t,e){var c=(e=e||{}).dynamicTyping||!1;if(j(c)&&(e.dynamicTypingFunction=c,c={}),e.dynamicTyping=c,e.transform=!!j(e.transform)&&e.transform,!e.worker||!v.WORKERS_SUPPORTED)return c=null,v.NODE_STREAM_INPUT,typeof t=="string"?(t=(C=>C.charCodeAt(0)!==65279?C:C.slice(1))(t),c=new(e.download?k:q)(e)):t.readable===!0&&j(t.read)&&j(t.on)?c=new Y(e):(l.File&&t instanceof File||t instanceof Object)&&(c=new z(e)),c.stream(t);(c=(()=>{var C;return!!v.WORKERS_SUPPORTED&&(C=(()=>{var w=l.URL||l.webkitURL||null,N=s.toString();return v.BLOB_URL||(v.BLOB_URL=w.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",N,")();"],{type:"text/javascript"})))})(),(C=new l.Worker(C)).onmessage=F,C.id=Z++,x[C.id]=C)})()).userStep=e.step,c.userChunk=e.chunk,c.userComplete=e.complete,c.userError=e.error,e.step=j(e.step),e.chunk=j(e.chunk),e.complete=j(e.complete),e.error=j(e.error),delete e.worker,c.postMessage({input:t,config:e,workerId:c.id})},v.unparse=function(t,e){var c=!1,C=!0,w=",",N=`\r
`,le='"',me=le+le,ge=!1,U=null,B=!1,I=((()=>{if(typeof e=="object"){if(typeof e.delimiter!="string"||v.BAD_DELIMITERS.filter(function(W){return e.delimiter.indexOf(W)!==-1}).length||(w=e.delimiter),typeof e.quotes!="boolean"&&typeof e.quotes!="function"&&!Array.isArray(e.quotes)||(c=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(ge=e.skipEmptyLines),typeof e.newline=="string"&&(N=e.newline),typeof e.quoteChar=="string"&&(le=e.quoteChar),typeof e.header=="boolean"&&(C=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");U=e.columns}e.escapeChar!==void 0&&(me=e.escapeChar+le),e.escapeFormulae instanceof RegExp?B=e.escapeFormulae:typeof e.escapeFormulae=="boolean"&&e.escapeFormulae&&(B=/^[=+\-@\t\r].*$/)}})(),new RegExp(J(le),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return oe(null,t,ge);if(typeof t[0]=="object")return oe(U||Object.keys(t[0]),t,ge)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||U),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),oe(t.fields||[],t.data||[],ge);throw new Error("Unable to serialize unrecognized input");function oe(W,y,h){var X="",pe=(typeof W=="string"&&(W=JSON.parse(W)),typeof y=="string"&&(y=JSON.parse(y)),Array.isArray(W)&&0<W.length),b=!Array.isArray(y[0]);if(pe&&C){for(var u=0;u<W.length;u++)0<u&&(X+=w),X+=H(W[u],u);0<y.length&&(X+=N)}for(var g=0;g<y.length;g++){var L=(pe?W:y[g]).length,T=!1,O=pe?Object.keys(y[g]).length===0:y[g].length===0;if(h&&!pe&&(T=h==="greedy"?y[g].join("").trim()==="":y[g].length===1&&y[g][0].length===0),h==="greedy"&&pe){for(var G=[],M=0;M<L;M++){var A=b?W[M]:M;G.push(y[g][A])}T=G.join("").trim()===""}if(!T){for(var S=0;S<L;S++){0<S&&!O&&(X+=w);var E=pe&&b?W[S]:S;X+=H(y[g][E],S)}g<y.length-1&&(!h||0<L&&!O)&&(X+=N)}}return X}function H(W,y){var h,X;return W==null?"":W.constructor===Date?JSON.stringify(W).slice(1,25):(X=!1,B&&typeof W=="string"&&B.test(W)&&(W="'"+W,X=!0),h=W.toString().replace(I,me),(X=X||c===!0||typeof c=="function"&&c(W,y)||Array.isArray(c)&&c[y]||((pe,b)=>{for(var u=0;u<b.length;u++)if(-1<pe.indexOf(b[u]))return!0;return!1})(h,v.BAD_DELIMITERS)||-1<h.indexOf(w)||h.charAt(0)===" "||h.charAt(h.length-1)===" ")?le+h+le:h)}},v.RECORD_SEP="",v.UNIT_SEP="",v.BYTE_ORDER_MARK="\uFEFF",v.BAD_DELIMITERS=["\r",`
`,'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!_&&!!l.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=m,v.ParserHandle=se,v.NetworkStreamer=k,v.FileStreamer=z,v.StringStreamer=q,v.ReadableStreamStreamer=Y,l.jQuery&&((f=l.jQuery).fn.parse=function(t){var e=t.config||{},c=[];return this.each(function(N){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var le=0;le<this.files.length;le++)c.push({file:this.files[le],inputElem:this,instanceConfig:f.extend({},e)})}),C(),this;function C(){if(c.length===0)j(t.complete)&&t.complete();else{var N,le,me,ge,U=c[0];if(j(t.before)){var B=t.before(U.file,U.inputElem);if(typeof B=="object"){if(B.action==="abort")return N="AbortError",le=U.file,me=U.inputElem,ge=B.reason,void(j(t.error)&&t.error({name:N},le,me,ge));if(B.action==="skip")return void w();typeof B.config=="object"&&(U.instanceConfig=f.extend(U.instanceConfig,B.config))}else if(B==="skip")return void w()}var I=U.instanceConfig.complete;U.instanceConfig.complete=function(oe){j(I)&&I(oe,U.file,U.inputElem),w()},v.parse(U.file,U.instanceConfig)}}function w(){c.splice(0,1),C()}}),p&&(l.onmessage=function(t){t=t.data,v.WORKER_ID===void 0&&t&&(v.WORKER_ID=t.workerId),typeof t.input=="string"?l.postMessage({workerId:v.WORKER_ID,results:v.parse(t.input,t.config),finished:!0}):(l.File&&t.input instanceof File||t.input instanceof Object)&&(t=v.parse(t.input,t.config))&&l.postMessage({workerId:v.WORKER_ID,results:t,finished:!0})}),(k.prototype=Object.create(D.prototype)).constructor=k,(z.prototype=Object.create(D.prototype)).constructor=z,(q.prototype=Object.create(q.prototype)).constructor=q,(Y.prototype=Object.create(D.prototype)).constructor=Y,v})}(vt)),vt.exports}var Fr=Lr();const Vr=Mr(Fr);function jr(n){const a=Vr.parse(n,{header:!0,skipEmptyLines:!0,transformHeader:s=>s.trim().toLowerCase(),dynamicTyping:!1,transform:s=>s.trim()});return a.errors.length>0?(console.error("CSV Parsing Errors with Papaparse:",a.errors),a.data.filter(l=>l&&typeof l=="object"&&Object.keys(l).length>0)):a.data.filter(s=>s&&typeof s=="object"&&Object.keys(s).length>0)}function qr(n){const a={};return n.forEach(s=>{var k;const l=s.title;if(!l)return;const f=[],_=Object.keys(s),p=_.findIndex(z=>z.toLowerCase()==="casted");if(p!==-1)for(let z=p+1;z<_.length;z++){const q=_[z].trim(),Y=(k=s[_[z]])==null?void 0:k.trim();q&&Y&&f.push({character_name:Y,performer_name:q})}const x=s.time||s.duration||"5:00",[Z,v]=x.split(":").map(Number),D=Z+(v||0)/60;a[l]={id:crypto.randomUUID(),title:l,description:s.description||"",duration:Math.ceil(D),chars:parseInt(s.chars||"0",10),casted:f.length,locked:!1,character_performers:f.map(z=>({character_name:z.character_name,performer_name:z.performer_name})),raw_data:s}}),Object.values(a)}async function Nr(n){return new Promise((a,s)=>{const l=new FileReader;l.onload=f=>{var _;try{const p=(_=f.target)==null?void 0:_.result,x=jr(p);a(x)}catch(p){s(p)}},l.onerror=()=>s(l.error),l.readAsText(n)})}var Ur=ae('<div><h2 class="text-lg font-medium text-gray-900 mb-4">Import Running Order</h2> <div class="space-y-6"><div class="flex items-center justify-center w-full"><label for="csv-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"><div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg> <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p> <p class="text-xs text-gray-500">CSV files only</p></div> <input id="csv-file" type="file" accept=".csv" class="hidden"></label></div> <button type="button" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-2">Upload CSV</button></div></div>');function Br(n,a){ze(a,!1),Ce(a,"showId",8);const s=Ke();let l=be(),f=be(!1);function _(m){const F=m.map(e=>e.toLowerCase().trim());if(["sketch","cues","props","costume","stage dressing"].every(e=>F.includes(e)))return"techDetails";const ee=["title"],ie=["time","chars","casted","rocio","jacob","adrian","vera","max","gusta","richie","harry","connor","kieran","chiara","lari","theresa","cliff","tim"],j=ee.every(e=>F.includes(e)),t=ie.some(e=>F.includes(e));return j&&t?"sketches":"unknown"}async function p(){const m=r(l).files;if(!(!m||m.length===0))try{const F=m[0],K=await Nr(F);if(!K||K.length===0){alert("CSV file is empty or could not be processed."),at(l,r(l).value="");return}const de=Object.keys(K[0]),ee=_(de);if(ee==="unknown"){alert('Could not automatically determine CSV type. Please check the file headers and format. Expected headers for sketches: "title" and at least one of "Time", "chars", etc. Expected headers for tech details: "Sketch", "Cues", "Props", "Costume", "Stage Dressing".'),at(l,r(l).value="");return}let ie;ee==="sketches"?ie=qr(K):ie=K,s("import",{importType:ee,data:ie}),at(l,r(l).value="")}catch(F){console.error("Error importing CSV:",F),alert("Error importing CSV file. Please check the file format and content."),at(l,r(l).value="")}}function x(m){m.preventDefault(),P(f,!0)}function Z(m){m.preventDefault(),P(f,!1)}function v(m){var K;m.preventDefault(),P(f,!1);const F=(K=m.dataTransfer)==null?void 0:K.files;F&&F.length>0&&(at(l,r(l).files=F),p())}Ve();var D=Ur();let k;var z=d(o(D),2),q=o(z),Y=o(q),se=d(o(Y),2);br(se,m=>P(l,m),()=>r(l)),i(Y),i(q);var J=d(q,2);J.__click=p,i(z),i(D),he(m=>k=xe(D,1,"bg-white p-6 rounded-lg shadow-sm",null,k,m),[()=>({"border-2":r(f),"border-dashed":r(f),"border-blue-500":r(f)})],Ie),ne("dragover",D,m=>x(m)),ne("dragleave",D,m=>Z(m)),ne("drop",D,m=>v(m)),V(n,D),Pe()}Tt(["click"]);const Hr=n=>n;function Wr(n){const a=n-1;return a*a*a+1}function Kr(n,{delay:a=0,duration:s=400,easing:l=Hr}={}){const f=+getComputedStyle(n).opacity;return{delay:a,duration:s,easing:l,css:_=>`opacity: ${_*f}`}}function Jr(n,{delay:a=0,duration:s=400,easing:l=Wr,axis:f="y"}={}){const _=getComputedStyle(n),p=+_.opacity,x=f==="y"?"height":"width",Z=parseFloat(_[x]),v=f==="y"?["top","bottom"]:["left","right"],D=v.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),k=parseFloat(_[`padding${D[0]}`]),z=parseFloat(_[`padding${D[1]}`]),q=parseFloat(_[`margin${D[0]}`]),Y=parseFloat(_[`margin${D[1]}`]),se=parseFloat(_[`border${D[0]}Width`]),J=parseFloat(_[`border${D[1]}Width`]);return{delay:a,duration:s,easing:l,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*p};${x}: ${m*Z}px;padding-${v[0]}: ${m*k}px;padding-${v[1]}: ${m*z}px;margin-${v[0]}: ${m*q}px;margin-${v[1]}: ${m*Y}px;border-${v[0]}-width: ${m*se}px;border-${v[1]}-width: ${m*J}px;min-${x}: 0`}}var Gr=ht('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),Qr=ht('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),Zr=ae('<span class="text-amber-500"> </span>'),Xr=ae('<li class="flex justify-between"><span class="font-medium text-gray-700"> </span> <span class="text-gray-500"> </span></li>'),Yr=ae('<div class="cast-list px-4 pb-3 pt-1 bg-gray-50"><ul class="text-xs space-y-1"></ul></div>'),ea=ae('<div class="border-t border-gray-200 px-4 py-2"><button class="cast-toggle text-sm text-blue-600 hover:text-blue-800 font-medium focus:outline-none w-full text-left flex justify-between items-center"><span> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!>',1),ta=ae('<div tabindex="0" role="button" style="min-height: 150px;"><div class="p-4 flex-grow"><div class="flex justify-between items-center mb-2"><div class="flex items-center gap-2"><h3 class="text-lg font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center gap-0.5"><button><!></button> <button class="action-button delete-button svelte-1qd7kif" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <p class="description text-sm text-gray-600 mb-3 line-clamp-1"> </p> <div class="stats text-xs text-gray-500 space-x-3 mb-3"><span> </span> <span> </span> <span> </span> <!></div></div> <!></div>');function ra(n,a){ze(a,!1);let s=Ce(a,"sketch",8),l=Ce(a,"isSelected",8,!1),f=Ce(a,"showCharacterWarning",8,!1),_=be(!1);const p=Ke();function x(h){h.target instanceof HTMLElement&&h.target.closest("button, .cast-toggle")||h.target instanceof HTMLElement&&h.target.closest(".card")&&p("select",{sketch:s()})}function Z(h){h.stopPropagation(),p("lock",{id:s().id,locked:!s().locked})}function v(h){h.stopPropagation(),p("delete",{id:s().id})}function D(h){h.stopPropagation(),P(_,!r(_))}function k(h){(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),h.target instanceof HTMLElement&&h.target.closest("button, .cast-toggle")?h.target.closest(".cast-toggle")&&D(h):x(h))}Ve();var z=ta(),q=o(z),Y=o(q),se=o(Y),J=o(se),m=o(J,!0);i(J);var F=d(J,2);{var K=h=>{Lt(h,{class:"warning-icon",size:16})};fe(F,h=>{f()&&h(K)})}i(se);var de=d(se,2),ee=o(de);let ie;var j=o(ee);{var t=h=>{var X=Gr();V(h,X)},e=h=>{var X=Qr();V(h,X)};fe(j,h=>{s().locked?h(t):h(e,!1)})}i(ee);var c=d(ee,2);i(de),i(Y);var C=d(Y,2),w=o(C,!0);i(C);var N=d(C,2),le=o(N),me=o(le);i(le);var ge=d(le,2),U=o(ge);i(ge);var B=d(ge,2),I=o(B);i(B);var oe=d(B,2);{var H=h=>{var X=Zr(),pe=o(X);i(X),he(()=>{var b;return re(pe,`(${(((b=s().character_performers)==null?void 0:b.length)||0)??""}/${s().chars??""} characters)`)}),V(h,X)};fe(oe,h=>{f()&&h(H)})}i(N),i(q);var W=d(q,2);{var y=h=>{var X=ea(),pe=Fe(X),b=o(pe),u=o(b),g=o(u);i(u);var L=d(u,2);i(b),i(pe);var T=d(pe,2);{var O=G=>{var M=Yr(),A=o(M);Le(A,5,()=>s().character_performers,S=>S.id||S.character_name+S.performer_name,(S,E)=>{var $=Xr(),Q=o($),R=o(Q,!0);i(Q);var ve=d(Q,2),te=o(ve,!0);i(ve),i($),he(()=>{re(R,r(E).character_name),re(te,r(E).performer_name)}),V(S,$)}),i(A),i(M),It(3,M,()=>Jr,()=>({duration:200})),V(G,M)};fe(T,G=>{r(_)&&G(O)})}he(()=>{Oe(b,"aria-expanded",r(_)),re(g,`Show Cast (${s().character_performers.length??""})`),xe(L,0,`w-4 h-4 transform transition-transform duration-200 ${r(_)?"rotate-180":""}`)}),ne("click",b,D),V(h,X)};fe(W,h=>{s().character_performers&&s().character_performers.length>0&&h(y)})}i(z),he(h=>{xe(z,1,`card ${l()?"selected border-blue-500":"border-gray-200"} ${s().locked?"locked":""} border bg-white rounded-lg shadow hover:shadow-md transition-all duration-200 flex flex-col`,"svelte-1qd7kif"),Oe(z,"aria-label",`View sketch details for ${s().title??""}`),Oe(J,"title",s().title),re(m,s().title),ie=xe(ee,1,"action-button lock-button svelte-1qd7kif",null,ie,h),Oe(ee,"aria-label",s().locked?"Unlock sketch":"Lock sketch"),Oe(ee,"title",s().locked?"Unlock sketch":"Lock sketch"),Oe(C,"title",s().description||"A sketch waiting for its story..."),re(w,s().description||"A sketch waiting for its story..."),re(me,`Duration: ${s().duration??""} min`),re(U,`Chars: ${s().chars??""}`),re(I,`Casted: ${s().casted??""}`)},[()=>({locked:s().locked})],Ie),ne("click",ee,nt(Z)),ne("click",c,nt(v)),ne("click",z,x),ne("keydown",z,k),V(n,z),Pe()}function aa(n,a){P(a,!0)}function sa(n,a,s,l,f,_,p,x){P(a,!1),P(s,l().title),P(f,l().description),P(_,l().duration),P(p,l().chars),P(x,[...l().character_performers||[]])}function ia(n,a,s,l,f,_,p,x,Z){const v={...a(),title:r(s),description:r(l),duration:r(f),chars:r(_),casted:r(p).length,character_performers:r(p)};x("update",{sketch:v}),P(Z,!1)}var na=n=>n.stopPropagation(),oa=(n,a)=>n.key==="Enter"&&a(),la=(n,a,s)=>a(r(s).id),ca=ae('<li class="svelte-9bbfpy"><span class="character svelte-9bbfpy"> </span> <span class="performer svelte-9bbfpy"> </span> <button type="button" class="remove-button svelte-9bbfpy">×</button></li>'),da=ae('<div class="character-list svelte-9bbfpy"><h4>Current Assignments</h4> <ul class="svelte-9bbfpy"></ul></div>'),va=ae('<div class="edit-form svelte-9bbfpy"><div class="form-group svelte-9bbfpy"><label for="title" class="svelte-9bbfpy">Title</label> <input type="text" id="title" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="description" class="svelte-9bbfpy">Description</label> <textarea id="description" class="svelte-9bbfpy"></textarea></div> <div class="form-group svelte-9bbfpy"><label for="duration" class="svelte-9bbfpy">Duration (minutes)</label> <input type="number" id="duration" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="chars" class="svelte-9bbfpy">Number of Characters</label> <input type="number" id="chars" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label class="svelte-9bbfpy">Character Assignments</label> <div class="character-inputs svelte-9bbfpy"><input type="text" placeholder="Character name" class="svelte-9bbfpy"> <input type="text" placeholder="Performer name" class="svelte-9bbfpy"> <button type="button" class="svelte-9bbfpy">Add</button></div></div> <!> <div class="form-actions svelte-9bbfpy"><button type="button" class="svelte-9bbfpy">Cancel</button> <button type="button" class="svelte-9bbfpy">Save</button></div></div>'),ua=ae('<p class="description svelte-9bbfpy"> </p>'),fa=ae('<div class="cast-item svelte-9bbfpy"><span class="character-name svelte-9bbfpy"> </span> <span class="performer-name svelte-9bbfpy"> </span></div>'),ha=ae('<div class="cast-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Cast</h4> <div class="cast-grid svelte-9bbfpy"></div></div>'),pa=ae('<div class="tech-grid svelte-9bbfpy"><div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Cues</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Props</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Costume</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Stage Dressing</span> <span class="tech-value svelte-9bbfpy"> </span></div></div>'),_a=ae('<p class="no-tech-details svelte-9bbfpy">No tech details available for this sketch.</p>'),ga=ae('<div class="view-mode svelte-9bbfpy"><div class="header svelte-9bbfpy"><h2 class="svelte-9bbfpy"> </h2> <button type="button" class="edit-button svelte-9bbfpy">Edit</button></div> <!> <div class="stats-container svelte-9bbfpy"><div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Duration</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Characters</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Casted</span> <span class="stat-value svelte-9bbfpy"> </span></div></div> <!> <div class="tech-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Tech Details</h4> <!></div></div>'),ma=ae('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-start mb-4"><div class="flex items-center gap-4"><button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Back to show"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <h2 class="text-2xl font-bold text-gray-900"> </h2></div> <button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close details"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div></div></div>');function ba(n,a){ze(a,!1);let s=Ce(a,"sketch",8);const l=Ke();let f=be(!1),_=be(s().title),p=be(s().description),x=be(s().duration),Z=be(s().chars),v=be(""),D=be(""),k=be([...s().character_performers||[]]);function z(){!r(v)||!r(D)||(P(k,[...r(k),{id:crypto.randomUUID(),sketch_id:s().id,character_name:r(v),performer_name:r(D),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),P(v,""),P(D,""))}function q(w){P(k,r(k).filter(N=>N.id!==w))}function Y(w){w.stopPropagation(),l("close")}function se(w){w.key==="Escape"&&Y(w)}Ot(()=>(document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se))),Ve();var J=ma();J.__click=Y;var m=o(J);m.__click=[na];var F=o(m),K=o(F),de=o(K),ee=o(de);ee.__click=Y;var ie=d(ee,2),j=o(ie,!0);i(ie),i(de);var t=d(de,2);t.__click=Y,i(K);var e=d(K,2);{var c=w=>{var N=va(),le=o(N),me=d(o(le),2);st(me),i(le);var ge=d(le,2),U=d(o(ge),2);hr(U),i(ge);var B=d(ge,2),I=d(o(B),2);st(I),i(B);var oe=d(B,2),H=d(o(oe),2);st(H),i(oe);var W=d(oe,2),y=d(o(W),2),h=o(y);st(h);var X=d(h,2);st(X),X.__keydown=[oa,z];var pe=d(X,2);pe.__click=z,i(y),i(W);var b=d(W,2);{var u=O=>{var G=da(),M=d(o(G),2);Le(M,5,()=>r(k),ot,(A,S)=>{var E=ca(),$=o(E),Q=o($,!0);i($);var R=d($,2),ve=o(R,!0);i(R);var te=d(R,2);te.__click=[la,q,S],i(E),he(()=>{re(Q,r(S).character_name),re(ve,r(S).performer_name)}),V(A,E)}),i(M),i(G),V(O,G)};fe(b,O=>{r(k).length>0&&O(u)})}var g=d(b,2),L=o(g);L.__click=[sa,f,_,s,p,x,Z,k];var T=d(L,2);T.__click=[ia,s,_,p,x,Z,k,l,f],i(g),i(N),Qe(me,()=>r(_),O=>P(_,O)),Qe(U,()=>r(p),O=>P(p,O)),Qe(I,()=>r(x),O=>P(x,O)),Qe(H,()=>r(Z),O=>P(Z,O)),Qe(h,()=>r(v),O=>P(v,O)),Qe(X,()=>r(D),O=>P(D,O)),V(w,N)},C=w=>{var N=ga(),le=o(N),me=o(le),ge=o(me,!0);i(me);var U=d(me,2);U.__click=[aa,f],i(le);var B=d(le,2);{var I=S=>{var E=ua(),$=o(E,!0);i(E),he(()=>re($,s().description)),V(S,E)};fe(B,S=>{s().description&&S(I)})}var oe=d(B,2),H=o(oe),W=d(o(H),2),y=o(W);i(W),i(H);var h=d(H,2),X=d(o(h),2),pe=o(X,!0);i(X),i(h);var b=d(h,2),u=d(o(b),2),g=o(u,!0);i(u),i(b),i(oe);var L=d(oe,2);{var T=S=>{var E=ha(),$=d(o(E),2);Le($,5,()=>s().character_performers,ot,(Q,R)=>{var ve=fa(),te=o(ve),Se=o(te,!0);i(te);var _e=d(te,2),we=o(_e,!0);i(_e),i(ve),he(()=>{re(Se,r(R).character_name),re(we,r(R).performer_name)}),V(Q,ve)}),i($),i(E),V(S,E)};fe(L,S=>{var E;(E=s().character_performers)!=null&&E.length&&S(T)})}var O=d(L,2),G=d(o(O),2);{var M=S=>{var E=pa(),$=o(E),Q=d(o($),2),R=o(Q,!0);i(Q),i($);var ve=d($,2),te=d(o(ve),2),Se=o(te,!0);i(te),i(ve);var _e=d(ve,2),we=d(o(_e),2),ce=o(we,!0);i(we),i(_e);var ye=d(_e,2),ke=d(o(ye),2),je=o(ke,!0);i(ke),i(ye),i(E),he(()=>{re(R,s().techDetails.cues||"N/A"),re(Se,s().techDetails.props||"N/A"),re(ce,s().techDetails.costume||"N/A"),re(je,s().techDetails.stage_dressing||"N/A")}),V(S,E)},A=S=>{var E=_a();V(S,E)};fe(G,S=>{s().techDetails?S(M):S(A,!1)})}i(O),i(N),he(()=>{re(ge,s().title),re(y,`${s().duration??""} min`),re(pe,s().chars),re(g,s().casted)}),V(w,N)};fe(e,w=>{r(f)?w(c):w(C,!1)})}i(F),i(m),i(J),he(()=>re(j,s().title)),V(n,J),Pe()}Tt(["click","keydown"]);function wa(n){const a=n-1;return a*a*a+1}function Dt(n,{from:a,to:s},l={}){var{delay:f=0,duration:_=ie=>Math.sqrt(ie)*120,easing:p=wa}=l,x=getComputedStyle(n),Z=x.transform==="none"?"":x.transform,[v,D]=x.transformOrigin.split(" ").map(parseFloat);v/=n.clientWidth,D/=n.clientHeight;var k=ya(n),z=n.clientWidth/s.width/k,q=n.clientHeight/s.height/k,Y=a.left+a.width*v,se=a.top+a.height*D,J=s.left+s.width*v,m=s.top+s.height*D,F=(Y-J)*z,K=(se-m)*q,de=a.width/s.width,ee=a.height/s.height;return{delay:f,duration:typeof _=="function"?_(Math.sqrt(F*F+K*K)):_,easing:p,css:(ie,j)=>{var t=j*F,e=j*K,c=ie+j*de,C=ie+j*ee;return`transform: ${Z} translate(${t}px, ${e}px) scale(${c}, ${C});`}}}function ya(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var a=n,s=1;a!==null;)s*=+getComputedStyle(a).zoom,a=a.parentElement;return s}var ka=ae('<div class="detail svelte-1k3z6oi"><strong>Costume:</strong> </div>'),xa=ae('<div class="detail svelte-1k3z6oi"><strong>Stage:</strong> </div>'),Ca=ae('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),Sa=ae('<div class="detail svelte-1k3z6oi"><strong>Cues:</strong> </div>'),Ea=ae('<div class="detail svelte-1k3z6oi"><strong>Props:</strong> </div>'),$a=ae('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),Da=ae('<div class="sketch svelte-1k3z6oi"><div class="sketch-header svelte-1k3z6oi"><span class="position svelte-1k3z6oi"> </span> <span class="title svelte-1k3z6oi"> </span> <span class="duration svelte-1k3z6oi"> </span></div> <div class="performers svelte-1k3z6oi"> </div> <!> <!></div>'),za=ae('<div class="print-container svelte-1k3z6oi"><div class="header svelte-1k3z6oi"><h1 class="svelte-1k3z6oi"> </h1> <div class="version-info svelte-1k3z6oi"><!></div></div> <div class="sketches svelte-1k3z6oi"></div></div>');function Pa(n,a){ze(a,!1);const s=be();let l=Ce(a,"sketches",8),f=Ce(a,"showTitle",8),_=Ce(a,"version",8);function p(m){const F=Math.floor(m/60),K=m%60;return F>0?`${F}h ${K}m`:`${K}m`}function x(m){return(m.character_performers||[]).map(F=>F.performer_name).join(", ")}dt(()=>cr(l()),()=>{P(s,[...l()].sort((m,F)=>m.position-F.position))}),Pt(),Ve();var Z=za(),v=o(Z),D=o(v),k=o(D,!0);i(D);var z=d(D,2),q=o(z);{var Y=m=>{var F=pt("Green Room Version");V(m,F)},se=(m,F)=>{{var K=ee=>{var ie=pt("Hallway Version");V(ee,ie)},de=ee=>{var ie=pt("Tech Booth Version");V(ee,ie)};fe(m,ee=>{_()==="hallway"?ee(K):ee(de,!1)},F)}};fe(q,m=>{_()==="greenroom"?m(Y):m(se,!1)})}i(z),i(v);var J=d(v,2);Le(J,5,()=>r(s),ot,(m,F)=>{var K=Da(),de=o(K),ee=o(de),ie=o(ee);i(ee);var j=d(ee,2),t=o(j,!0);i(j);var e=d(j,2),c=o(e,!0);i(e),i(de);var C=d(de,2),w=o(C,!0);i(C);var N=d(C,2);{var le=U=>{var B=Ca(),I=o(B);{var oe=y=>{var h=ka(),X=d(o(h));i(h),he(()=>re(X,` ${r(F).techDetails.costume??""}`)),V(y,h)};fe(I,y=>{var h;(h=r(F).techDetails)!=null&&h.costume&&y(oe)})}var H=d(I,2);{var W=y=>{var h=xa(),X=d(o(h));i(h),he(()=>re(X,` ${r(F).techDetails.stage_dressing??""}`)),V(y,h)};fe(H,y=>{var h;(h=r(F).techDetails)!=null&&h.stage_dressing&&y(W)})}i(B),V(U,B)};fe(N,U=>{(_()==="hallway"||_()==="techbooth")&&U(le)})}var me=d(N,2);{var ge=U=>{var B=$a(),I=o(B);{var oe=y=>{var h=Sa(),X=d(o(h));i(h),he(()=>re(X,` ${r(F).techDetails.cues??""}`)),V(y,h)};fe(I,y=>{var h;(h=r(F).techDetails)!=null&&h.cues&&y(oe)})}var H=d(I,2);{var W=y=>{var h=Ea(),X=d(o(h));i(h),he(()=>re(X,` ${r(F).techDetails.props??""}`)),V(y,h)};fe(H,y=>{var h;(h=r(F).techDetails)!=null&&h.props&&y(W)})}i(B),V(U,B)};fe(me,U=>{_()==="techbooth"&&U(ge)})}i(K),he((U,B)=>{re(ie,`${r(F).position+1}.`),re(t,r(F).title),re(c,U),re(w,B)},[()=>p(r(F).duration),()=>x(r(F))],Ie),V(m,K)}),i(J),i(Z),he(()=>re(k,f())),V(n,Z),Pe()}var Ta=ae("<button> </button>"),Oa=ae('<div class="filter-dropdown svelte-uawkgq"><button>All Performers</button> <!></div>'),Ra=ae('<div class="collapsed-buttons svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Print Set List"><!></button> <div class="filter-container svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Filter by Performer"><!></button> <!></div> <button class="sidebar-button svelte-uawkgq" title="Import CSV"><!></button></div>'),Ia=ae('<div><button class="sidebar-button collapse-button svelte-uawkgq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <div class="sidebar-header svelte-uawkgq"><h1 class="svelte-uawkgq"> </h1> <div class="print-controls svelte-uawkgq"><select class="svelte-uawkgq"><option>Green Room Version</option><option>Hallway Version</option><option>Tech Booth Version</option></select> <button class="print-button svelte-uawkgq">Print Set List</button></div></div> <div class="sidebar-content svelte-uawkgq"><!> <div class="mt-4"><!></div></div> <!></div>');function Ma(n,a){ze(a,!1);let s=Ce(a,"show",8),l=Ce(a,"performers",8),f=Ce(a,"selectedPerformer",12,null),_=Ce(a,"printVersion",12,"greenroom"),p=Ce(a,"isSidebarCollapsed",12,!1);const x=Ke();let Z=be(!1);function v(){p(!p()),x("collapse",{collapsed:p()})}function D(){P(Z,!r(Z))}function k(B){x("filter",{performer:B}),P(Z,!1)}function z(){x("print",{printVersion:_()})}function q(B){x("csvImport",B.detail)}Ve();var Y=Ia();let se;var J=o(Y),m=o(J);let F;i(J);var K=d(J,2),de=o(K),ee=o(de,!0);i(de);var ie=d(de,2),j=o(ie);he(()=>{_(),dr(()=>{})});var t=o(j);t.value=t.__value="greenroom";var e=d(t);e.value=e.__value="hallway";var c=d(e);c.value=c.__value="techbooth",i(j);var C=d(j,2);i(ie),i(K);var w=d(K,2),N=o(w);Ft(N,{get performers(){return l()},get selectedPerformer(){return f()},set selectedPerformer(B){f(B)},$$legacy:!0});var le=d(N,2),me=o(le);Br(me,{get showId(){return s().id},$$events:{import:q,importComplete:()=>x("importComplete")}}),i(le),i(w);var ge=d(w,2);{var U=B=>{var I=Ra(),oe=o(I),H=o(oe);At(H,{size:20}),i(oe);var W=d(oe,2),y=o(W),h=o(y);$r(h,{size:20}),i(y);var X=d(y,2);{var pe=g=>{var L=Oa(),T=o(L);let O;var G=d(T,2);Le(G,1,l,ot,(M,A)=>{var S=Ta();let E;var $=o(S,!0);i(S),he(Q=>{E=xe(S,1,"filter-option svelte-uawkgq",null,E,Q),re($,r(A))},[()=>({active:f()===r(A)})],Ie),ne("click",S,()=>k(r(A))),V(M,S)}),i(L),he(M=>O=xe(T,1,"filter-option svelte-uawkgq",null,O,M),[()=>({active:f()===null})],Ie),ne("click",T,()=>k(null)),It(3,L,()=>Kr),V(g,L)};fe(X,g=>{r(Z)&&g(pe)})}i(W);var b=d(W,2),u=o(b);Pr(u,{size:20}),i(b),i(I),ne("click",oe,z),ne("click",y,D),ne("click",b,()=>{const g=document.querySelector('input[type="file"]');g==null||g.click()}),V(B,I)};fe(ge,B=>{p()&&B(U)})}i(Y),he((B,I)=>{se=xe(Y,1,"sidebar svelte-uawkgq",null,se,B),Oe(J,"aria-label",p()?"Expand sidebar":"Collapse sidebar"),F=xe(m,0,"arrow-icon svelte-uawkgq",null,F,I),re(ee,s().title)},[()=>({collapsed:p()}),()=>({collapsed:p()})],Ie),ne("click",J,v),Cr(j,_),ne("click",C,z),V(n,Y),Pe()}var Aa=ae('<div class="view-controls svelte-6p89z8"><div class="view-buttons svelte-6p89z8"><button aria-label="Grid view"><!></button> <button aria-label="List view"><!></button></div> <div class="print-buttons svelte-6p89z8"><button>Green Room</button> <button>Hallway</button> <button>Tech Booth</button></div></div>');function La(n,a){ze(a,!1);let s=Ce(a,"viewMode",12,"list"),l=Ce(a,"printVersion",12,"greenroom"),f=Ce(a,"showPrintView",8,!1);const _=Ke();function p(j){s(j),_("viewModeChange",{viewMode:j})}function x(j){l(j),_("printVersionChange",{printVersion:j}),_("showPrintViewChange",{showPrintView:!0})}Ve();var Z=Aa(),v=o(Z),D=o(v);let k;var z=o(D);Dr(z,{size:20}),i(D);var q=d(D,2);let Y;var se=o(q);zr(se,{size:20}),i(q),i(v);var J=d(v,2),m=o(J);let F;var K=d(m,2);let de;var ee=d(K,2);let ie;i(J),i(Z),he((j,t,e,c,C)=>{k=xe(D,1,"view-button svelte-6p89z8",null,k,j),Y=xe(q,1,"view-button svelte-6p89z8",null,Y,t),F=xe(m,1,"print-view-button svelte-6p89z8",null,F,e),de=xe(K,1,"print-view-button svelte-6p89z8",null,de,c),ie=xe(ee,1,"print-view-button svelte-6p89z8",null,ie,C)},[()=>({active:s()==="grid"}),()=>({active:s()==="list"}),()=>({active:f()&&l()==="greenroom"}),()=>({active:f()&&l()==="hallway"}),()=>({active:f()&&l()==="techbooth"})],Ie),ne("click",D,()=>p("grid")),ne("click",q,()=>p("list")),ne("click",m,()=>x("greenroom")),ne("click",K,()=>x("hallway")),ne("click",ee,()=>x("techbooth")),V(n,Z),Pe()}var Fa=ae('<div class="fixed inset-0 bg-white z-50 overflow-auto"><div class="sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between print:hidden"><div class="flex items-center gap-4"><button class="flex items-center gap-2 text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m15 18-6-6 6-6"></path></svg> Back to Show</button> <h2 class="text-lg font-medium text-gray-900"> </h2></div> <div class="flex items-center gap-4"><div class="performer-filter-wrapper svelte-xaaopz"><!></div> <div class="flex gap-2"><button>Greenroom</button> <button>Hallway</button> <button>Tech Booth</button></div> <button class="text-gray-600 hover:text-gray-900" aria-label="Print set list"><!></button></div></div> <div class="p-4"><!></div></div>'),Va=ht('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),ja=ht('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),qa=ae('<span class="character-count svelte-xaaopz"> </span>'),Na=ae('<div class="description svelte-xaaopz"><strong>Description:</strong> </div>'),Ua=ae('<div class="detail svelte-xaaopz"><strong class="svelte-xaaopz">Costume:</strong> </div>'),Ba=ae('<div class="detail svelte-xaaopz"><strong class="svelte-xaaopz">Stage:</strong> </div>'),Ha=ae('<div class="detail svelte-xaaopz"><strong class="svelte-xaaopz">Cues:</strong> </div>'),Wa=ae('<div class="detail svelte-xaaopz"><strong class="svelte-xaaopz">Props:</strong> </div>'),Ka=ae('<div class="tech-details svelte-xaaopz"><!> <!> <!> <!></div>'),Ja=ae('<div class="list-item-details svelte-xaaopz"><!> <!></div>'),Ga=ae('<div role="listitem"><div class="list-item-header svelte-xaaopz"><div class="list-item-main svelte-xaaopz"><span class="position svelte-xaaopz"> </span> <button class="title svelte-xaaopz"> </button> <!> <span class="duration svelte-xaaopz"> </span> <div class="list-item-actions svelte-xaaopz"><button><!></button> <button class="action-button delete-button svelte-xaaopz" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <div class="list-item-performers svelte-xaaopz"> <!></div></div> <!></div>'),Qa=ae('<div class="list-view svelte-xaaopz"></div>'),Za=ae('<div role="listitem"><!></div>'),Xa=ae('<div class="grid-view svelte-xaaopz"></div>'),Ya=ae('<div class="modal-backdrop svelte-xaaopz" role="dialog" aria-modal="true" aria-label="Sketch details"><div class="modal-content svelte-xaaopz" role="document"><!></div></div>'),es=ae('<div class="show-page svelte-xaaopz"><!> <div class="content svelte-xaaopz"><!> <!> <!></div></div>');function us(n,a){ze(a,!1);const[s,l]=_r(),f=()=>pr(Or,"$page",s),_=be(),p=be(),x=be();let Z=Ce(a,"data",8);Ke();const v=f().params.id;let D=Z().show,k=be(Z().sketches),z=be(null),q=be(null),Y=be("list");const se=300;let J=be(!1),m=be("greenroom"),F=be(null),K=be(null),de=be(null),ee=be(null),ie=be(!1);function j(b){const u=Math.floor(b/60),g=b%60;return u>0?`${u}h ${g}m`:`${g}m`}Ot(async()=>{await oe()});async function t(b){try{const{importType:u,data:g}=b.detail;if(u==="unknown"){console.error("Import type is unknown. Aborting."),alert("Could not determine CSV type. Please check file format.");return}let L;u==="sketches"?L={show_id:v,importType:u,data:g.map((G,M)=>({...G,position:r(k).length+M}))}:L={show_id:v,importType:u,data:g};const T=await fetch("/api/sketches/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!T.ok){const G=await T.json().catch(()=>({error:"Failed to import data. Unknown error."}));throw new Error(G.error||"Failed to import data")}const O=await T.json();if(u==="sketches"){const G=O.filter(M=>M.success&&M.sketch).map(M=>M.sketch);if(G.length>0)P(k,[...r(k),...G].sort((M,A)=>M.position-A.position)),alert(`${G.length} sketch(es) imported successfully.`);else{const M=O.filter(A=>!A.success);M.length>0?(alert(`Import partially failed. ${M.length} sketch(es) had issues. Check console for details.`),console.error("Sketch import errors:",M)):alert("No new sketches were imported. The file might have been empty or all rows failed.")}}else{const G=O.filter(A=>A.success).length,M=O.length-G;alert(`Tech details import complete. ${G} successful, ${M} failed. Check console for details.`),M>0&&console.error("Tech detail import issues:",O.filter(A=>!A.success)),await oe()}}catch(u){console.error("Error importing data:",u),alert(`Error during import: ${u instanceof Error?u.message:"Unknown error"}`)}}async function e(b){try{if(!(await fetch(`/api/sketches/${b.detail.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({locked:b.detail.locked})})).ok)throw new Error("Failed to update sketch");P(k,r(k).map(g=>g.id===b.detail.id?{...g,locked:b.detail.locked}:g))}catch(u){console.error("Error updating sketch:",u)}}function c(b,u){e(new CustomEvent("lock",{detail:{id:b,locked:u}}))}async function C(b){var g;const u=b.detail.id;if(u)try{if(!(await fetch(`/api/sketches/${u}`,{method:"DELETE"})).ok)throw new Error("Failed to delete sketch");const T=r(k).findIndex(O=>O.id===u);P(k,r(k).filter(O=>O.id!==u)),P(k,r(k).map((O,G)=>({...O,position:G}))),((g=r(z))==null?void 0:g.id)===u&&P(z,null),await I(r(k))}catch(L){console.error("Error deleting sketch:",L)}}function w(b){C(new CustomEvent("delete",{detail:{id:b}}))}async function N(b){var u;try{if(!(await fetch(`/api/sketches/${b.detail.sketch.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b.detail.sketch)})).ok)throw new Error("Failed to update sketch");P(k,r(k).map(L=>L.id===b.detail.sketch.id?b.detail.sketch:L).sort((L,T)=>L.position-T.position)),((u=r(z))==null?void 0:u.id)===b.detail.sketch.id&&P(z,b.detail.sketch)}catch(g){console.error("Error updating sketch:",g)}}function le(b,u){if(u.locked){b.preventDefault();return}P(K,u),b.dataTransfer&&(b.dataTransfer.effectAllowed="move")}function me(b,u){b.preventDefault(),!(!r(K)||r(K).locked||r(p)[u].locked)&&(P(de,u),b.dataTransfer&&(b.dataTransfer.dropEffect="move"))}function ge(){P(de,null)}async function U(b,u){if(b.preventDefault(),!r(K)||r(K).locked||r(p)[u].locked)return;const L=[...r(p)],T=L.findIndex(O=>{var G;return O.id===((G=r(K))==null?void 0:G.id)});if(T!==-1){L.splice(T,1),L.splice(u,0,r(K));const O=L,G=new Map(O.map((A,S)=>[A.id,S])),M=r(k).map(A=>{if(A.locked)return A;const S=G.get(A.id);return{...A,position:S!==void 0?S:A.position}}).sort((A,S)=>A.position-S.position).map((A,S)=>({...A,position:S}));P(k,M),await I(M)}P(K,null),P(de,null)}function B(){P(K,null),P(de,null)}async function I(b){const u=b.map(g=>({id:g.id,position:g.position}));try{if(!(await fetch("/api/sketches",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:u})})).ok)throw console.error("Failed to reorder sketches API call failed"),await oe(),new Error("Failed to reorder sketches")}catch(g){console.error("Error reordering sketches:",g),await oe()}}async function oe(){try{const b=await fetch(`/api/sketches?show_id=${v}`);if(!b.ok)throw new Error("Failed to load sketches");const u=await b.json();P(k,u.map(g=>({...g,position:g.position??0,locked:!!g.locked})).sort((g,L)=>g.position-L.position))}catch(b){console.error("Error loading sketches:",b),P(k,[])}}function H(){P(J,!0),setTimeout(()=>{window.print(),P(J,!1)},100)}function W(b){var g;return(((g=b.character_performers)==null?void 0:g.length)||0)!==b.chars}dt(()=>r(k),()=>{P(_,[...new Set(r(k).flatMap(b=>b.character_performers||[]).map(b=>b.performer_name))].sort())}),dt(()=>(r(q),r(k)),()=>{P(p,r(q)?r(k).filter(b=>{var u;return(u=b.character_performers)==null?void 0:u.some(g=>g.performer_name===r(q))}):r(k))}),dt(()=>(r(ee),r(k)),()=>{P(x,r(ee)?r(k).filter(b=>{var u;return(u=b.character_performers)==null?void 0:u.some(g=>g.performer_name===r(ee))}):r(k))}),Pt(),Ve();var y=We(),h=Fe(y);{var X=b=>{var u=Fa(),g=o(u),L=o(g),T=o(L),O=d(T,2),G=o(O);i(O),i(L);var M=d(L,2),A=o(M),S=o(A);Ft(S,{get performers(){return r(_)},get selectedPerformer(){return r(ee)},$$events:{select:we=>P(ee,we.detail.performer)}}),i(A);var E=d(A,2),$=o(E),Q=d($,2),R=d(Q,2);i(E);var ve=d(E,2),te=o(ve);At(te,{size:20}),i(ve),i(M),i(g);var Se=d(g,2),_e=o(Se);Pa(_e,{get sketches(){return r(x)},get showTitle(){return D.title},get version(){return r(m)}}),i(Se),i(u),he(()=>{re(G,`Print View - ${r(m)??""}`),xe($,1,`print-view-button ${r(m)==="greenroom"?"active":""}`),xe(Q,1,`print-view-button ${r(m)==="hallway"?"active":""}`),xe(R,1,`print-view-button ${r(m)==="techbooth"?"active":""}`)}),ne("click",T,()=>P(J,!1)),ne("click",$,()=>P(m,"greenroom")),ne("click",Q,()=>P(m,"hallway")),ne("click",R,()=>P(m,"techbooth")),ne("click",ve,()=>window.print()),V(b,u)},pe=b=>{var u=es(),g=o(u);Ma(g,{show:D,get performers(){return r(_)},get selectedPerformer(){return r(q)},set selectedPerformer(E){P(q,E)},get printVersion(){return r(m)},set printVersion(E){P(m,E)},get isSidebarCollapsed(){return r(ie)},set isSidebarCollapsed(E){P(ie,E)},$$events:{collapse:({detail:E})=>P(ie,E.collapsed),filter:({detail:E})=>P(q,E.performer),print:({detail:E})=>{P(m,E.printVersion),H()},importComplete:oe,csvImport:t},$$legacy:!0});var L=d(g,2),T=o(L);La(T,{get viewMode(){return r(Y)},set viewMode(E){P(Y,E)},get printVersion(){return r(m)},set printVersion(E){P(m,E)},get showPrintView(){return r(J)},set showPrintView(E){P(J,E)},$$events:{viewModeChange:E=>P(Y,E.detail.viewMode),printVersionChange:E=>P(m,E.detail.printVersion),showPrintViewChange:E=>P(J,E.detail.showPrintView)},$$legacy:!0});var O=d(T,2);{var G=E=>{var $=Qa();Le($,15,()=>r(p),Q=>Q.id,(Q,R,ve)=>{var te=Ga();let Se;var _e=o(te),we=o(_e),ce=o(we),ye=o(ce);i(ce);var ke=d(ce,2),je=o(ke,!0);i(ke);var tt=d(ke,2);{var Ae=ue=>{Lt(ue,{class:"warning-icon",size:16})};fe(tt,ue=>{W(r(R))&&ue(Ae)})}var De=d(tt,2),qe=o(De,!0);i(De);var rt=d(De,2),Ne=o(rt);let gt;var Vt=o(Ne);{var jt=ue=>{var Te=Va();V(ue,Te)},qt=ue=>{var Te=ja();V(ue,Te)};fe(Vt,ue=>{r(R).locked?ue(jt):ue(qt,!1)})}i(Ne);var Nt=d(Ne,2);i(rt),i(we);var mt=d(we,2),bt=o(mt),Ut=d(bt);{var Bt=ue=>{var Te=qa(),Je=o(Te);i(Te),he(()=>{var Ge;return re(Je,`(${(((Ge=r(R).character_performers)==null?void 0:Ge.length)||0)??""}/${r(R).chars??""} characters)`)}),V(ue,Te)};fe(Ut,ue=>{W(r(R))&&ue(Bt)})}i(mt),i(_e);var Ht=d(_e,2);{var Wt=ue=>{var Te=Ja(),Je=o(Te);{var Ge=Ue=>{var Be=Na(),lt=d(o(Be));i(Be),he(()=>re(lt,` ${r(R).description??""}`)),V(Ue,Be)};fe(Je,Ue=>{r(R).description&&Ue(Ge)})}var Kt=d(Je,2);{var Jt=Ue=>{var Be=Ka(),lt=o(Be);{var Gt=Ee=>{var $e=Ua(),He=d(o($e));i($e),he(()=>re(He,` ${r(R).techDetails.costume??""}`)),V(Ee,$e)};fe(lt,Ee=>{r(R).techDetails.costume&&Ee(Gt)})}var wt=d(lt,2);{var Qt=Ee=>{var $e=Ba(),He=d(o($e));i($e),he(()=>re(He,` ${r(R).techDetails.stage_dressing??""}`)),V(Ee,$e)};fe(wt,Ee=>{r(R).techDetails.stage_dressing&&Ee(Qt)})}var yt=d(wt,2);{var Zt=Ee=>{var $e=Ha(),He=d(o($e));i($e),he(()=>re(He,` ${r(R).techDetails.cues??""}`)),V(Ee,$e)};fe(yt,Ee=>{r(R).techDetails.cues&&Ee(Zt)})}var Xt=d(yt,2);{var Yt=Ee=>{var $e=Wa(),He=d(o($e));i($e),he(()=>re(He,` ${r(R).techDetails.props??""}`)),V(Ee,$e)};fe(Xt,Ee=>{r(R).techDetails.props&&Ee(Yt)})}i(Be),V(Ue,Be)};fe(Kt,Ue=>{r(R).techDetails&&Ue(Jt)})}i(Te),V(ue,Te)};fe(Ht,ue=>{r(F)===r(R).id&&ue(Wt)})}i(te),he((ue,Te,Je,Ge)=>{Se=xe(te,1,"list-item svelte-xaaopz",null,Se,ue),Oe(te,"draggable",!r(R).locked),re(ye,`${r(R).position+1}.`),Oe(ke,"aria-label",`View details for ${r(R).title}`),re(je,r(R).title),re(qe,Te),gt=xe(Ne,1,"action-button lock-button svelte-xaaopz",null,gt,Je),Oe(Ne,"aria-label",r(R).locked?"Unlock sketch":"Lock sketch"),Oe(Ne,"title",r(R).locked?"Unlock sketch":"Lock sketch"),re(bt,`${Ge??""} `)},[()=>{var ue;return{expanded:r(F)===r(R).id,locked:r(R).locked,dragging:((ue=r(K))==null?void 0:ue.id)===r(R).id,"drag-over":r(de)===r(ve)}},()=>j(r(R).duration),()=>({locked:r(R).locked}),()=>(r(R).character_performers||[]).map(ue=>ue.performer_name).join(", ")],Ie),ne("click",ke,()=>P(z,r(R))),ne("keydown",ke,ue=>ue.key==="Enter"&&P(z,r(R))),ne("click",Ne,nt(()=>c(r(R).id,!r(R).locked))),ne("click",Nt,nt(()=>w(r(R).id))),Et(te,()=>Dt,()=>({duration:se})),ne("dragstart",te,ue=>le(ue,r(R))),ne("dragover",te,ue=>me(ue,r(ve))),ne("dragleave",te,ge),ne("drop",te,ue=>U(ue,r(ve))),ne("dragend",te,B),V(Q,te)}),i($),V(E,$)},M=E=>{var $=Xa();Le($,15,()=>r(p),Q=>Q.id,(Q,R,ve)=>{var te=Za();let Se;var _e=o(te);const we=Ie(()=>W(r(R)));ra(_e,{get sketch(){return r(R)},get showCharacterWarning(){return r(we)},$$events:{update:oe,select:()=>P(z,r(R)),lock:ce=>e(ce),delete:ce=>C(ce)}}),i(te),he(ce=>{Se=xe(te,1,"sketch-list-item svelte-xaaopz",null,Se,ce),Oe(te,"draggable",!r(R).locked)},[()=>{var ce;return{locked:r(R).locked,dragging:((ce=r(K))==null?void 0:ce.id)===r(R).id,"drag-over":r(de)===r(ve)}}],Ie),Et(te,()=>Dt,()=>({duration:se})),ne("dragstart",te,ce=>le(ce,r(R))),ne("dragover",te,ce=>me(ce,r(ve))),ne("dragleave",te,ge),ne("drop",te,ce=>U(ce,r(ve))),ne("dragend",te,B),V(Q,te)}),i($),V(E,$)};fe(O,E=>{r(Y)==="list"?E(G):E(M,!1)})}var A=d(O,2);{var S=E=>{var $=Ya(),Q=o($),R=o(Q);ba(R,{get sketch(){return r(z)},$$events:{close:()=>P(z,null),update:N}}),i(Q),i($),ne("click",Q,nt(function(ve){Er.call(this,a,ve)})),ne("click",$,()=>P(z,null)),ne("keydown",$,ve=>ve.key==="Escape"&&P(z,null)),V(E,$)};fe(A,E=>{r(z)&&E(S)})}i(L),i(u),V(b,u)};fe(h,b=>{r(J)?b(X):b(pe,!1)})}V(n,y),Pe(),l()}export{us as component};
