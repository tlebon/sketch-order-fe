import{b as wt,e as Nt,c as Xe,a as q,f as Y,t as mt,d as _t}from"../chunks/Dp9hfF4v.js";import"../chunks/B32V0_Ly.js";import{c as We,o as Ot}from"../chunks/0YVxvMKV.js";import{t as ve,y as yt,I as xt,aa as kt,aK as Ut,z as St,ai as Ht,al as Bt,aj as Wt,N as Kt,a8 as dt,E as Gt,aL as Jt,aM as Qt,e as bt,u as Pt,aN as Zt,a5 as Yt,q as Xt,w as Ue,ae as Ct,af as Dt,ag as er,G as Tt,aO as tr,aP as rr,p as Re,f as Je,a as Me,R as we,c as n,s as c,r as i,m as e,D as j,aQ as Te,Y as Fe,aR as ut,d as ar,aS as It,aT as sr,F as ir}from"../chunks/BN8bhnsD.js";import{k as nr,w as or,l as lr,d as Rt,s as re,r as He,e as ie}from"../chunks/ZtTpgCh3.js";import{s as et,r as tt,p as pe,i as de,a as cr,b as dr}from"../chunks/D9rdsxVW.js";import{i as Be}from"../chunks/CCgLv8Cn.js";import{s as vr}from"../chunks/CVTqFCzU.js";import{c as ur,I as rt,r as Ke,b as Oe,e as Ye,i as lt,a as Ie,s as Ne}from"../chunks/D-s4lsVp.js";import{b as hr}from"../chunks/CDVvyIc6.js";import{s as at}from"../chunks/Br-INW2v.js";function fr(l,s,r=!1,o=!1,_=!1){var g=l,v="";ve(()=>{var w=kt;if(v===(v=s()??"")){yt&&xt();return}if(w.nodes_start!==null&&(Ut(w.nodes_start,w.nodes_end),w.nodes_start=w.nodes_end=null),v!==""){if(yt){St.data;for(var F=xt(),m=F;F!==null&&(F.nodeType!==8||F.data!=="");)m=F,F=Ht(F);if(F===null)throw Bt(),Wt;wt(St,m),g=Kt(F);return}var $=v+"";r?$=`<svg>${$}</svg>`:o&&($=`<math>${$}</math>`);var k=Nt($);if((r||o)&&(k=dt(k)),wt(dt(k),k.lastChild),r||o)for(;dt(k);)g.before(dt(k));else g.before(k)}})}const pr=()=>performance.now(),Ge={tick:l=>requestAnimationFrame(l),now:()=>pr(),tasks:new Set};function Mt(){const l=Ge.now();Ge.tasks.forEach(s=>{s.c(l)||(Ge.tasks.delete(s),s.f())}),Ge.tasks.size!==0&&Ge.tick(Mt)}function _r(l){let s;return Ge.tasks.size===0&&Ge.tick(Mt),{promise:new Promise(r=>{Ge.tasks.add(s={c:l,f:r})}),abort(){Ge.tasks.delete(s)}}}function vt(l,s){or(()=>{l.dispatchEvent(new CustomEvent(s))})}function gr(l){if(l==="float")return"cssFloat";if(l==="offset")return"cssOffset";if(l.startsWith("--"))return l;const s=l.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Et(l){const s={},r=l.split(";");for(const o of r){const[_,g]=o.split(":");if(!_||g===void 0)break;const v=gr(_.trim());s[v]=g.trim()}return s}const mr=l=>l;function jt(l,s,r){var o=ur,_,g,v,w=null;o.a??(o.a={element:l,measure(){_=this.element.getBoundingClientRect()},apply(){if(v==null||v.abort(),g=this.element.getBoundingClientRect(),_.left!==g.left||_.right!==g.right||_.top!==g.top||_.bottom!==g.bottom){const F=s()(this.element,{from:_,to:g},r==null?void 0:r());v=ft(this.element,F,void 0,1,()=>{v==null||v.abort(),v=void 0})}},fix(){if(!l.getAnimations().length){var{position:F,width:m,height:$}=getComputedStyle(l);if(F!=="absolute"&&F!=="fixed"){var k=l.style;w={position:k.position,width:k.width,height:k.height,transform:k.transform},k.position="absolute",k.width=m,k.height=$;var h=l.getBoundingClientRect();if(_.left!==h.left||_.top!==h.top){var H=`translate(${_.left-h.left}px, ${_.top-h.top}px)`;k.transform=k.transform?`${k.transform} ${H}`:H}}}},unfix(){if(w){var F=l.style;F.position=w.position,F.width=w.width,F.height=w.height,F.transform=w.transform}}}),o.a.element=l}function zt(l,s,r,o){var _=(l&Zt)!==0,g="both",v,w=s.inert,F=s.style.overflow,m,$;function k(){var B=er,x=kt;Ct(null),Dt(null);try{return v??(v=r()(s,(o==null?void 0:o())??{},{direction:g}))}finally{Ct(B),Dt(x)}}var h={is_global:_,in(){s.inert=w,vt(s,"introstart"),m=ft(s,k(),$,1,()=>{vt(s,"introend"),m==null||m.abort(),m=v=void 0,s.style.overflow=F})},out(B){s.inert=!0,vt(s,"outrostart"),$=ft(s,k(),m,0,()=>{vt(s,"outroend"),B==null||B()})},stop:()=>{m==null||m.abort(),$==null||$.abort()}},H=kt;if((H.transitions??(H.transitions=[])).push(h),nr){var J=_;if(!J){for(var U=H.parent;U&&(U.f&Gt)!==0;)for(;(U=U.parent)&&(U.f&Jt)===0;);J=!U||(U.f&Qt)!==0}J&&bt(()=>{Pt(()=>h.in())})}}function ft(l,s,r,o,_){var g=o===1;if(Yt(s)){var v,w=!1;return Xt(()=>{if(!w){var B=s({direction:g?"in":"out"});v=ft(l,B,r,o,_)}}),{abort:()=>{w=!0,v==null||v.abort()},deactivate:()=>v.deactivate(),reset:()=>v.reset(),t:()=>v.t()}}if(r==null||r.deactivate(),!(s!=null&&s.duration))return _(),{abort:Ue,deactivate:Ue,reset:Ue,t:()=>o};const{delay:F=0,css:m,tick:$,easing:k=mr}=s;var h=[];if(g&&r===void 0&&($&&$(0,1),m)){var H=Et(m(0,1));h.push(H,H)}var J=()=>1-o,U=l.animate(h,{duration:F});return U.onfinish=()=>{var B=(r==null?void 0:r.t())??1-o;r==null||r.abort();var x=o-B,I=s.duration*Math.abs(x),b=[];if(I>0){var y=!1;if(m)for(var W=Math.ceil(I/16.666666666666668),z=0;z<=W;z+=1){var M=B+x*k(z/W),t=Et(m(M,1-M));b.push(t),y||(y=t.overflow==="hidden")}y&&(l.style.overflow="hidden"),J=()=>{var a=U.currentTime;return B+x*k(a/I)},$&&_r(()=>{if(U.playState!=="running")return!1;var a=J();return $(a,1-a),!0})}U=l.animate(b,{duration:I,fill:"forwards"}),U.onfinish=()=>{J=()=>o,$==null||$(o,1-o),_()}},{abort:()=>{U&&(U.cancel(),U.effect=null,U.onfinish=Ue)},deactivate:()=>{_=Ue},reset:()=>{o===0&&($==null||$(1,0))},t:()=>J()}}function pt(l,s,r){if(l.multiple)return s==null?void 0:Tt(s)?br(l,s):tr();for(var o of l.options){var _=ot(o);if(rr(_,s)){o.selected=!0;return}}(!r||s!==void 0)&&(l.selectedIndex=-1)}function Lt(l,s){let r=!0;bt(()=>{s&&pt(l,Pt(s),r),r=!1;var o=new MutationObserver(()=>{var _=l.__value;pt(l,_)});return o.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{o.disconnect()}})}function kr(l,s,r=s){var o=!0;lr(l,"change",_=>{var g=_?"[selected]":":checked",v;if(l.multiple)v=[].map.call(l.querySelectorAll(g),ot);else{var w=l.querySelector(g)??l.querySelector("option:not([disabled])");v=w&&ot(w)}r(v)}),bt(()=>{var _=s();if(pt(l,_,o),o&&_===void 0){var g=l.querySelector(":checked");g!==null&&(_=ot(g),r(_))}l.__value=_,o=!1}),Lt(l)}function br(l,s){for(var r of l.options)r.selected=s.includes(ot(r))}function ot(l){return"__value"in l?l.__value:l.value}function ct(l){return function(...s){var r=s[0];return r.stopPropagation(),l==null?void 0:l.apply(this,s)}}function wr(l,s){var g;var r=(g=l.$$events)==null?void 0:g[s.type],o=Tt(r)?r.slice():r==null?[]:[r];for(var _ of o)_.call(this,s)}function yr(l,s){Re(s,!0);let r=tt(s,["$$slots","$$events","$$legacy"]);rt(l,et({name:"funnel"},()=>r,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:(_,g)=>{var v=Xe(),w=Je(v);at(w,()=>s.children??Ue),q(_,v)},$$slots:{default:!0}})),Me()}function xr(l,s){Re(s,!0);let r=tt(s,["$$slots","$$events","$$legacy"]);rt(l,et({name:"layout-grid"},()=>r,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(_,g)=>{var v=Xe(),w=Je(v);at(w,()=>s.children??Ue),q(_,v)},$$slots:{default:!0}})),Me()}function Sr(l,s){Re(s,!0);let r=tt(s,["$$slots","$$events","$$legacy"]);rt(l,et({name:"list"},()=>r,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(_,g)=>{var v=Xe(),w=Je(v);at(w,()=>s.children??Ue),q(_,v)},$$slots:{default:!0}})),Me()}function qt(l,s){Re(s,!0);let r=tt(s,["$$slots","$$events","$$legacy"]);rt(l,et({name:"printer"},()=>r,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(_,g)=>{var v=Xe(),w=Je(v);at(w,()=>s.children??Ue),q(_,v)},$$slots:{default:!0}})),Me()}function Ft(l,s){Re(s,!0);let r=tt(s,["$$slots","$$events","$$legacy"]);rt(l,et({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(_,g)=>{var v=Xe(),w=Je(v);at(w,()=>s.children??Ue),q(_,v)},$$slots:{default:!0}})),Me()}function Cr(l,s){Re(s,!0);let r=tt(s,["$$slots","$$events","$$legacy"]);rt(l,et({name:"upload"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(_,g)=>{var v=Xe(),w=Je(v);at(w,()=>s.children??Ue),q(_,v)},$$slots:{default:!0}})),Me()}function Dr(l,s){Re(s,!0);let r=tt(s,["$$slots","$$events","$$legacy"]);rt(l,et({name:"wand-sparkles"},()=>r,{iconNode:[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]],children:(_,g)=>{var v=Xe(),w=Je(v);at(w,()=>s.children??Ue),q(_,v)},$$slots:{default:!0}})),Me()}const Er=()=>{const l=vr;return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},updated:l.updated}},$r={subscribe(l){return Er().page.subscribe(l)}};function Or(l,s){j(s,!0)}function Pr(l,s,r,o,_,g,v,w,F){var m,$,k,h,H,J,U;j(s,!1),j(r,o().title),j(_,o().description),j(g,o().duration),j(v,o().chars),j(w,[...o().character_performers||[]]),j(F,{cues:((m=o().techDetails)==null?void 0:m.cues)||"",props:(($=o().techDetails)==null?void 0:$.props)||"",costume:((k=o().techDetails)==null?void 0:k.costume)||"",stage_dressing:((h=o().techDetails)==null?void 0:h.stage_dressing)||"",chairs:((H=o().techDetails)==null?void 0:H.chairs)||0,stools:((J=o().techDetails)==null?void 0:J.stools)||0,other_props:((U=o().techDetails)==null?void 0:U.other_props)||""})}function Tr(l,s,r,o,_,g,v,w,F,m){var k,h;const $={...s(),title:e(r),description:e(o),duration:e(_),chars:e(g),casted:e(v).length,character_performers:e(v),techDetails:{id:((k=s().techDetails)==null?void 0:k.id)||crypto.randomUUID(),sketch_id:s().id,...e(w),created_at:((h=s().techDetails)==null?void 0:h.created_at)||new Date().toISOString(),updated_at:new Date().toISOString()}};F("update",{sketch:$}),j(m,!1)}var Ir=l=>l.stopPropagation(),Rr=(l,s)=>l.key==="Enter"&&s(),Mr=(l,s,r)=>s(e(r).id),jr=Y('<li class="svelte-kenoik"><span class="character svelte-kenoik"> </span> <span class="performer svelte-kenoik"> </span> <button type="button" class="remove-button svelte-kenoik">Ã—</button></li>'),zr=Y('<div class="character-list svelte-kenoik"><h4>Current Assignments</h4> <ul class="svelte-kenoik"></ul></div>'),Lr=Y('<div class="edit-form svelte-kenoik"><div class="form-group svelte-kenoik"><label for="title" class="svelte-kenoik">Title</label> <input type="text" id="title" required class="svelte-kenoik"/></div> <div class="form-group svelte-kenoik"><label for="description" class="svelte-kenoik">Description</label> <textarea id="description" class="svelte-kenoik"></textarea></div> <div class="form-group svelte-kenoik"><label for="duration" class="svelte-kenoik">Duration (minutes)</label> <input type="number" id="duration" min="1" required class="svelte-kenoik"/></div> <div class="form-group svelte-kenoik"><label for="chars" class="svelte-kenoik">Number of Characters</label> <input type="number" id="chars" min="1" required class="svelte-kenoik"/></div> <div class="form-group svelte-kenoik"><label class="svelte-kenoik">Character Assignments</label> <div class="character-inputs svelte-kenoik"><input type="text" placeholder="Character name" class="svelte-kenoik"/> <input type="text" placeholder="Performer name" class="svelte-kenoik"/> <button type="button" class="svelte-kenoik">Add</button></div></div> <!> <div class="form-group svelte-kenoik"><label class="svelte-kenoik">Tech Details</label> <div class="tech-grid svelte-kenoik"><div class="tech-item svelte-kenoik"><label for="cues" class="svelte-kenoik">Cues</label> <textarea id="cues" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="props" class="svelte-kenoik">Props</label> <textarea id="props" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="costume" class="svelte-kenoik">Costume</label> <textarea id="costume" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="stage_dressing" class="svelte-kenoik">Stage Dressing</label> <textarea id="stage_dressing" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="chairs" class="svelte-kenoik">Chairs</label> <input type="number" id="chairs" min="0" class="svelte-kenoik"/></div> <div class="tech-item svelte-kenoik"><label for="stools" class="svelte-kenoik">Stools</label> <input type="number" id="stools" min="0" class="svelte-kenoik"/></div> <div class="tech-item svelte-kenoik"><label for="other_props" class="svelte-kenoik">Other Props</label> <textarea id="other_props" class="svelte-kenoik"></textarea></div></div></div> <div class="form-actions svelte-kenoik"><button type="button" class="svelte-kenoik">Cancel</button> <button type="button" class="svelte-kenoik">Save</button></div></div>'),qr=Y('<p class="description svelte-kenoik"> </p>'),Fr=Y('<div class="cast-item svelte-kenoik"><span class="character-name svelte-kenoik"> </span> <span class="performer-name svelte-kenoik"> </span></div>'),Ar=Y('<div class="cast-section svelte-kenoik"><h4 class="section-title svelte-kenoik">Cast</h4> <div class="cast-grid svelte-kenoik"></div></div>'),Vr=Y('<div class="tech-grid svelte-kenoik"><div class="tech-item svelte-kenoik"><label for="cues">Cues</label> <textarea id="cues"></textarea></div> <div class="tech-item svelte-kenoik"><label for="props">Props</label> <textarea id="props"></textarea></div> <div class="tech-item svelte-kenoik"><label for="costume">Costume</label> <textarea id="costume"></textarea></div> <div class="tech-item svelte-kenoik"><label for="stage_dressing">Stage Dressing</label> <textarea id="stage_dressing"></textarea></div> <div class="tech-item svelte-kenoik"><label for="chairs">Chairs</label> <input type="number" id="chairs" min="0"/></div> <div class="tech-item svelte-kenoik"><label for="stools">Stools</label> <input type="number" id="stools" min="0"/></div> <div class="tech-item svelte-kenoik"><label for="other_props">Other Props</label> <textarea id="other_props"></textarea></div></div>'),Nr=Y('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Cues</span> <span class="tech-value svelte-kenoik"> </span></div>'),Ur=Y('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Props</span> <span class="tech-value svelte-kenoik"> </span></div>'),Hr=Y('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Costume</span> <span class="tech-value svelte-kenoik"> </span></div>'),Br=Y('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Stage Dressing</span> <span class="tech-value svelte-kenoik"> </span></div>'),Wr=Y('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Furniture</span> <span class="tech-value svelte-kenoik"> </span></div>'),Kr=Y('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Other Props</span> <span class="tech-value svelte-kenoik"> </span></div>'),Gr=Y('<div class="tech-grid svelte-kenoik"><!> <!> <!> <!> <!> <!></div>'),Jr=Y('<p class="no-tech-details svelte-kenoik">No tech details available for this sketch.</p>'),Qr=Y('<div class="view-mode svelte-kenoik"><div class="header svelte-kenoik"><h2 class="svelte-kenoik"> </h2> <button type="button" class="edit-button svelte-kenoik">Edit</button></div> <!> <div class="stats-container svelte-kenoik"><div class="stat-item svelte-kenoik"><span class="stat-label svelte-kenoik">Duration</span> <span class="stat-value svelte-kenoik"> </span></div> <div class="stat-item svelte-kenoik"><span class="stat-label svelte-kenoik">Characters</span> <span class="stat-value svelte-kenoik"> </span></div> <div class="stat-item svelte-kenoik"><span class="stat-label svelte-kenoik">Casted</span> <span class="stat-value svelte-kenoik"> </span></div></div> <!> <div class="tech-section svelte-kenoik"><h4 class="section-title svelte-kenoik">Tech Details</h4> <!></div></div>'),Zr=Y('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-start mb-4"><div class="flex items-center gap-4"><button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Back to show"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <h2 class="text-2xl font-bold text-gray-900"> </h2></div> <button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close details"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div></div></div>');function Yr(l,s){var Q,ue,ke,me,ee,te,A;Re(s,!1);let r=pe(s,"sketch",8);const o=We();let _=we(!1),g=we(r().title),v=we(r().description),w=we(r().duration),F=we(r().chars),m=we(""),$=we(""),k=we([...r().character_performers||[]]),h=we({cues:((Q=r().techDetails)==null?void 0:Q.cues)||"",props:((ue=r().techDetails)==null?void 0:ue.props)||"",costume:((ke=r().techDetails)==null?void 0:ke.costume)||"",stage_dressing:((me=r().techDetails)==null?void 0:me.stage_dressing)||"",chairs:((ee=r().techDetails)==null?void 0:ee.chairs)||0,stools:((te=r().techDetails)==null?void 0:te.stools)||0,other_props:((A=r().techDetails)==null?void 0:A.other_props)||""});function H(){!e(m)||!e($)||(j(k,[...e(k),{id:crypto.randomUUID(),sketch_id:r().id,character_name:e(m),performer_name:e($),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),j(m,""),j($,""))}function J(ae){j(k,e(k).filter(G=>G.id!==ae))}function U(ae){ae.stopPropagation(),o("close")}function B(ae){ae.key==="Escape"&&U(ae)}Ot(()=>(document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B))),Be();var x=Zr();x.__click=U;var I=n(x);I.__click=[Ir];var b=n(I),y=n(b),W=n(y),z=n(W);z.__click=U;var M=c(z,2),t=n(M,!0);i(M),i(W);var a=c(W,2);a.__click=U,i(y);var u=c(y,2);{var C=ae=>{var G=Lr(),Z=n(G),P=c(n(Z),2);Ke(P),i(Z);var E=c(Z,2),X=c(n(E),2);He(X),i(E);var se=c(E,2),le=c(n(se),2);Ke(le),i(se);var f=c(se,2),p=c(n(f),2);Ke(p),i(f);var S=c(f,2),d=c(n(S),2),L=n(d);Ke(L);var V=c(L,2);Ke(V),V.__keydown=[Rr,H];var N=c(V,2);N.__click=H,i(d),i(S);var K=c(S,2);{var R=fe=>{var Qe=zr(),Ze=c(n(Qe),2);Ye(Ze,5,()=>e(k),lt,(it,Pe)=>{var nt=jr(),ye=n(nt),xe=n(ye,!0);i(ye);var Ee=c(ye,2),Ae=n(Ee,!0);i(Ee);var gt=c(Ee,2);gt.__click=[Mr,J,Pe],i(nt),ve(()=>{re(xe,e(Pe).character_name),re(Ae,e(Pe).performer_name)}),q(it,nt)}),i(Ze),i(Qe),q(fe,Qe)};de(K,fe=>{e(k).length>0&&fe(R)})}var ne=c(K,2),D=c(n(ne),2),O=n(D),De=c(n(O),2);He(De),i(O);var $e=c(O,2),Se=c(n($e),2);He(Se),i($e);var qe=c($e,2),he=c(n(qe),2);He(he),i(qe);var ge=c(qe,2),_e=c(n(ge),2);He(_e),i(ge);var ce=c(ge,2),oe=c(n(ce),2);Ke(oe),i(ce);var be=c(ce,2),je=c(n(be),2);Ke(je),i(be);var ze=c(be,2),Ce=c(n(ze),2);He(Ce),i(ze),i(D),i(ne);var Le=c(ne,2),Ve=n(Le);Ve.__click=[Pr,_,g,r,v,w,F,k,h];var st=c(Ve,2);st.__click=[Tr,r,g,v,w,F,k,h,o,_],i(Le),i(G),Oe(P,()=>e(g),fe=>j(g,fe)),Oe(X,()=>e(v),fe=>j(v,fe)),Oe(le,()=>e(w),fe=>j(w,fe)),Oe(p,()=>e(F),fe=>j(F,fe)),Oe(L,()=>e(m),fe=>j(m,fe)),Oe(V,()=>e($),fe=>j($,fe)),Oe(De,()=>e(h).cues,fe=>Te(h,e(h).cues=fe)),Oe(Se,()=>e(h).props,fe=>Te(h,e(h).props=fe)),Oe(he,()=>e(h).costume,fe=>Te(h,e(h).costume=fe)),Oe(_e,()=>e(h).stage_dressing,fe=>Te(h,e(h).stage_dressing=fe)),Oe(oe,()=>e(h).chairs,fe=>Te(h,e(h).chairs=fe)),Oe(je,()=>e(h).stools,fe=>Te(h,e(h).stools=fe)),Oe(Ce,()=>e(h).other_props,fe=>Te(h,e(h).other_props=fe)),q(ae,G)},T=ae=>{var G=Qr(),Z=n(G),P=n(Z),E=n(P,!0);i(P);var X=c(P,2);X.__click=[Or,_],i(Z);var se=c(Z,2);{var le=he=>{var ge=qr(),_e=n(ge,!0);i(ge),ve(()=>re(_e,r().description)),q(he,ge)};de(se,he=>{r().description&&he(le)})}var f=c(se,2),p=n(f),S=c(n(p),2),d=n(S);i(S),i(p);var L=c(p,2),V=c(n(L),2),N=n(V,!0);i(V),i(L);var K=c(L,2),R=c(n(K),2),ne=n(R,!0);i(R),i(K),i(f);var D=c(f,2);{var O=he=>{var ge=Ar(),_e=c(n(ge),2);Ye(_e,5,()=>r().character_performers,lt,(ce,oe)=>{var be=Fr(),je=n(be),ze=n(je,!0);i(je);var Ce=c(je,2),Le=n(Ce,!0);i(Ce),i(be),ve(()=>{re(ze,e(oe).character_name),re(Le,e(oe).performer_name)}),q(ce,be)}),i(_e),i(ge),q(he,ge)};de(D,he=>{var ge;(ge=r().character_performers)!=null&&ge.length&&he(O)})}var De=c(D,2),$e=c(n(De),2);{var Se=he=>{var ge=Vr(),_e=n(ge),ce=c(n(_e),2);He(ce),i(_e);var oe=c(_e,2),be=c(n(oe),2);He(be),i(oe);var je=c(oe,2),ze=c(n(je),2);He(ze),i(je);var Ce=c(je,2),Le=c(n(Ce),2);He(Le),i(Ce);var Ve=c(Ce,2),st=c(n(Ve),2);Ke(st),i(Ve);var fe=c(Ve,2),Qe=c(n(fe),2);Ke(Qe),i(fe);var Ze=c(fe,2),it=c(n(Ze),2);He(it),i(Ze),i(ge),Oe(ce,()=>e(h).cues,Pe=>Te(h,e(h).cues=Pe)),Oe(be,()=>e(h).props,Pe=>Te(h,e(h).props=Pe)),Oe(ze,()=>e(h).costume,Pe=>Te(h,e(h).costume=Pe)),Oe(Le,()=>e(h).stage_dressing,Pe=>Te(h,e(h).stage_dressing=Pe)),Oe(st,()=>e(h).chairs,Pe=>Te(h,e(h).chairs=Pe)),Oe(Qe,()=>e(h).stools,Pe=>Te(h,e(h).stools=Pe)),Oe(it,()=>e(h).other_props,Pe=>Te(h,e(h).other_props=Pe)),q(he,ge)},qe=(he,ge)=>{{var _e=oe=>{var be=Gr(),je=n(be);{var ze=ye=>{var xe=Nr(),Ee=c(n(xe),2),Ae=n(Ee,!0);i(Ee),i(xe),ve(()=>re(Ae,r().techDetails.cues)),q(ye,xe)};de(je,ye=>{r().techDetails.cues&&ye(ze)})}var Ce=c(je,2);{var Le=ye=>{var xe=Ur(),Ee=c(n(xe),2),Ae=n(Ee,!0);i(Ee),i(xe),ve(()=>re(Ae,r().techDetails.props)),q(ye,xe)};de(Ce,ye=>{r().techDetails.props&&ye(Le)})}var Ve=c(Ce,2);{var st=ye=>{var xe=Hr(),Ee=c(n(xe),2),Ae=n(Ee,!0);i(Ee),i(xe),ve(()=>re(Ae,r().techDetails.costume)),q(ye,xe)};de(Ve,ye=>{r().techDetails.costume&&ye(st)})}var fe=c(Ve,2);{var Qe=ye=>{var xe=Br(),Ee=c(n(xe),2),Ae=n(Ee,!0);i(Ee),i(xe),ve(()=>re(Ae,r().techDetails.stage_dressing)),q(ye,xe)};de(fe,ye=>{r().techDetails.stage_dressing&&ye(Qe)})}var Ze=c(fe,2);{var it=ye=>{var xe=Wr(),Ee=c(n(xe),2),Ae=n(Ee,!0);i(Ee),i(xe),ve(gt=>re(Ae,gt),[()=>[r().techDetails.chairs>0?`${r().techDetails.chairs} chair${r().techDetails.chairs!==1?"s":""}`:null,r().techDetails.stools>0?`${r().techDetails.stools} stool${r().techDetails.stools!==1?"s":""}`:null].filter(Boolean).join(", ")],Fe),q(ye,xe)};de(Ze,ye=>{(r().techDetails.chairs>0||r().techDetails.stools>0)&&ye(it)})}var Pe=c(Ze,2);{var nt=ye=>{var xe=Kr(),Ee=c(n(xe),2),Ae=n(Ee,!0);i(Ee),i(xe),ve(()=>re(Ae,r().techDetails.other_props)),q(ye,xe)};de(Pe,ye=>{r().techDetails.other_props&&ye(nt)})}i(be),q(oe,be)},ce=oe=>{var be=Jr();q(oe,be)};de(he,oe=>{r().techDetails?oe(_e):oe(ce,!1)},ge)}};de($e,he=>{e(_)?he(Se):he(qe,!1)})}i(De),i(G),ve(()=>{re(E,r().title),re(d,`${r().duration??""} min`),re(N,r().chars),re(ne,r().casted)}),q(ae,G)};de(u,ae=>{e(_)?ae(C):ae(T,!1)})}i(b),i(I),i(x),ve(()=>re(t,r().title)),q(l,x),Me()}Rt(["click","keydown"]);var Xr=Y('<div class="detail svelte-u5cezq"><strong>Costume:</strong> </div>'),ea=Y('<span class="differential svelte-u5cezq"> </span>'),ta=Y('<div class="detail svelte-u5cezq"><strong>Stage:</strong> <!></div>'),ra=Y('<div class="detail svelte-u5cezq"><strong>Stage:</strong> <span class="differential svelte-u5cezq"> </span></div>'),aa=Y('<div class="detail svelte-u5cezq"><strong>Cues:</strong> </div>'),sa=Y('<div class="detail svelte-u5cezq"><strong>Props:</strong> </div>'),ia=Y('<div class="tech-details svelte-u5cezq"><!> <!></div>'),na=Y('<div class="sketch svelte-u5cezq"><div class="sketch-header svelte-u5cezq"><span class="position svelte-u5cezq"> </span> <span class="title svelte-u5cezq"> </span> <span class="duration svelte-u5cezq"> </span></div> <div class="performers svelte-u5cezq"><!></div> <div class="tech-details svelte-u5cezq"><!> <!></div> <!></div>'),oa=Y('<div class="print-container svelte-u5cezq"><div class="header svelte-u5cezq"><h1 class="svelte-u5cezq"> </h1> <div class="version-info svelte-u5cezq"><!></div></div> <div class="sketches svelte-u5cezq"></div></div>');function la(l,s){Re(s,!1);const r=we();let o=pe(s,"sketches",8),_=pe(s,"showTitle",8),g=pe(s,"version",8);function v(I){const b=Math.floor(I/60),y=I%60;return b>0?`${b}h ${y}m`:`${y}m`}function w(I){return(I.character_performers||[]).map(b=>g()==="greenroom"?`<strong>${b.performer_name.toUpperCase()}</strong>`:b.performer_name).join(", ")}function F(I,b){var a,u,C,T;const y={chairs:((a=I.techDetails)==null?void 0:a.chairs)??0,stools:((u=I.techDetails)==null?void 0:u.stools)??0},W=b?{chairs:((C=b.techDetails)==null?void 0:C.chairs)??0,stools:((T=b.techDetails)==null?void 0:T.stools)??0}:{chairs:0,stools:0},z=y.chairs-W.chairs,M=y.stools-W.stools,t=[];return z!==0&&t.push(`${z>0?"+":""}${z} chair${Math.abs(z)!==1?"s":""}`),M!==0&&t.push(`${M>0?"+":""}${M} stool${Math.abs(M)!==1?"s":""}`),t.length>0?`(${t.join(", ")})`:""}ut(()=>ar(o()),()=>{j(r,[...o()].sort((I,b)=>I.position-b.position))}),It(),Be();var m=oa(),$=n(m),k=n($),h=n(k,!0);i(k);var H=c(k,2),J=n(H);{var U=I=>{var b=mt("Green Room Version");q(I,b)},B=(I,b)=>{{var y=z=>{var M=mt("Hallway Version");q(z,M)},W=z=>{var M=mt("Tech Booth Version");q(z,M)};de(I,z=>{g()==="hallway"?z(y):z(W,!1)},b)}};de(J,I=>{g()==="greenroom"?I(U):I(B,!1)})}i(H),i($);var x=c($,2);Ye(x,5,()=>e(r),lt,(I,b,y)=>{var W=na(),z=n(W),M=n(z),t=n(M);i(M);var a=c(M,2),u=n(a,!0);i(a);var C=c(a,2),T=n(C,!0);i(C),i(z);var Q=c(z,2),ue=n(Q);fr(ue,()=>w(e(b))),i(Q);var ke=c(Q,2),me=n(ke);{var ee=P=>{var E=Xr(),X=c(n(E));i(E),ve(()=>re(X,` ${e(b).techDetails.costume??""}`)),q(P,E)};de(me,P=>{var E;(g()==="greenroom"||g()==="hallway")&&((E=e(b).techDetails)!=null&&E.costume)&&P(ee)})}var te=c(me,2);{var A=P=>{var E=ta(),X=c(n(E)),se=c(X);{var le=f=>{var p=ea(),S=n(p,!0);i(p),ve(d=>re(S,d),[()=>F(e(b),e(r)[y-1])],Fe),q(f,p)};de(se,f=>{g()==="hallway"&&f(le)})}i(E),ve(()=>re(X,` ${e(b).techDetails.stage_dressing??""} `)),q(P,E)},ae=(P,E)=>{{var X=se=>{var le=ra(),f=c(n(le),2),p=n(f,!0);i(f),i(le),ve(S=>re(p,S),[()=>F(e(b),e(r)[y-1])],Fe),q(se,le)};de(P,se=>{g()==="hallway"&&se(X)},E)}};de(te,P=>{var E;(g()==="hallway"||g()==="techbooth")&&((E=e(b).techDetails)!=null&&E.stage_dressing)?P(A):P(ae,!1)})}i(ke);var G=c(ke,2);{var Z=P=>{var E=ia(),X=n(E);{var se=p=>{var S=aa(),d=c(n(S));i(S),ve(()=>re(d,` ${e(b).techDetails.cues??""}`)),q(p,S)};de(X,p=>{var S;(S=e(b).techDetails)!=null&&S.cues&&p(se)})}var le=c(X,2);{var f=p=>{var S=sa(),d=c(n(S));i(S),ve(()=>re(d,` ${e(b).techDetails.props??""}`)),q(p,S)};de(le,p=>{var S;(S=e(b).techDetails)!=null&&S.props&&p(f)})}i(E),q(P,E)};de(G,P=>{g()==="techbooth"&&P(Z)})}i(W),ve(P=>{re(t,`${e(b).position+1}.`),re(u,e(b).title),re(T,P)},[()=>v(e(b).duration)],Fe),q(I,W)}),i(x),i(m),ve(()=>re(h,_())),q(l,m),Me()}var ca=Y("<option> </option>"),da=Y('<div class="performer-filter svelte-9vn570"><label for="performer-select" class="svelte-9vn570">Filter by Performer</label> <select id="performer-select" class="svelte-9vn570"><option>All Performers</option><!></select></div>');function At(l,s){Re(s,!1);let r=pe(s,"performers",24,()=>[]),o=pe(s,"selectedPerformer",12,null);const _=We();function g(k){const h=k.target,H=h.value===""?null:h.value;o(H),_("select",{performer:H})}Be();var v=da(),w=c(n(v),2);Lt(w,()=>o()||"");var F,m=n(w);m.value=m.__value="";var $=c(m);Ye($,1,r,lt,(k,h)=>{var H=ca(),J={},U=n(H,!0);i(H),ve(()=>{J!==(J=e(h))&&(H.value=(H.__value=e(h))??""),re(U,e(h))}),q(k,H)}),i(w),i(v),ve(()=>{F!==(F=o()||"")&&(w.value=(w.__value=o()||"")??"",pt(w,o()||""))}),ie("change",w,g),q(l,v),Me()}function va(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var ht={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var ua=ht.exports,$t;function ha(){return $t||($t=1,function(l,s){((r,o)=>{l.exports=o()})(ua,function r(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},_,g=!o.document&&!!o.postMessage,v=o.IS_PAPA_WORKER||!1,w={},F=0,m={};function $(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(a){var u=W(a);u.chunkSize=parseInt(u.chunkSize),a.step||a.chunk||(u.chunkSize=null),this._handle=new U(u),(this._handle.streamer=this)._config=u}).call(this,t),this.parseChunk=function(a,u){var C=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<C){let Q=this._config.newline;Q||(T=this._config.quoteChar||'"',Q=this._handle.guessLineEndings(a,T)),a=[...a.split(Q).slice(C)].join(Q)}this.isFirstChunk&&M(this._config.beforeFirstChunk)&&(T=this._config.beforeFirstChunk(a))!==void 0&&(a=T),this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+a,T=(this._partialLine="",this._handle.parse(C,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(a=T.meta.cursor,C=(this._finished||(this._partialLine=C.substring(a-this._baseIndex),this._baseIndex=a),T&&T.data&&(this._rowCount+=T.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),v)o.postMessage({results:T,workerId:m.WORKER_ID,finished:C});else if(M(this._config.chunk)&&!u){if(this._config.chunk(T,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=T=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(T.data),this._completeResults.errors=this._completeResults.errors.concat(T.errors),this._completeResults.meta=T.meta),this._completed||!C||!M(this._config.complete)||T&&T.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),C||T&&T.meta.paused||this._nextChunk(),T}this._halted=!0},this._sendError=function(a){M(this._config.error)?this._config.error(a):v&&this._config.error&&o.postMessage({workerId:m.WORKER_ID,error:a,finished:!1})}}function k(t){var a;(t=t||{}).chunkSize||(t.chunkSize=m.RemoteChunkSize),$.call(this,t),this._nextChunk=g?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),g||(a.onload=z(this._chunkLoaded,this),a.onerror=z(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!g),this._config.downloadRequestHeaders){var u,C=this._config.downloadRequestHeaders;for(u in C)a.setRequestHeader(u,C[u])}var T;this._config.chunkSize&&(T=this._start+this._config.chunkSize-1,a.setRequestHeader("Range","bytes="+this._start+"-"+T));try{a.send(this._config.downloadRequestBody)}catch(Q){this._chunkError(Q.message)}g&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize||a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(u=>(u=u.getResponseHeader("Content-Range"))!==null?parseInt(u.substring(u.lastIndexOf("/")+1)):-1)(a),this.parseChunk(a.responseText)))},this._chunkError=function(u){u=a.statusText||u,this._sendError(new Error(u))}}function h(t){(t=t||{}).chunkSize||(t.chunkSize=m.LocalChunkSize),$.call(this,t);var a,u,C=typeof FileReader<"u";this.stream=function(T){this._input=T,u=T.slice||T.webkitSlice||T.mozSlice,C?((a=new FileReader).onload=z(this._chunkLoaded,this),a.onerror=z(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input,Q=(this._config.chunkSize&&(Q=Math.min(this._start+this._config.chunkSize,this._input.size),T=u.call(T,this._start,Q)),a.readAsText(T,this._config.encoding));C||this._chunkLoaded({target:{result:Q}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(a.error)}}function H(t){var a;$.call(this,t=t||{}),this.stream=function(u){return a=u,this._nextChunk()},this._nextChunk=function(){var u,C;if(!this._finished)return u=this._config.chunkSize,a=u?(C=a.substring(0,u),a.substring(u)):(C=a,""),this._finished=!a,this.parseChunk(C)}}function J(t){$.call(this,t=t||{});var a=[],u=!0,C=!1;this.pause=function(){$.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){$.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):u=!0},this._streamData=z(function(T){try{a.push(typeof T=="string"?T:T.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(Q){this._streamError(Q)}},this),this._streamError=z(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=z(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function U(t){var a,u,C,T,Q=Math.pow(2,53),ue=-Q,ke=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,me=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ee=this,te=0,A=0,ae=!1,G=!1,Z=[],P={data:[],errors:[],meta:{}};function E(f){return t.skipEmptyLines==="greedy"?f.join("").trim()==="":f.length===1&&f[0].length===0}function X(){if(P&&C&&(le("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),C=!1),t.skipEmptyLines&&(P.data=P.data.filter(function(d){return!E(d)})),se()){let d=function(L,V){M(t.transformHeader)&&(L=t.transformHeader(L,V)),Z.push(L)};if(P)if(Array.isArray(P.data[0])){for(var f=0;se()&&f<P.data.length;f++)P.data[f].forEach(d);P.data.splice(0,1)}else P.data.forEach(d)}function p(d,L){for(var V=t.header?{}:[],N=0;N<d.length;N++){var K=N,R=d[N],R=((ne,D)=>(O=>(t.dynamicTypingFunction&&t.dynamicTyping[O]===void 0&&(t.dynamicTyping[O]=t.dynamicTypingFunction(O)),(t.dynamicTyping[O]||t.dynamicTyping)===!0))(ne)?D==="true"||D==="TRUE"||D!=="false"&&D!=="FALSE"&&((O=>{if(ke.test(O)&&(O=parseFloat(O),ue<O&&O<Q))return 1})(D)?parseFloat(D):me.test(D)?new Date(D):D===""?null:D):D)(K=t.header?N>=Z.length?"__parsed_extra":Z[N]:K,R=t.transform?t.transform(R,K):R);K==="__parsed_extra"?(V[K]=V[K]||[],V[K].push(R)):V[K]=R}return t.header&&(N>Z.length?le("FieldMismatch","TooManyFields","Too many fields: expected "+Z.length+" fields but parsed "+N,A+L):N<Z.length&&le("FieldMismatch","TooFewFields","Too few fields: expected "+Z.length+" fields but parsed "+N,A+L)),V}var S;P&&(t.header||t.dynamicTyping||t.transform)&&(S=1,!P.data.length||Array.isArray(P.data[0])?(P.data=P.data.map(p),S=P.data.length):P.data=p(P.data,0),t.header&&P.meta&&(P.meta.fields=Z),A+=S)}function se(){return t.header&&Z.length===0}function le(f,p,S,d){f={type:f,code:p,message:S},d!==void 0&&(f.row=d),P.errors.push(f)}M(t.step)&&(T=t.step,t.step=function(f){P=f,se()?X():(X(),P.data.length!==0&&(te+=f.data.length,t.preview&&te>t.preview?u.abort():(P.data=P.data[0],T(P,ee))))}),this.parse=function(f,p,S){var d=t.quoteChar||'"',d=(t.newline||(t.newline=this.guessLineEndings(f,d)),C=!1,t.delimiter?M(t.delimiter)&&(t.delimiter=t.delimiter(f),P.meta.delimiter=t.delimiter):((d=((L,V,N,K,R)=>{var ne,D,O,De;R=R||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var $e=0;$e<R.length;$e++){for(var Se,qe=R[$e],he=0,ge=0,_e=0,ce=(O=void 0,new x({comments:K,delimiter:qe,newline:V,preview:10}).parse(L)),oe=0;oe<ce.data.length;oe++)N&&E(ce.data[oe])?_e++:(Se=ce.data[oe].length,ge+=Se,O===void 0?O=Se:0<Se&&(he+=Math.abs(Se-O),O=Se));0<ce.data.length&&(ge/=ce.data.length-_e),(D===void 0||he<=D)&&(De===void 0||De<ge)&&1.99<ge&&(D=he,ne=qe,De=ge)}return{successful:!!(t.delimiter=ne),bestDelimiter:ne}})(f,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=d.bestDelimiter:(C=!0,t.delimiter=m.DefaultDelimiter),P.meta.delimiter=t.delimiter),W(t));return t.preview&&t.header&&d.preview++,a=f,u=new x(d),P=u.parse(a,p,S),X(),ae?{meta:{paused:!0}}:P||{meta:{paused:!1}}},this.paused=function(){return ae},this.pause=function(){ae=!0,u.abort(),a=M(t.chunk)?"":a.substring(u.getCharIndex())},this.resume=function(){ee.streamer._halted?(ae=!1,ee.streamer.parseChunk(a,!0)):setTimeout(ee.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,u.abort(),P.meta.aborted=!0,M(t.complete)&&t.complete(P),a=""},this.guessLineEndings=function(L,d){L=L.substring(0,1048576);var d=new RegExp(B(d)+"([^]*?)"+B(d),"gm"),S=(L=L.replace(d,"")).split("\r"),d=L.split(`
`),L=1<d.length&&d[0].length<S[0].length;if(S.length===1||L)return`
`;for(var V=0,N=0;N<S.length;N++)S[N][0]===`
`&&V++;return V>=S.length/2?`\r
`:"\r"}}function B(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(t){var a=(t=t||{}).delimiter,u=t.newline,C=t.comments,T=t.step,Q=t.preview,ue=t.fastMode,ke=null,me=!1,ee=t.quoteChar==null?'"':t.quoteChar,te=ee;if(t.escapeChar!==void 0&&(te=t.escapeChar),(typeof a!="string"||-1<m.BAD_DELIMITERS.indexOf(a))&&(a=","),C===a)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<m.BAD_DELIMITERS.indexOf(C))&&(C=!1),u!==`
`&&u!=="\r"&&u!==`\r
`&&(u=`
`);var A=0,ae=!1;this.parse=function(G,Z,P){if(typeof G!="string")throw new Error("Input must be a string");var E=G.length,X=a.length,se=u.length,le=C.length,f=M(T),p=[],S=[],d=[],L=A=0;if(!G)return he();if(ue||ue!==!1&&G.indexOf(ee)===-1){for(var V=G.split(u),N=0;N<V.length;N++){if(d=V[N],A+=d.length,N!==V.length-1)A+=u.length;else if(P)return he();if(!C||d.substring(0,le)!==C){if(f){if(p=[],De(d.split(a)),ge(),ae)return he()}else De(d.split(a));if(Q&&Q<=N)return p=p.slice(0,Q),he(!0)}}return he()}for(var K=G.indexOf(a,A),R=G.indexOf(u,A),ne=new RegExp(B(te)+B(ee),"g"),D=G.indexOf(ee,A);;)if(G[A]===ee)for(D=A,A++;;){if((D=G.indexOf(ee,D+1))===-1)return P||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:p.length,index:A}),Se();if(D===E-1)return Se(G.substring(A,D).replace(ne,ee));if(ee===te&&G[D+1]===te)D++;else if(ee===te||D===0||G[D-1]!==te){K!==-1&&K<D+1&&(K=G.indexOf(a,D+1));var O=$e((R=R!==-1&&R<D+1?G.indexOf(u,D+1):R)===-1?K:Math.min(K,R));if(G.substr(D+1+O,X)===a){d.push(G.substring(A,D).replace(ne,ee)),G[A=D+1+O+X]!==ee&&(D=G.indexOf(ee,A)),K=G.indexOf(a,A),R=G.indexOf(u,A);break}if(O=$e(R),G.substring(D+1+O,D+1+O+se)===u){if(d.push(G.substring(A,D).replace(ne,ee)),qe(D+1+O+se),K=G.indexOf(a,A),D=G.indexOf(ee,A),f&&(ge(),ae))return he();if(Q&&p.length>=Q)return he(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:p.length,index:A}),D++}}else if(C&&d.length===0&&G.substring(A,A+le)===C){if(R===-1)return he();A=R+se,R=G.indexOf(u,A),K=G.indexOf(a,A)}else if(K!==-1&&(K<R||R===-1))d.push(G.substring(A,K)),A=K+X,K=G.indexOf(a,A);else{if(R===-1)break;if(d.push(G.substring(A,R)),qe(R+se),f&&(ge(),ae))return he();if(Q&&p.length>=Q)return he(!0)}return Se();function De(_e){p.push(_e),L=A}function $e(_e){var ce=0;return ce=_e!==-1&&(_e=G.substring(D+1,_e))&&_e.trim()===""?_e.length:ce}function Se(_e){return P||(_e===void 0&&(_e=G.substring(A)),d.push(_e),A=E,De(d),f&&ge()),he()}function qe(_e){A=_e,De(d),d=[],R=G.indexOf(u,A)}function he(_e){if(t.header&&!Z&&p.length&&!me){var ce=p[0],oe=Object.create(null),be=new Set(ce);let je=!1;for(let ze=0;ze<ce.length;ze++){let Ce=ce[ze];if(oe[Ce=M(t.transformHeader)?t.transformHeader(Ce,ze):Ce]){let Le,Ve=oe[Ce];for(;Le=Ce+"_"+Ve,Ve++,be.has(Le););be.add(Le),ce[ze]=Le,oe[Ce]++,je=!0,(ke=ke===null?{}:ke)[Le]=Ce}else oe[Ce]=1,ce[ze]=Ce;be.add(Ce)}je&&console.warn("Duplicate headers found and renamed."),me=!0}return{data:p,errors:S,meta:{delimiter:a,linebreak:u,aborted:ae,truncated:!!_e,cursor:L+(Z||0),renamedHeaders:ke}}}function ge(){T(he()),p=[],S=[]}},this.abort=function(){ae=!0},this.getCharIndex=function(){return A}}function I(t){var a=t.data,u=w[a.workerId],C=!1;if(a.error)u.userError(a.error,a.file);else if(a.results&&a.results.data){var T={abort:function(){C=!0,b(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(M(u.userStep)){for(var Q=0;Q<a.results.data.length&&(u.userStep({data:a.results.data[Q],errors:a.results.errors,meta:a.results.meta},T),!C);Q++);delete a.results}else M(u.userChunk)&&(u.userChunk(a.results,T,a.file),delete a.results)}a.finished&&!C&&b(a.workerId,a.results)}function b(t,a){var u=w[t];M(u.userComplete)&&u.userComplete(a),u.terminate(),delete w[t]}function y(){throw new Error("Not implemented.")}function W(t){if(typeof t!="object"||t===null)return t;var a,u=Array.isArray(t)?[]:{};for(a in t)u[a]=W(t[a]);return u}function z(t,a){return function(){t.apply(a,arguments)}}function M(t){return typeof t=="function"}return m.parse=function(t,a){var u=(a=a||{}).dynamicTyping||!1;if(M(u)&&(a.dynamicTypingFunction=u,u={}),a.dynamicTyping=u,a.transform=!!M(a.transform)&&a.transform,!a.worker||!m.WORKERS_SUPPORTED)return u=null,m.NODE_STREAM_INPUT,typeof t=="string"?(t=(C=>C.charCodeAt(0)!==65279?C:C.slice(1))(t),u=new(a.download?k:H)(a)):t.readable===!0&&M(t.read)&&M(t.on)?u=new J(a):(o.File&&t instanceof File||t instanceof Object)&&(u=new h(a)),u.stream(t);(u=(()=>{var C;return!!m.WORKERS_SUPPORTED&&(C=(()=>{var T=o.URL||o.webkitURL||null,Q=r.toString();return m.BLOB_URL||(m.BLOB_URL=T.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Q,")();"],{type:"text/javascript"})))})(),(C=new o.Worker(C)).onmessage=I,C.id=F++,w[C.id]=C)})()).userStep=a.step,u.userChunk=a.chunk,u.userComplete=a.complete,u.userError=a.error,a.step=M(a.step),a.chunk=M(a.chunk),a.complete=M(a.complete),a.error=M(a.error),delete a.worker,u.postMessage({input:t,config:a,workerId:u.id})},m.unparse=function(t,a){var u=!1,C=!0,T=",",Q=`\r
`,ue='"',ke=ue+ue,me=!1,ee=null,te=!1,A=((()=>{if(typeof a=="object"){if(typeof a.delimiter!="string"||m.BAD_DELIMITERS.filter(function(Z){return a.delimiter.indexOf(Z)!==-1}).length||(T=a.delimiter),typeof a.quotes!="boolean"&&typeof a.quotes!="function"&&!Array.isArray(a.quotes)||(u=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(me=a.skipEmptyLines),typeof a.newline=="string"&&(Q=a.newline),typeof a.quoteChar=="string"&&(ue=a.quoteChar),typeof a.header=="boolean"&&(C=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");ee=a.columns}a.escapeChar!==void 0&&(ke=a.escapeChar+ue),a.escapeFormulae instanceof RegExp?te=a.escapeFormulae:typeof a.escapeFormulae=="boolean"&&a.escapeFormulae&&(te=/^[=+\-@\t\r].*$/)}})(),new RegExp(B(ue),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return ae(null,t,me);if(typeof t[0]=="object")return ae(ee||Object.keys(t[0]),t,me)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||ee),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),ae(t.fields||[],t.data||[],me);throw new Error("Unable to serialize unrecognized input");function ae(Z,P,E){var X="",se=(typeof Z=="string"&&(Z=JSON.parse(Z)),typeof P=="string"&&(P=JSON.parse(P)),Array.isArray(Z)&&0<Z.length),le=!Array.isArray(P[0]);if(se&&C){for(var f=0;f<Z.length;f++)0<f&&(X+=T),X+=G(Z[f],f);0<P.length&&(X+=Q)}for(var p=0;p<P.length;p++){var S=(se?Z:P[p]).length,d=!1,L=se?Object.keys(P[p]).length===0:P[p].length===0;if(E&&!se&&(d=E==="greedy"?P[p].join("").trim()==="":P[p].length===1&&P[p][0].length===0),E==="greedy"&&se){for(var V=[],N=0;N<S;N++){var K=le?Z[N]:N;V.push(P[p][K])}d=V.join("").trim()===""}if(!d){for(var R=0;R<S;R++){0<R&&!L&&(X+=T);var ne=se&&le?Z[R]:R;X+=G(P[p][ne],R)}p<P.length-1&&(!E||0<S&&!L)&&(X+=Q)}}return X}function G(Z,P){var E,X;return Z==null?"":Z.constructor===Date?JSON.stringify(Z).slice(1,25):(X=!1,te&&typeof Z=="string"&&te.test(Z)&&(Z="'"+Z,X=!0),E=Z.toString().replace(A,ke),(X=X||u===!0||typeof u=="function"&&u(Z,P)||Array.isArray(u)&&u[P]||((se,le)=>{for(var f=0;f<le.length;f++)if(-1<se.indexOf(le[f]))return!0;return!1})(E,m.BAD_DELIMITERS)||-1<E.indexOf(T)||E.charAt(0)===" "||E.charAt(E.length-1)===" ")?ue+E+ue:E)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!g&&!!o.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=x,m.ParserHandle=U,m.NetworkStreamer=k,m.FileStreamer=h,m.StringStreamer=H,m.ReadableStreamStreamer=J,o.jQuery&&((_=o.jQuery).fn.parse=function(t){var a=t.config||{},u=[];return this.each(function(Q){if(!(_(this).prop("tagName").toUpperCase()==="INPUT"&&_(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var ue=0;ue<this.files.length;ue++)u.push({file:this.files[ue],inputElem:this,instanceConfig:_.extend({},a)})}),C(),this;function C(){if(u.length===0)M(t.complete)&&t.complete();else{var Q,ue,ke,me,ee=u[0];if(M(t.before)){var te=t.before(ee.file,ee.inputElem);if(typeof te=="object"){if(te.action==="abort")return Q="AbortError",ue=ee.file,ke=ee.inputElem,me=te.reason,void(M(t.error)&&t.error({name:Q},ue,ke,me));if(te.action==="skip")return void T();typeof te.config=="object"&&(ee.instanceConfig=_.extend(ee.instanceConfig,te.config))}else if(te==="skip")return void T()}var A=ee.instanceConfig.complete;ee.instanceConfig.complete=function(ae){M(A)&&A(ae,ee.file,ee.inputElem),T()},m.parse(ee.file,ee.instanceConfig)}}function T(){u.splice(0,1),C()}}),v&&(o.onmessage=function(t){t=t.data,m.WORKER_ID===void 0&&t&&(m.WORKER_ID=t.workerId),typeof t.input=="string"?o.postMessage({workerId:m.WORKER_ID,results:m.parse(t.input,t.config),finished:!0}):(o.File&&t.input instanceof File||t.input instanceof Object)&&(t=m.parse(t.input,t.config))&&o.postMessage({workerId:m.WORKER_ID,results:t,finished:!0})}),(k.prototype=Object.create($.prototype)).constructor=k,(h.prototype=Object.create($.prototype)).constructor=h,(H.prototype=Object.create(H.prototype)).constructor=H,(J.prototype=Object.create($.prototype)).constructor=J,m})}(ht)),ht.exports}var fa=ha();const pa=va(fa);function _a(l){const s=pa.parse(l,{header:!0,skipEmptyLines:!0,transformHeader:r=>r.trim().toLowerCase(),dynamicTyping:!1,transform:r=>r.trim()});return s.errors.length>0?(console.error("CSV Parsing Errors with Papaparse:",s.errors),s.data.filter(o=>o&&typeof o=="object"&&Object.keys(o).length>0)):s.data.filter(r=>r&&typeof r=="object"&&Object.keys(r).length>0)}function ga(l){const s={},r=["total","actors","chars/actor","min number","people with extra"];return l.forEach(o=>{var H,J;const _=(H=o.title)==null?void 0:H.trim(),g=parseInt(o.chars||"",10);if(!_||r.includes(_.toLowerCase())||isNaN(g)||g<=0)return;const v=[],w=Object.keys(o),F=w.findIndex(U=>U.toLowerCase()==="casted");if(console.log(`Processing sketch "${_}":`,{castedIndex:F,columns:w}),F!==-1)for(let U=F+1;U<w.length;U++){const B=w[U].trim(),x=(J=o[w[U]])==null?void 0:J.trim();B&&x&&(console.log("Found character-performer pair:",{performerName:B,characterName:x}),v.push({character_name:x,performer_name:B}))}const m=o.time||o.duration||"5:00",[$,k]=m.split(":").map(Number),h=$+(k||0)/60;s[_]={id:crypto.randomUUID(),title:_,description:o.description||"",duration:Math.ceil(h),chars:parseInt(o.chars||"0",10),casted:v.length,locked:!1,character_performers:v.map(U=>({character_name:U.character_name,performer_name:U.performer_name})),raw_data:o}}),console.log("Processed sketches with character performers:",Object.values(s).map(o=>({title:o.title,character_performers:o.character_performers}))),Object.values(s)}async function ma(l){return new Promise((s,r)=>{const o=new FileReader;o.onload=_=>{var g;try{const v=(g=_.target)==null?void 0:g.result,w=_a(v);s(w)}catch(v){r(v)}},o.onerror=()=>r(o.error),o.readAsText(l)})}var ka=Y('<div><h2 class="text-lg font-medium text-gray-900 mb-4">Import Running Order</h2> <div class="space-y-6"><div class="flex items-center justify-center w-full"><label for="csv-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"><div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg> <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p> <p class="text-xs text-gray-500">CSV files only</p></div> <input id="csv-file" type="file" accept=".csv" class="hidden"/></label></div> <button type="button" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-2">Upload CSV</button></div></div>');function ba(l,s){Re(s,!1),pe(s,"showId",8);const r=We();let o=we(),_=we(!1);function g(x){const I=x.map(a=>a.toLowerCase().trim());if(["sketch","cues","props","costume","stage dressing"].every(a=>I.includes(a)))return"techDetails";const W=["title"],z=["time","chars","casted","rocio","jacob","adrian","vera","max","gusta","richie","harry","connor","kieran","chiara","lari","theresa","cliff","tim"],M=W.every(a=>I.includes(a)),t=z.some(a=>I.includes(a));return M&&t?"sketches":"unknown"}async function v(){const x=e(o).files;if(!(!x||x.length===0))try{const I=x[0],b=await ma(I);if(!b||b.length===0){alert("CSV file is empty or could not be processed."),Te(o,e(o).value="");return}const y=Object.keys(b[0]),W=g(y);if(W==="unknown"){alert('Could not automatically determine CSV type. Please check the file headers and format. Expected headers for sketches: "title" and at least one of "Time", "chars", etc. Expected headers for tech details: "Sketch", "Cues", "Props", "Costume", "Stage Dressing".'),Te(o,e(o).value="");return}let z;W==="sketches"?z=ga(b):z=b,r("import",{importType:W,data:z}),Te(o,e(o).value="")}catch(I){console.error("Error importing CSV:",I),alert("Error importing CSV file. Please check the file format and content."),Te(o,e(o).value="")}}function w(x){x.preventDefault(),j(_,!0)}function F(x){x.preventDefault(),j(_,!1)}function m(x){var b;x.preventDefault(),j(_,!1);const I=(b=x.dataTransfer)==null?void 0:b.files;I&&I.length>0&&(Te(o,e(o).files=I),v())}Be();var $=ka();let k;var h=c(n($),2),H=n(h),J=n(H),U=c(n(J),2);hr(U,x=>j(o,x),()=>e(o)),i(J),i(H);var B=c(H,2);B.__click=v,i(h),i($),ve(x=>k=Ie($,1,"bg-white p-6 rounded-lg shadow-sm",null,k,x),[()=>({"border-2":e(_),"border-dashed":e(_),"border-blue-500":e(_)})],Fe),ie("dragover",$,x=>w(x)),ie("dragleave",$,x=>F(x)),ie("drop",$,x=>m(x)),q(l,$),Me()}Rt(["click"]);const wa=l=>l;function ya(l){const s=l-1;return s*s*s+1}function xa(l,{delay:s=0,duration:r=400,easing:o=wa}={}){const _=+getComputedStyle(l).opacity;return{delay:s,duration:r,easing:o,css:g=>`opacity: ${g*_}`}}function Sa(l,{delay:s=0,duration:r=400,easing:o=ya,axis:_="y"}={}){const g=getComputedStyle(l),v=+g.opacity,w=_==="y"?"height":"width",F=parseFloat(g[w]),m=_==="y"?["top","bottom"]:["left","right"],$=m.map(x=>`${x[0].toUpperCase()}${x.slice(1)}`),k=parseFloat(g[`padding${$[0]}`]),h=parseFloat(g[`padding${$[1]}`]),H=parseFloat(g[`margin${$[0]}`]),J=parseFloat(g[`margin${$[1]}`]),U=parseFloat(g[`border${$[0]}Width`]),B=parseFloat(g[`border${$[1]}Width`]);return{delay:s,duration:r,easing:o,css:x=>`overflow: hidden;opacity: ${Math.min(x*20,1)*v};${w}: ${x*F}px;padding-${m[0]}: ${x*k}px;padding-${m[1]}: ${x*h}px;margin-${m[0]}: ${x*H}px;margin-${m[1]}: ${x*J}px;border-${m[0]}-width: ${x*U}px;border-${m[1]}-width: ${x*B}px;min-${w}: 0`}}var Ca=Y("<button> </button>"),Da=Y('<div class="filter-dropdown svelte-uawkgq"><button>All Performers</button> <!></div>'),Ea=Y('<div class="collapsed-buttons svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Print Set List"><!></button> <div class="filter-container svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Filter by Performer"><!></button> <!></div> <button class="sidebar-button svelte-uawkgq" title="Import CSV"><!></button></div>'),$a=Y('<div><button class="sidebar-button collapse-button svelte-uawkgq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <div class="sidebar-header svelte-uawkgq"><h1 class="svelte-uawkgq"> </h1> <div class="print-controls svelte-uawkgq"><select class="svelte-uawkgq"><option>Green Room Version</option><option>Hallway Version</option><option>Tech Booth Version</option></select> <button class="print-button svelte-uawkgq">Print Set List</button></div></div> <div class="sidebar-content svelte-uawkgq"><!> <div class="mt-4"><!></div></div> <!></div>');function Oa(l,s){Re(s,!1);let r=pe(s,"show",8),o=pe(s,"performers",8),_=pe(s,"selectedPerformer",12,null),g=pe(s,"printVersion",12,"greenroom"),v=pe(s,"isSidebarCollapsed",12,!1);const w=We();let F=we(!1);function m(){v(!v()),w("collapse",{collapsed:v()})}function $(){j(F,!e(F))}function k(te){w("filter",{performer:te}),j(F,!1)}function h(){w("print",{printVersion:g()})}function H(te){w("csvImport",te.detail)}Be();var J=$a();let U;var B=n(J),x=n(B);let I;i(B);var b=c(B,2),y=n(b),W=n(y,!0);i(y);var z=c(y,2),M=n(z);ve(()=>{g(),sr(()=>{})});var t=n(M);t.value=t.__value="greenroom";var a=c(t);a.value=a.__value="hallway";var u=c(a);u.value=u.__value="techbooth",i(M);var C=c(M,2);i(z),i(b);var T=c(b,2),Q=n(T);At(Q,{get performers(){return o()},get selectedPerformer(){return _()},set selectedPerformer(te){_(te)},$$legacy:!0});var ue=c(Q,2),ke=n(ue);ba(ke,{get showId(){return r().id},$$events:{import:H,importComplete:()=>w("importComplete")}}),i(ue),i(T);var me=c(T,2);{var ee=te=>{var A=Ea(),ae=n(A),G=n(ae);qt(G,{size:20}),i(ae);var Z=c(ae,2),P=n(Z),E=n(P);yr(E,{size:20}),i(P);var X=c(P,2);{var se=p=>{var S=Da(),d=n(S);let L;var V=c(d,2);Ye(V,1,o,lt,(N,K)=>{var R=Ca();let ne;var D=n(R,!0);i(R),ve(O=>{ne=Ie(R,1,"filter-option svelte-uawkgq",null,ne,O),re(D,e(K))},[()=>({active:_()===e(K)})],Fe),ie("click",R,()=>k(e(K))),q(N,R)}),i(S),ve(N=>L=Ie(d,1,"filter-option svelte-uawkgq",null,L,N),[()=>({active:_()===null})],Fe),ie("click",d,()=>k(null)),zt(3,S,()=>xa),q(p,S)};de(X,p=>{e(F)&&p(se)})}i(Z);var le=c(Z,2),f=n(le);Cr(f,{size:20}),i(le),i(A),ie("click",ae,h),ie("click",P,$),ie("click",le,()=>{const p=document.querySelector('input[type="file"]');p==null||p.click()}),q(te,A)};de(me,te=>{v()&&te(ee)})}i(J),ve((te,A)=>{U=Ie(J,1,"sidebar svelte-uawkgq",null,U,te),Ne(B,"aria-label",v()?"Expand sidebar":"Collapse sidebar"),I=Ie(x,0,"arrow-icon svelte-uawkgq",null,I,A),re(W,r().title)},[()=>({collapsed:v()}),()=>({collapsed:v()})],Fe),ie("click",B,m),kr(M,g),ie("click",C,h),q(l,J),Me()}var Pa=Y('<div class="view-controls svelte-xwc4id"><div class="view-buttons svelte-xwc4id"><button aria-label="Grid view"><!></button> <button aria-label="List view"><!></button></div> <div class="action-buttons svelte-xwc4id"><button class="optimize-button svelte-xwc4id" aria-label="Optimize running order" title="Optimize running order to minimize cast conflicts"><!> <span>Optimize</span></button> <div class="print-buttons svelte-xwc4id"><button>Green Room</button> <button>Hallway</button> <button>Tech Booth</button></div></div></div>');function Ta(l,s){Re(s,!1);let r=pe(s,"viewMode",12,"list"),o=pe(s,"printVersion",12,"greenroom"),_=pe(s,"showPrintView",8,!1);const g=We();function v(C){r(C),g("viewModeChange",{viewMode:C})}function w(C){o(C),g("printVersionChange",{printVersion:C}),g("showPrintViewChange",{showPrintView:!0})}function F(){g("optimize")}Be();var m=Pa(),$=n(m),k=n($);let h;var H=n(k);xr(H,{size:20}),i(k);var J=c(k,2);let U;var B=n(J);Sr(B,{size:20}),i(J),i($);var x=c($,2),I=n(x),b=n(I);Dr(b,{size:20}),ir(2),i(I);var y=c(I,2),W=n(y);let z;var M=c(W,2);let t;var a=c(M,2);let u;i(y),i(x),i(m),ve((C,T,Q,ue,ke)=>{h=Ie(k,1,"view-button svelte-xwc4id",null,h,C),U=Ie(J,1,"view-button svelte-xwc4id",null,U,T),z=Ie(W,1,"print-view-button svelte-xwc4id",null,z,Q),t=Ie(M,1,"print-view-button svelte-xwc4id",null,t,ue),u=Ie(a,1,"print-view-button svelte-xwc4id",null,u,ke)},[()=>({active:r()==="grid"}),()=>({active:r()==="list"}),()=>({active:_()&&o()==="greenroom"}),()=>({active:_()&&o()==="hallway"}),()=>({active:_()&&o()==="techbooth"})],Fe),ie("click",k,()=>v("grid")),ie("click",J,()=>v("list")),ie("click",I,F),ie("click",W,()=>w("greenroom")),ie("click",M,()=>w("hallway")),ie("click",a,()=>w("techbooth")),q(l,m),Me()}function Ia(l){const s=l-1;return s*s*s+1}function Vt(l,{from:s,to:r},o={}){var{delay:_=0,duration:g=z=>Math.sqrt(z)*120,easing:v=Ia}=o,w=getComputedStyle(l),F=w.transform==="none"?"":w.transform,[m,$]=w.transformOrigin.split(" ").map(parseFloat);m/=l.clientWidth,$/=l.clientHeight;var k=Ra(l),h=l.clientWidth/r.width/k,H=l.clientHeight/r.height/k,J=s.left+s.width*m,U=s.top+s.height*$,B=r.left+r.width*m,x=r.top+r.height*$,I=(J-B)*h,b=(U-x)*H,y=s.width/r.width,W=s.height/r.height;return{delay:_,duration:typeof g=="function"?g(Math.sqrt(I*I+b*b)):g,easing:v,css:(z,M)=>{var t=M*I,a=M*b,u=z+M*y,C=z+M*W;return`transform: ${F} translate(${t}px, ${a}px) scale(${u}, ${C});`}}}function Ra(l){if("currentCSSZoom"in l)return l.currentCSSZoom;for(var s=l,r=1;s!==null;)r*=+getComputedStyle(s).zoom,s=s.parentElement;return r}var Ma=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),ja=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),za=Y('<span class="character-count svelte-t9pjlk"> </span>'),La=Y('<div class="description svelte-t9pjlk"><strong>Description:</strong> </div>'),qa=Y('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Costume:</strong> </div>'),Fa=Y('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Stage:</strong> </div>'),Aa=Y('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Cues:</strong> </div>'),Va=Y('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Props:</strong> </div>'),Na=Y('<div class="tech-details svelte-t9pjlk"><!> <!> <!> <!></div>'),Ua=Y('<div class="list-item-details svelte-t9pjlk"><!> <!></div>'),Ha=Y('<div role="listitem"><div class="list-item-header svelte-t9pjlk"><div class="list-item-main svelte-t9pjlk"><span class="position svelte-t9pjlk"> </span> <button class="title svelte-t9pjlk"> </button> <!> <span class="duration svelte-t9pjlk"> </span> <div class="list-item-actions svelte-t9pjlk"><button><!></button> <button class="action-button delete-button svelte-t9pjlk" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <div class="list-item-performers svelte-t9pjlk"> <!></div></div> <!></div>'),Ba=Y('<div class="list-view svelte-t9pjlk"></div>');function Wa(l,s){Re(s,!1),pe(s,"sketches",24,()=>[]);let r=pe(s,"filteredSketches",24,()=>[]),o=pe(s,"expandedSketchId",8,null),_=pe(s,"draggedSketch",8,null),g=pe(s,"draggedOverIndex",8,null),v=pe(s,"flipDurationMs",8,300);pe(s,"selectedSketch",8,null);const w=We();function F(b){w("select",{sketch:b})}function m(b,y){w("lock",{id:b,locked:y})}function $(b){w("delete",{id:b})}function k(b,y){w("dragstart",{event:b,sketch:y})}function h(b,y){w("dragover",{event:b,index:y})}function H(){w("dragleave")}function J(b,y){w("drop",{event:b,index:y})}function U(){w("dragend")}function B(b){var W;return(((W=b.character_performers)==null?void 0:W.length)||0)!==b.chars}function x(b){const y=Math.floor(b/60),W=b%60;return y>0?`${y}h ${W}m`:`${W}m`}Be();var I=Ba();Ye(I,15,r,b=>b.id,(b,y,W)=>{var z=Ha();let M;var t=n(z),a=n(t),u=n(a),C=n(u);i(u);var T=c(u,2),Q=n(T,!0);i(T);var ue=c(T,2);{var ke=d=>{Ft(d,{class:"warning-icon",size:16})};de(ue,d=>{B(e(y))&&d(ke)})}var me=c(ue,2),ee=n(me,!0);i(me);var te=c(me,2),A=n(te);let ae;var G=n(A);{var Z=d=>{var L=Ma();q(d,L)},P=d=>{var L=ja();q(d,L)};de(G,d=>{e(y).locked?d(Z):d(P,!1)})}i(A);var E=c(A,2);i(te),i(a);var X=c(a,2),se=n(X),le=c(se);{var f=d=>{var L=za(),V=n(L);i(L),ve(()=>{var N;return re(V,`(${(((N=e(y).character_performers)==null?void 0:N.length)||0)??""}/${e(y).chars??""} characters)`)}),q(d,L)};de(le,d=>{B(e(y))&&d(f)})}i(X),i(t);var p=c(t,2);{var S=d=>{var L=Ua(),V=n(L);{var N=ne=>{var D=La(),O=c(n(D));i(D),ve(()=>re(O,` ${e(y).description??""}`)),q(ne,D)};de(V,ne=>{e(y).description&&ne(N)})}var K=c(V,2);{var R=ne=>{var D=Na(),O=n(D);{var De=ce=>{var oe=qa(),be=c(n(oe));i(oe),ve(()=>re(be,` ${e(y).techDetails.costume??""}`)),q(ce,oe)};de(O,ce=>{e(y).techDetails.costume&&ce(De)})}var $e=c(O,2);{var Se=ce=>{var oe=Fa(),be=c(n(oe));i(oe),ve(()=>re(be,` ${e(y).techDetails.stage_dressing??""}`)),q(ce,oe)};de($e,ce=>{e(y).techDetails.stage_dressing&&ce(Se)})}var qe=c($e,2);{var he=ce=>{var oe=Aa(),be=c(n(oe));i(oe),ve(()=>re(be,` ${e(y).techDetails.cues??""}`)),q(ce,oe)};de(qe,ce=>{e(y).techDetails.cues&&ce(he)})}var ge=c(qe,2);{var _e=ce=>{var oe=Va(),be=c(n(oe));i(oe),ve(()=>re(be,` ${e(y).techDetails.props??""}`)),q(ce,oe)};de(ge,ce=>{e(y).techDetails.props&&ce(_e)})}i(D),q(ne,D)};de(K,ne=>{e(y).techDetails&&ne(R)})}i(L),q(d,L)};de(p,d=>{o()===e(y).id&&d(S)})}i(z),ve((d,L,V,N)=>{M=Ie(z,1,"list-item svelte-t9pjlk",null,M,d),Ne(z,"draggable",!e(y).locked),re(C,`${e(y).position+1}.`),Ne(T,"aria-label",`View details for ${e(y).title}`),re(Q,e(y).title),re(ee,L),ae=Ie(A,1,"action-button lock-button svelte-t9pjlk",null,ae,V),Ne(A,"aria-label",e(y).locked?"Unlock sketch":"Lock sketch"),Ne(A,"title",e(y).locked?"Unlock sketch":"Lock sketch"),re(se,`${N??""} `)},[()=>{var d;return{expanded:o()===e(y).id,locked:e(y).locked,dragging:((d=_())==null?void 0:d.id)===e(y).id,"drag-over":g()===e(W)}},()=>x(e(y).duration),()=>({locked:e(y).locked}),()=>(e(y).character_performers||[]).map(d=>d.performer_name).join(", ")],Fe),ie("click",T,()=>F(e(y))),ie("keydown",T,d=>d.key==="Enter"&&F(e(y))),ie("click",A,ct(()=>m(e(y).id,!e(y).locked))),ie("click",E,ct(()=>$(e(y).id))),jt(z,()=>Vt,()=>({duration:v()})),ie("dragstart",z,d=>k(d,e(y))),ie("dragover",z,d=>h(d,e(W))),ie("dragleave",z,H),ie("drop",z,d=>J(d,e(W))),ie("dragend",z,U),q(b,z)}),i(I),q(l,I),Me()}var Ka=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),Ga=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),Ja=Y('<span class="text-amber-500"> </span>'),Qa=Y('<li class="flex justify-between"><span class="font-medium text-gray-700"> </span> <span class="text-gray-500"> </span></li>'),Za=Y('<div class="cast-list px-4 pb-3 pt-1 bg-gray-50"><ul class="text-xs space-y-1"></ul></div>'),Ya=Y('<div class="border-t border-gray-200 px-4 py-2"><button class="cast-toggle text-sm text-blue-600 hover:text-blue-800 font-medium focus:outline-none w-full text-left flex justify-between items-center"><span> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!>',1),Xa=Y('<div tabindex="0" role="button" style="min-height: 150px;"><div class="p-4 flex-grow"><div class="flex justify-between items-center mb-2"><div class="flex items-center gap-2"><h3 class="text-lg font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center gap-0.5"><button><!></button> <button class="action-button delete-button svelte-1qd7kif" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <p class="description text-sm text-gray-600 mb-3 line-clamp-1"> </p> <div class="stats text-xs text-gray-500 space-x-3 mb-3"><span> </span> <span> </span> <span> </span> <!></div></div> <!></div>');function es(l,s){Re(s,!1);let r=pe(s,"sketch",8),o=pe(s,"isSelected",8,!1),_=pe(s,"showCharacterWarning",8,!1),g=we(!1);const v=We();function w(E){E.target instanceof HTMLElement&&E.target.closest("button, .cast-toggle")||E.target instanceof HTMLElement&&E.target.closest(".card")&&v("select",{sketch:r()})}function F(E){E.stopPropagation(),v("lock",{id:r().id,locked:!r().locked})}function m(E){E.stopPropagation(),v("delete",{id:r().id})}function $(E){E.stopPropagation(),j(g,!e(g))}function k(E){(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),E.target instanceof HTMLElement&&E.target.closest("button, .cast-toggle")?E.target.closest(".cast-toggle")&&$(E):w(E))}Be();var h=Xa(),H=n(h),J=n(H),U=n(J),B=n(U),x=n(B,!0);i(B);var I=c(B,2);{var b=E=>{Ft(E,{class:"warning-icon",size:16})};de(I,E=>{_()&&E(b)})}i(U);var y=c(U,2),W=n(y);let z;var M=n(W);{var t=E=>{var X=Ka();q(E,X)},a=E=>{var X=Ga();q(E,X)};de(M,E=>{r().locked?E(t):E(a,!1)})}i(W);var u=c(W,2);i(y),i(J);var C=c(J,2),T=n(C,!0);i(C);var Q=c(C,2),ue=n(Q),ke=n(ue);i(ue);var me=c(ue,2),ee=n(me);i(me);var te=c(me,2),A=n(te);i(te);var ae=c(te,2);{var G=E=>{var X=Ja(),se=n(X);i(X),ve(()=>{var le;return re(se,`(${(((le=r().character_performers)==null?void 0:le.length)||0)??""}/${r().chars??""} characters)`)}),q(E,X)};de(ae,E=>{_()&&E(G)})}i(Q),i(H);var Z=c(H,2);{var P=E=>{var X=Ya(),se=Je(X),le=n(se),f=n(le),p=n(f);i(f);var S=c(f,2);i(le),i(se);var d=c(se,2);{var L=V=>{var N=Za(),K=n(N);Ye(K,5,()=>r().character_performers,R=>R.id||R.character_name+R.performer_name,(R,ne)=>{var D=Qa(),O=n(D),De=n(O,!0);i(O);var $e=c(O,2),Se=n($e,!0);i($e),i(D),ve(()=>{re(De,e(ne).character_name),re(Se,e(ne).performer_name)}),q(R,D)}),i(K),i(N),zt(3,N,()=>Sa,()=>({duration:200})),q(V,N)};de(d,V=>{e(g)&&V(L)})}ve(()=>{Ne(le,"aria-expanded",e(g)),re(p,`Show Cast (${r().character_performers.length??""})`),Ie(S,0,`w-4 h-4 transform transition-transform duration-200 ${e(g)?"rotate-180":""}`)}),ie("click",le,$),q(E,X)};de(Z,E=>{r().character_performers&&r().character_performers.length>0&&E(P)})}i(h),ve(E=>{Ie(h,1,`card ${o()?"selected border-blue-500":"border-gray-200"} ${r().locked?"locked":""} border bg-white rounded-lg shadow hover:shadow-md transition-all duration-200 flex flex-col`,"svelte-1qd7kif"),Ne(h,"aria-label",`View sketch details for ${r().title??""}`),Ne(B,"title",r().title),re(x,r().title),z=Ie(W,1,"action-button lock-button svelte-1qd7kif",null,z,E),Ne(W,"aria-label",r().locked?"Unlock sketch":"Lock sketch"),Ne(W,"title",r().locked?"Unlock sketch":"Lock sketch"),Ne(C,"title",r().description||"A sketch waiting for its story..."),re(T,r().description||"A sketch waiting for its story..."),re(ke,`Duration: ${r().duration??""} min`),re(ee,`Chars: ${r().chars??""}`),re(A,`Casted: ${r().casted??""}`)},[()=>({locked:r().locked})],Fe),ie("click",W,ct(F)),ie("click",u,ct(m)),ie("click",h,w),ie("keydown",h,k),q(l,h),Me()}var ts=Y('<div role="listitem"><!></div>'),rs=Y('<div class="grid-view svelte-1q07nmr"></div>');function as(l,s){Re(s,!1),pe(s,"sketches",24,()=>[]);let r=pe(s,"filteredSketches",24,()=>[]);pe(s,"expandedSketchId",8,null);let o=pe(s,"draggedSketch",8,null),_=pe(s,"draggedOverIndex",8,null),g=pe(s,"flipDurationMs",8,300);pe(s,"selectedSketch",8,null);const v=We();function w(x){v("select",{sketch:x})}function F(x){v("lock",x.detail)}function m(x){v("delete",x.detail)}function $(x,I){v("dragstart",{event:x,sketch:I})}function k(x,I){v("dragover",{event:x,index:I})}function h(){v("dragleave")}function H(x,I){v("drop",{event:x,index:I})}function J(){v("dragend")}function U(x){var b;return(((b=x.character_performers)==null?void 0:b.length)||0)!==x.chars}Be();var B=rs();Ye(B,15,r,x=>x.id,(x,I,b)=>{var y=ts();let W;var z=n(y);const M=Fe(()=>U(e(I)));es(z,{get sketch(){return e(I)},get showCharacterWarning(){return e(M)},$$events:{update:()=>{},select:()=>w(e(I)),lock:F,delete:m}}),i(y),ve(t=>{W=Ie(y,1,"sketch-list-item svelte-1q07nmr",null,W,t),Ne(y,"draggable",!e(I).locked)},[()=>{var t;return{locked:e(I).locked,dragging:((t=o())==null?void 0:t.id)===e(I).id,"drag-over":_()===e(b)}}],Fe),jt(y,()=>Vt,()=>({duration:g()})),ie("dragstart",y,t=>$(t,e(I))),ie("dragover",y,t=>k(t,e(b))),ie("dragleave",y,h),ie("drop",y,t=>H(t,e(b))),ie("dragend",y,J),q(x,y)}),i(B),q(l,B),Me()}var ss=Y('<div class="print-header svelte-vw1bf2"><div class="left svelte-vw1bf2"><button class="back-btn svelte-vw1bf2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m15 18-6-6 6-6"></path></svg> Back to Show</button> <h2 class="print-title svelte-vw1bf2"> </h2></div> <div class="right svelte-vw1bf2"><div class="performer-filter-wrapper svelte-vw1bf2"><!></div> <div class="print-version-btns svelte-vw1bf2"><button>Greenroom</button> <button>Hallway</button> <button>Tech Booth</button></div> <button class="print-btn svelte-vw1bf2" aria-label="Print set list"><!></button></div></div>');function is(l,s){Re(s,!1);let r=pe(s,"printVersion",8,"greenroom"),o=pe(s,"printViewPerformer",8,null),_=pe(s,"performers",24,()=>[]);const g=We();function v(C){g("versionChange",{printVersion:C})}function w(C){g("performerSelect",{performer:C.detail.performer})}function F(){g("back")}function m(){g("print")}Be();var $=ss(),k=n($),h=n(k),H=c(h,2),J=n(H);i(H),i(k);var U=c(k,2),B=n(U),x=n(B);At(x,{get performers(){return _()},get selectedPerformer(){return o()},$$events:{select:w}}),i(B);var I=c(B,2),b=n(I);let y;var W=c(b,2);let z;var M=c(W,2);let t;i(I);var a=c(I,2),u=n(a);qt(u,{size:20}),i(a),i(U),i($),ve((C,T,Q)=>{re(J,`Print View - ${r()??""}`),y=Ie(b,1,"print-view-button svelte-vw1bf2",null,y,C),z=Ie(W,1,"print-view-button svelte-vw1bf2",null,z,T),t=Ie(M,1,"print-view-button svelte-vw1bf2",null,t,Q)},[()=>({active:r()==="greenroom"}),()=>({active:r()==="hallway"}),()=>({active:r()==="techbooth"})],Fe),ie("click",h,F),ie("click",b,()=>v("greenroom")),ie("click",W,()=>v("hallway")),ie("click",M,()=>v("techbooth")),ie("click",a,m),q(l,$),Me()}async function ns(l,s){try{const r=await fetch("/api/optimize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sketches:l.map(_=>{var g;return{id:_.id,title:_.title,cast:((g=_.character_performers)==null?void 0:g.map(v=>v.performer_name))||[]}}),constraints:s})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){return console.error("Failed to optimize running order:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error",order:[],metrics:{cast_overlaps:0}}}}var os=Y('<div class="fixed inset-0 z-50 overflow-auto bg-white"><!> <div class="p-4"><!></div></div>'),ls=Y('<div class="modal-backdrop svelte-pz2bd9" role="dialog" aria-modal="true" aria-label="Sketch details"><div class="modal-content svelte-pz2bd9" role="document"><!></div></div>'),cs=Y('<div class="show-page svelte-pz2bd9"><!> <div class="content svelte-pz2bd9"><!> <!> <!></div></div>');function ws(l,s){Re(s,!1);const[r,o]=dr(),_=()=>cr($r,"$page",r),g=we(),v=we(),w=we();let F=pe(s,"data",8);We();const m=_().params.id;let $=F().show,k=we(F().sketches),h=we(null),H=we(null),J=we("list");const U=300;let B=we(!1),x=we("greenroom"),I=we(null),b=we(null),y=we(null),W=we(null),z=we(!1),M=!1;Ot(async()=>{await ae()});async function t(f){try{const{importType:p,data:S}=f.detail;if(p==="unknown"){console.error("Import type is unknown. Aborting."),alert("Could not determine CSV type. Please check file format.");return}let d;p==="sketches"?d={show_id:m,importType:p,data:S.map((N,K)=>({...N,position:e(k).length+K}))}:d={show_id:m,importType:p,data:S};const L=await fetch("/api/sketches/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!L.ok){const N=await L.json().catch(()=>({error:"Failed to import data. Unknown error."}));throw new Error(N.error||"Failed to import data")}const V=await L.json();if(p==="sketches"){const N=V.filter(K=>K.success&&K.sketch).map(K=>K.sketch);if(N.length>0)j(k,[...e(k),...N].sort((K,R)=>K.position-R.position)),alert(`${N.length} sketch(es) imported successfully.`);else{const K=V.filter(R=>!R.success);K.length>0?(alert(`Import partially failed. ${K.length} sketch(es) had issues. Check console for details.`),console.error("Sketch import errors:",K)):alert("No new sketches were imported. The file might have been empty or all rows failed.")}}else{const N=V.filter(R=>R.success).length,K=V.length-N;alert(`Tech details import complete. ${N} successful, ${K} failed. Check console for details.`),K>0&&console.error("Tech detail import issues:",V.filter(R=>!R.success)),await ae()}}catch(p){console.error("Error importing data:",p),alert(`Error during import: ${p instanceof Error?p.message:"Unknown error"}`)}}async function a(f){try{if(!(await fetch(`/api/sketches/${f.detail.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({locked:f.detail.locked})})).ok)throw new Error("Failed to update sketch");j(k,e(k).map(S=>S.id===f.detail.id?{...S,locked:f.detail.locked}:S))}catch(p){console.error("Error updating sketch:",p)}}function u(f,p){a(new CustomEvent("lock",{detail:{id:f,locked:p}}))}async function C(f){var S;const p=f.detail.id;if(p)try{if(!(await fetch(`/api/sketches/${p}`,{method:"DELETE"})).ok)throw new Error("Failed to delete sketch");const L=e(k).findIndex(V=>V.id===p);j(k,e(k).filter(V=>V.id!==p)),j(k,e(k).map((V,N)=>({...V,position:N}))),((S=e(h))==null?void 0:S.id)===p&&j(h,null),await A(e(k))}catch(d){console.error("Error deleting sketch:",d)}}function T(f){C(new CustomEvent("delete",{detail:{id:f}}))}async function Q(f){var p;try{if(!(await fetch(`/api/sketches/${f.detail.sketch.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f.detail.sketch)})).ok)throw new Error("Failed to update sketch");j(k,e(k).map(d=>d.id===f.detail.sketch.id?f.detail.sketch:d).sort((d,L)=>d.position-L.position)),((p=e(h))==null?void 0:p.id)===f.detail.sketch.id&&j(h,f.detail.sketch)}catch(S){console.error("Error updating sketch:",S)}}function ue(f,p){if(p.locked){f.preventDefault();return}j(b,p),f.dataTransfer&&(f.dataTransfer.effectAllowed="move")}function ke(f,p){f.preventDefault(),!(!e(b)||e(b).locked||e(v)[p].locked)&&(j(y,p),f.dataTransfer&&(f.dataTransfer.dropEffect="move"))}function me(){j(y,null)}async function ee(f,p){if(f.preventDefault(),!e(b)||e(b).locked||e(v)[p].locked)return;const d=[...e(v)],L=d.findIndex(V=>{var N;return V.id===((N=e(b))==null?void 0:N.id)});if(L!==-1){d.splice(L,1),d.splice(p,0,e(b));const V=d,N=new Map(V.map((R,ne)=>[R.id,ne])),K=e(k).map(R=>{if(R.locked)return R;const ne=N.get(R.id);return{...R,position:ne!==void 0?ne:R.position}}).sort((R,ne)=>R.position-ne.position).map((R,ne)=>({...R,position:ne}));j(k,K),await A(K)}j(b,null),j(y,null)}function te(){j(b,null),j(y,null)}async function A(f){const p=f.map(S=>({id:S.id,position:S.position}));try{if(!(await fetch("/api/sketches",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:p})})).ok)throw console.error("Failed to reorder sketches API call failed"),await ae(),new Error("Failed to reorder sketches")}catch(S){console.error("Error reordering sketches:",S),await ae()}}async function ae(){try{const f=await fetch(`/api/sketches?show_id=${m}`);if(!f.ok)throw new Error("Failed to load sketches");const p=await f.json();j(k,p.map(S=>({...S,position:S.position??0,locked:!!S.locked})).sort((S,d)=>S.position-d.position))}catch(f){console.error("Error loading sketches:",f),j(k,[])}}function G(){j(B,!0),setTimeout(()=>{window.print(),j(B,!1)},100)}function Z(f){j(I,e(I)===f?null:f)}async function P(){if(!M){M=!0;try{const p={anchored:e(k).filter(d=>d.locked).map(d=>({sketch_id:d.id,position:d.position}))},S=await ns(e(k),p);if(S.success){const d=e(k).map(L=>{const V=S.order.find(N=>N.sketch_id===L.id);return{...L,position:(V==null?void 0:V.position)??L.position}}).sort((L,V)=>L.position-V.position);await A(d),j(k,d),alert(`Optimization complete! Cast overlaps reduced to ${S.metrics.cast_overlaps}`)}else alert("Failed to optimize running order: "+(S.error||"Unknown error"))}catch(f){console.error("Error optimizing running order:",f),alert("Failed to optimize running order. Please try again.")}finally{M=!1}}}ut(()=>e(k),()=>{j(g,[...new Set(e(k).flatMap(f=>f.character_performers||[]).map(f=>f.performer_name))].sort())}),ut(()=>(e(H),e(k)),()=>{j(v,e(H)?e(k).filter(f=>{var p;return(p=f.character_performers)==null?void 0:p.some(S=>S.performer_name===e(H))}):e(k))}),ut(()=>(e(W),e(k)),()=>{j(w,e(W)?e(k).filter(f=>{var p;return(p=f.character_performers)==null?void 0:p.some(S=>S.performer_name===e(W))}):e(k))}),It(),Be();var E=Xe(),X=Je(E);{var se=f=>{var p=os(),S=n(p);is(S,{get printVersion(){return e(x)},get printViewPerformer(){return e(W)},get performers(){return e(g)},$$events:{back:()=>j(B,!1),versionChange:V=>j(x,V.detail.printVersion),performerSelect:V=>j(W,V.detail.performer),print:G}});var d=c(S,2),L=n(d);la(L,{get sketches(){return e(w)},get showTitle(){return $.title},get version(){return e(x)}}),i(d),i(p),q(f,p)},le=f=>{var p=cs(),S=n(p);Oa(S,{show:$,get performers(){return e(g)},get selectedPerformer(){return e(H)},set selectedPerformer(D){j(H,D)},get printVersion(){return e(x)},set printVersion(D){j(x,D)},get isSidebarCollapsed(){return e(z)},set isSidebarCollapsed(D){j(z,D)},$$events:{collapse:({detail:D})=>j(z,D.collapsed),filter:({detail:D})=>j(H,D.performer),print:({detail:D})=>{j(x,D.printVersion),G()},importComplete:ae,csvImport:t},$$legacy:!0});var d=c(S,2),L=n(d);Ta(L,{get viewMode(){return e(J)},set viewMode(D){j(J,D)},get printVersion(){return e(x)},set printVersion(D){j(x,D)},get showPrintView(){return e(B)},set showPrintView(D){j(B,D)},$$events:{viewModeChange:D=>j(J,D.detail.viewMode),printVersionChange:D=>j(x,D.detail.printVersion),showPrintViewChange:D=>j(B,D.detail.showPrintView),optimize:P},$$legacy:!0});var V=c(L,2);{var N=D=>{Wa(D,{get sketches(){return e(k)},get filteredSketches(){return e(v)},get draggedSketch(){return e(b)},get draggedOverIndex(){return e(y)},flipDurationMs:U,get expandedSketchId(){return e(I)},set expandedSketchId(O){j(I,O)},get selectedSketch(){return e(h)},set selectedSketch(O){j(h,O)},$$events:{select:O=>j(h,O.detail.sketch),lock:O=>u(O.detail.id,O.detail.locked),delete:O=>T(O.detail.id),expand:O=>Z(O.detail.sketchId),dragstart:O=>ue(O.detail.event,O.detail.sketch),dragover:O=>ke(O.detail.event,O.detail.index),dragleave:me,drop:O=>ee(O.detail.event,O.detail.index),dragend:te},$$legacy:!0})},K=D=>{as(D,{get sketches(){return e(k)},get filteredSketches(){return e(v)},get draggedSketch(){return e(b)},get draggedOverIndex(){return e(y)},flipDurationMs:U,get expandedSketchId(){return e(I)},set expandedSketchId(O){j(I,O)},get selectedSketch(){return e(h)},set selectedSketch(O){j(h,O)},$$events:{select:O=>j(h,O.detail.sketch),lock:O=>u(O.detail.id,O.detail.locked),delete:O=>T(O.detail.id),expand:O=>Z(O.detail.sketchId),dragstart:O=>ue(O.detail.event,O.detail.sketch),dragover:O=>ke(O.detail.event,O.detail.index),dragleave:me,drop:O=>ee(O.detail.event,O.detail.index),dragend:te},$$legacy:!0})};de(V,D=>{e(J)==="list"?D(N):D(K,!1)})}var R=c(V,2);{var ne=D=>{var O=ls(),De=n(O),$e=n(De);Yr($e,{get sketch(){return e(h)},$$events:{close:()=>j(h,null),update:Q}}),i(De),i(O),ie("click",De,ct(function(Se){wr.call(this,s,Se)})),ie("click",O,()=>j(h,null)),ie("keydown",O,Se=>Se.key==="Escape"&&j(h,null)),q(D,O)};de(R,D=>{e(h)&&D(ne)})}i(d),i(p),q(f,p)};de(X,f=>{e(B)?f(se):f(le,!1)})}q(l,E),Me(),o()}export{ws as component};
