import{c as rt,a as T,t as Z,n as It,d as Nt}from"../chunks/CFdHu8IA.js";import"../chunks/BbmbYZNE.js";import{a4 as Mr,q as Fr,w as qe,a9 as er,E as zr,aI as jr,aJ as Nr,e as qt,u as dr,aK as qr,ad as tr,ae as rr,af as Hr,aL as Vr,G as Br,p as je,f as Ge,a as Ne,s as d,c as o,r as i,t as de,m as e,Q as me,D as $,X as Ue,aM as mt,aN as Rt,d as Ur,aO as cr,aP as Wr}from"../chunks/lowV6HZa.js";import{k as Kr,w as Jr,l as Gr,s as G,e as Y,d as vr,r as Qr}from"../chunks/5gYYOIeN.js";import{s as ct,r as vt,p as He,i as le,a as Zr,b as Xr}from"../chunks/ZOUqE9m-.js";import{c as Yr,I as ut,e as Je,i as xt,a as $e,s as ze,r as yt,b as dt}from"../chunks/CDohF1HD.js";import{i as ft}from"../chunks/lXCSdFG9.js";import{s as ea}from"../chunks/DPy5jLWL.js";import{c as Ct,o as ur}from"../chunks/x7zS-rwl.js";import{b as ta}from"../chunks/CDEW-RGa.js";import{s as ht}from"../chunks/CnvLdIrB.js";const ra=()=>performance.now(),We={tick:n=>requestAnimationFrame(n),now:()=>ra(),tasks:new Set};function fr(){const n=We.now();We.tasks.forEach(s=>{s.c(n)||(We.tasks.delete(s),s.f())}),We.tasks.size!==0&&We.tick(fr)}function aa(n){let s;return We.tasks.size===0&&We.tick(fr),{promise:new Promise(a=>{We.tasks.add(s={c:n,f:a})}),abort(){We.tasks.delete(s)}}}function Ot(n,s){Jr(()=>{n.dispatchEvent(new CustomEvent(s))})}function sa(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const s=n.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function ar(n){const s={},a=n.split(";");for(const l of a){const[h,p]=l.split(":");if(!h||p===void 0)break;const _=sa(h.trim());s[_]=p.trim()}return s}const ia=n=>n;function sr(n,s,a){var l=Yr,h,p,_,E=null;l.a??(l.a={element:n,measure(){h=this.element.getBoundingClientRect()},apply(){if(_==null||_.abort(),p=this.element.getBoundingClientRect(),h.left!==p.left||h.right!==p.right||h.top!==p.top||h.bottom!==p.bottom){const ee=s()(this.element,{from:h,to:p},a==null?void 0:a());_=At(this.element,ee,void 0,1,()=>{_==null||_.abort(),_=void 0})}},fix(){if(!n.getAnimations().length){var{position:ee,width:u,height:D}=getComputedStyle(n);if(ee!=="absolute"&&ee!=="fixed"){var C=n.style;E={position:C.position,width:C.width,height:C.height,transform:C.transform},C.position="absolute",C.width=u,C.height=D;var O=n.getBoundingClientRect();if(h.left!==O.left||h.top!==O.top){var M=`translate(${h.left-O.left}px, ${h.top-O.top}px)`;C.transform=C.transform?`${C.transform} ${M}`:M}}}},unfix(){if(E){var ee=n.style;ee.position=E.position,ee.width=E.width,ee.height=E.height,ee.transform=E.transform}}}),l.a.element=n}function hr(n,s,a,l){var h=(n&qr)!==0,p="both",_,E=s.inert,ee=s.style.overflow,u,D;function C(){var B=Hr,b=er;tr(null),rr(null);try{return _??(_=a()(s,(l==null?void 0:l())??{},{direction:p}))}finally{tr(B),rr(b)}}var O={is_global:h,in(){s.inert=E,Ot(s,"introstart"),u=At(s,C(),D,1,()=>{Ot(s,"introend"),u==null||u.abort(),u=_=void 0,s.style.overflow=ee})},out(B){s.inert=!0,Ot(s,"outrostart"),D=At(s,C(),u,0,()=>{Ot(s,"outroend"),B==null||B()})},stop:()=>{u==null||u.abort(),D==null||D.abort()}},M=er;if((M.transitions??(M.transitions=[])).push(O),Kr){var X=h;if(!X){for(var ae=M.parent;ae&&(ae.f&zr)!==0;)for(;(ae=ae.parent)&&(ae.f&jr)===0;);X=!ae||(ae.f&Nr)!==0}X&&qt(()=>{dr(()=>O.in())})}}function At(n,s,a,l,h){var p=l===1;if(Mr(s)){var _,E=!1;return Fr(()=>{if(!E){var B=s({direction:p?"in":"out"});_=At(n,B,a,l,h)}}),{abort:()=>{E=!0,_==null||_.abort()},deactivate:()=>_.deactivate(),reset:()=>_.reset(),t:()=>_.t()}}if(a==null||a.deactivate(),!(s!=null&&s.duration))return h(),{abort:qe,deactivate:qe,reset:qe,t:()=>l};const{delay:ee=0,css:u,tick:D,easing:C=ia}=s;var O=[];if(p&&a===void 0&&(D&&D(0,1),u)){var M=ar(u(0,1));O.push(M,M)}var X=()=>1-l,ae=n.animate(O,{duration:ee});return ae.onfinish=()=>{var B=(a==null?void 0:a.t())??1-l;a==null||a.abort();var b=l-B,L=s.duration*Math.abs(b),W=[];if(L>0){var ce=!1;if(u)for(var te=Math.ceil(L/16.666666666666668),re=0;re<=te;re+=1){var q=B+b*C(re/te),r=ar(u(q,1-q));W.push(r),ce||(ce=r.overflow==="hidden")}ce&&(n.style.overflow="hidden"),X=()=>{var t=ae.currentTime;return B+b*C(t/L)},D&&aa(()=>{if(ae.playState!=="running")return!1;var t=X();return D(t,1-t),!0})}ae=n.animate(W,{duration:L,fill:"forwards"}),ae.onfinish=()=>{X=()=>l,D==null||D(l,1-l),h()}},{abort:()=>{ae&&(ae.cancel(),ae.effect=null,ae.onfinish=qe)},deactivate:()=>{h=qe},reset:()=>{l===0&&(D==null||D(1,0))},t:()=>X()}}function Pt(n,s,a){if(n.multiple)return oa(n,s);for(var l of n.options){var h=wt(l);if(Vr(h,s)){l.selected=!0;return}}(!a||s!==void 0)&&(n.selectedIndex=-1)}function pr(n,s){let a=!0;qt(()=>{s&&Pt(n,dr(s),a),a=!1;var l=new MutationObserver(()=>{var h=n.__value;Pt(n,h)});return l.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function na(n,s,a=s){var l=!0;Gr(n,"change",h=>{var p=h?"[selected]":":checked",_;if(n.multiple)_=[].map.call(n.querySelectorAll(p),wt);else{var E=n.querySelector(p)??n.querySelector("option:not([disabled])");_=E&&wt(E)}a(_)}),qt(()=>{var h=s();if(Pt(n,h,l),l&&h===void 0){var p=n.querySelector(":checked");p!==null&&(h=wt(p),a(h))}n.__value=h,l=!1}),pr(n)}function oa(n,s){for(var a of n.options)a.selected=~s.indexOf(wt(a))}function wt(n){return"__value"in n?n.__value:n.value}function kt(n){return function(...s){var a=s[0];return a.stopPropagation(),n==null?void 0:n.apply(this,s)}}function la(n,s){var p;var a=(p=n.$$events)==null?void 0:p[s.type],l=Br(a)?a.slice():a==null?[]:[a];for(var h of l)h.call(this,s)}function da(n,s){je(s,!0);let a=vt(s,["$$slots","$$events","$$legacy"]);ut(n,ct({name:"funnel"},()=>a,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:(h,p)=>{var _=rt(),E=Ge(_);ht(E,()=>s.children??qe),T(h,_)},$$slots:{default:!0}})),Ne()}function ca(n,s){je(s,!0);let a=vt(s,["$$slots","$$events","$$legacy"]);ut(n,ct({name:"layout-grid"},()=>a,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(h,p)=>{var _=rt(),E=Ge(_);ht(E,()=>s.children??qe),T(h,_)},$$slots:{default:!0}})),Ne()}function va(n,s){je(s,!0);let a=vt(s,["$$slots","$$events","$$legacy"]);ut(n,ct({name:"list"},()=>a,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(h,p)=>{var _=rt(),E=Ge(_);ht(E,()=>s.children??qe),T(h,_)},$$slots:{default:!0}})),Ne()}function ir(n,s){je(s,!0);let a=vt(s,["$$slots","$$events","$$legacy"]);ut(n,ct({name:"printer"},()=>a,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(h,p)=>{var _=rt(),E=Ge(_);ht(E,()=>s.children??qe),T(h,_)},$$slots:{default:!0}})),Ne()}function _r(n,s){je(s,!0);let a=vt(s,["$$slots","$$events","$$legacy"]);ut(n,ct({name:"triangle-alert"},()=>a,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(h,p)=>{var _=rt(),E=Ge(_);ht(E,()=>s.children??qe),T(h,_)},$$slots:{default:!0}})),Ne()}function ua(n,s){je(s,!0);let a=vt(s,["$$slots","$$events","$$legacy"]);ut(n,ct({name:"upload"},()=>a,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(h,p)=>{var _=rt(),E=Ge(_);ht(E,()=>s.children??qe),T(h,_)},$$slots:{default:!0}})),Ne()}const fa=()=>{const n=ea;return{page:{subscribe:n.page.subscribe},navigating:{subscribe:n.navigating.subscribe},updated:n.updated}},ha={subscribe(n){return fa().page.subscribe(n)}};var pa=Z("<option> </option>"),_a=Z('<div class="performer-filter svelte-9vn570"><label for="performer-select" class="svelte-9vn570">Filter by Performer</label> <select id="performer-select" class="svelte-9vn570"><option>All Performers</option><!></select></div>');function nr(n,s){je(s,!1);let a=He(s,"performers",24,()=>[]),l=He(s,"selectedPerformer",12,null);const h=Ct();function p(C){const O=C.target,M=O.value===""?null:O.value;l(M),h("select",{performer:M})}ft();var _=_a(),E=d(o(_),2);pr(E,()=>l()||"");var ee,u=o(E);u.value=u.__value="";var D=d(u);Je(D,1,a,xt,(C,O)=>{var M=pa(),X={},ae=o(M,!0);i(M),de(()=>{X!==(X=e(O))&&(M.value=(M.__value=e(O))??""),G(ae,e(O))}),T(C,M)}),i(E),i(_),de(()=>{ee!==(ee=l()||"")&&(E.value=(E.__value=l()||"")??"",Pt(E,l()||""))}),Y("change",E,p),T(n,_),Ne()}function ga(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tt={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var ba=Tt.exports,or;function ma(){return or||(or=1,function(n,s){((a,l)=>{n.exports=l()})(ba,function a(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},h,p=!l.document&&!!l.postMessage,_=l.IS_PAPA_WORKER||!1,E={},ee=0,u={};function D(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var c=te(t);c.chunkSize=parseInt(c.chunkSize),t.step||t.chunk||(c.chunkSize=null),this._handle=new ae(c),(this._handle.streamer=this)._config=c}).call(this,r),this.parseChunk=function(t,c){var x=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<x){let I=this._config.newline;I||(y=this._config.quoteChar||'"',I=this._handle.guessLineEndings(t,y)),t=[...t.split(I).slice(x)].join(I)}this.isFirstChunk&&q(this._config.beforeFirstChunk)&&(y=this._config.beforeFirstChunk(t))!==void 0&&(t=y),this.isFirstChunk=!1,this._halted=!1;var x=this._partialLine+t,y=(this._partialLine="",this._handle.parse(x,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=y.meta.cursor,x=(this._finished||(this._partialLine=x.substring(t-this._baseIndex),this._baseIndex=t),y&&y.data&&(this._rowCount+=y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),_)l.postMessage({results:y,workerId:u.WORKER_ID,finished:x});else if(q(this._config.chunk)&&!c){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!x||!q(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),x||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(t){q(this._config.error)?this._config.error(t):_&&this._config.error&&l.postMessage({workerId:u.WORKER_ID,error:t,finished:!1})}}function C(r){var t;(r=r||{}).chunkSize||(r.chunkSize=u.RemoteChunkSize),D.call(this,r),this._nextChunk=p?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),p||(t.onload=re(this._chunkLoaded,this),t.onerror=re(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!p),this._config.downloadRequestHeaders){var c,x=this._config.downloadRequestHeaders;for(c in x)t.setRequestHeader(c,x[c])}var y;this._config.chunkSize&&(y=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+y));try{t.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}p&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(c=>(c=c.getResponseHeader("Content-Range"))!==null?parseInt(c.substring(c.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(c){c=t.statusText||c,this._sendError(new Error(c))}}function O(r){(r=r||{}).chunkSize||(r.chunkSize=u.LocalChunkSize),D.call(this,r);var t,c,x=typeof FileReader<"u";this.stream=function(y){this._input=y,c=y.slice||y.webkitSlice||y.mozSlice,x?((t=new FileReader).onload=re(this._chunkLoaded,this),t.onerror=re(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input,I=(this._config.chunkSize&&(I=Math.min(this._start+this._config.chunkSize,this._input.size),y=c.call(y,this._start,I)),t.readAsText(y,this._config.encoding));x||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(t.error)}}function M(r){var t;D.call(this,r=r||{}),this.stream=function(c){return t=c,this._nextChunk()},this._nextChunk=function(){var c,x;if(!this._finished)return c=this._config.chunkSize,t=c?(x=t.substring(0,c),t.substring(c)):(x=t,""),this._finished=!t,this.parseChunk(x)}}function X(r){D.call(this,r=r||{});var t=[],c=!0,x=!1;this.pause=function(){D.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){D.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){x&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):c=!0},this._streamData=re(function(y){try{t.push(typeof y=="string"?y:y.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(I){this._streamError(I)}},this),this._streamError=re(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=re(function(){this._streamCleanUp(),x=!0,this._streamData("")},this),this._streamCleanUp=re(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ae(r){var t,c,x,y,I=Math.pow(2,53),ie=-I,ye=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ge=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,A=this,K=0,R=0,ne=!1,P=!1,F=[],w={data:[],errors:[],meta:{}};function v(J){return r.skipEmptyLines==="greedy"?J.join("").trim()==="":J.length===1&&J[0].length===0}function N(){if(w&&x&&(pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),x=!1),r.skipEmptyLines&&(w.data=w.data.filter(function(f){return!v(f)})),ve()){let f=function(m,j){q(r.transformHeader)&&(m=r.transformHeader(m,j)),F.push(m)};if(w)if(Array.isArray(w.data[0])){for(var J=0;ve()&&J<w.data.length;J++)w.data[J].forEach(f);w.data.splice(0,1)}else w.data.forEach(f)}function se(f,m){for(var j=r.header?{}:[],z=0;z<f.length;z++){var V=z,S=f[z],S=((Q,k)=>(U=>(r.dynamicTypingFunction&&r.dynamicTyping[U]===void 0&&(r.dynamicTyping[U]=r.dynamicTypingFunction(U)),(r.dynamicTyping[U]||r.dynamicTyping)===!0))(Q)?k==="true"||k==="TRUE"||k!=="false"&&k!=="FALSE"&&((U=>{if(ye.test(U)&&(U=parseFloat(U),ie<U&&U<I))return 1})(k)?parseFloat(k):ge.test(k)?new Date(k):k===""?null:k):k)(V=r.header?z>=F.length?"__parsed_extra":F[z]:V,S=r.transform?r.transform(S,V):S);V==="__parsed_extra"?(j[V]=j[V]||[],j[V].push(S)):j[V]=S}return r.header&&(z>F.length?pe("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+z,R+m):z<F.length&&pe("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+z,R+m)),j}var g;w&&(r.header||r.dynamicTyping||r.transform)&&(g=1,!w.data.length||Array.isArray(w.data[0])?(w.data=w.data.map(se),g=w.data.length):w.data=se(w.data,0),r.header&&w.meta&&(w.meta.fields=F),R+=g)}function ve(){return r.header&&F.length===0}function pe(J,se,g,f){J={type:J,code:se,message:g},f!==void 0&&(J.row=f),w.errors.push(J)}q(r.step)&&(y=r.step,r.step=function(J){w=J,ve()?N():(N(),w.data.length!==0&&(K+=J.data.length,r.preview&&K>r.preview?c.abort():(w.data=w.data[0],y(w,A))))}),this.parse=function(J,se,g){var f=r.quoteChar||'"',f=(r.newline||(r.newline=this.guessLineEndings(J,f)),x=!1,r.delimiter?q(r.delimiter)&&(r.delimiter=r.delimiter(J),w.meta.delimiter=r.delimiter):((f=((m,j,z,V,S)=>{var Q,k,U,we;S=S||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var _e=0;_e<S.length;_e++){for(var he,Te=S[_e],ue=0,Se=0,be=0,ke=(U=void 0,new b({comments:V,delimiter:Te,newline:j,preview:10}).parse(m)),Oe=0;Oe<ke.data.length;Oe++)z&&v(ke.data[Oe])?be++:(he=ke.data[Oe].length,Se+=he,U===void 0?U=he:0<he&&(ue+=Math.abs(he-U),U=he));0<ke.data.length&&(Se/=ke.data.length-be),(k===void 0||ue<=k)&&(we===void 0||we<Se)&&1.99<Se&&(k=ue,Q=Te,we=Se)}return{successful:!!(r.delimiter=Q),bestDelimiter:Q}})(J,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess)).successful?r.delimiter=f.bestDelimiter:(x=!0,r.delimiter=u.DefaultDelimiter),w.meta.delimiter=r.delimiter),te(r));return r.preview&&r.header&&f.preview++,t=J,c=new b(f),w=c.parse(t,se,g),N(),ne?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return ne},this.pause=function(){ne=!0,c.abort(),t=q(r.chunk)?"":t.substring(c.getCharIndex())},this.resume=function(){A.streamer._halted?(ne=!1,A.streamer.parseChunk(t,!0)):setTimeout(A.resume,3)},this.aborted=function(){return P},this.abort=function(){P=!0,c.abort(),w.meta.aborted=!0,q(r.complete)&&r.complete(w),t=""},this.guessLineEndings=function(m,f){m=m.substring(0,1048576);var f=new RegExp(B(f)+"([^]*?)"+B(f),"gm"),g=(m=m.replace(f,"")).split("\r"),f=m.split(`
`),m=1<f.length&&f[0].length<g[0].length;if(g.length===1||m)return`
`;for(var j=0,z=0;z<g.length;z++)g[z][0]===`
`&&j++;return j>=g.length/2?`\r
`:"\r"}}function B(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(r){var t=(r=r||{}).delimiter,c=r.newline,x=r.comments,y=r.step,I=r.preview,ie=r.fastMode,ye=null,ge=!1,A=r.quoteChar==null?'"':r.quoteChar,K=A;if(r.escapeChar!==void 0&&(K=r.escapeChar),(typeof t!="string"||-1<u.BAD_DELIMITERS.indexOf(t))&&(t=","),x===t)throw new Error("Comment character same as delimiter");x===!0?x="#":(typeof x!="string"||-1<u.BAD_DELIMITERS.indexOf(x))&&(x=!1),c!==`
`&&c!=="\r"&&c!==`\r
`&&(c=`
`);var R=0,ne=!1;this.parse=function(P,F,w){if(typeof P!="string")throw new Error("Input must be a string");var v=P.length,N=t.length,ve=c.length,pe=x.length,J=q(y),se=[],g=[],f=[],m=R=0;if(!P)return ue();if(ie||ie!==!1&&P.indexOf(A)===-1){for(var j=P.split(c),z=0;z<j.length;z++){if(f=j[z],R+=f.length,z!==j.length-1)R+=c.length;else if(w)return ue();if(!x||f.substring(0,pe)!==x){if(J){if(se=[],we(f.split(t)),Se(),ne)return ue()}else we(f.split(t));if(I&&I<=z)return se=se.slice(0,I),ue(!0)}}return ue()}for(var V=P.indexOf(t,R),S=P.indexOf(c,R),Q=new RegExp(B(K)+B(A),"g"),k=P.indexOf(A,R);;)if(P[R]===A)for(k=R,R++;;){if((k=P.indexOf(A,k+1))===-1)return w||g.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:se.length,index:R}),he();if(k===v-1)return he(P.substring(R,k).replace(Q,A));if(A===K&&P[k+1]===K)k++;else if(A===K||k===0||P[k-1]!==K){V!==-1&&V<k+1&&(V=P.indexOf(t,k+1));var U=_e((S=S!==-1&&S<k+1?P.indexOf(c,k+1):S)===-1?V:Math.min(V,S));if(P.substr(k+1+U,N)===t){f.push(P.substring(R,k).replace(Q,A)),P[R=k+1+U+N]!==A&&(k=P.indexOf(A,R)),V=P.indexOf(t,R),S=P.indexOf(c,R);break}if(U=_e(S),P.substring(k+1+U,k+1+U+ve)===c){if(f.push(P.substring(R,k).replace(Q,A)),Te(k+1+U+ve),V=P.indexOf(t,R),k=P.indexOf(A,R),J&&(Se(),ne))return ue();if(I&&se.length>=I)return ue(!0);break}g.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:se.length,index:R}),k++}}else if(x&&f.length===0&&P.substring(R,R+pe)===x){if(S===-1)return ue();R=S+ve,S=P.indexOf(c,R),V=P.indexOf(t,R)}else if(V!==-1&&(V<S||S===-1))f.push(P.substring(R,V)),R=V+N,V=P.indexOf(t,R);else{if(S===-1)break;if(f.push(P.substring(R,S)),Te(S+ve),J&&(Se(),ne))return ue();if(I&&se.length>=I)return ue(!0)}return he();function we(be){se.push(be),m=R}function _e(be){var ke=0;return ke=be!==-1&&(be=P.substring(k+1,be))&&be.trim()===""?be.length:ke}function he(be){return w||(be===void 0&&(be=P.substring(R)),f.push(be),R=v,we(f),J&&Se()),ue()}function Te(be){R=be,we(f),f=[],S=P.indexOf(c,R)}function ue(be){if(r.header&&!F&&se.length&&!ge){var ke=se[0],Oe={},Qe=new Set(ke);let St=!1;for(let Ke=0;Ke<ke.length;Ke++){let Le=ke[Ke];if(Oe[Le=q(r.transformHeader)?r.transformHeader(Le,Ke):Le]){let Ve,at=Oe[Le];for(;Ve=Le+"_"+at,at++,Qe.has(Ve););Qe.add(Ve),ke[Ke]=Ve,Oe[Le]++,St=!0,(ye=ye===null?{}:ye)[Ve]=Le}else Oe[Le]=1,ke[Ke]=Le;Qe.add(Le)}St&&console.warn("Duplicate headers found and renamed."),ge=!0}return{data:se,errors:g,meta:{delimiter:t,linebreak:c,aborted:ne,truncated:!!be,cursor:m+(F||0),renamedHeaders:ye}}}function Se(){y(ue()),se=[],g=[]}},this.abort=function(){ne=!0},this.getCharIndex=function(){return R}}function L(r){var t=r.data,c=E[t.workerId],x=!1;if(t.error)c.userError(t.error,t.file);else if(t.results&&t.results.data){var y={abort:function(){x=!0,W(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(q(c.userStep)){for(var I=0;I<t.results.data.length&&(c.userStep({data:t.results.data[I],errors:t.results.errors,meta:t.results.meta},y),!x);I++);delete t.results}else q(c.userChunk)&&(c.userChunk(t.results,y,t.file),delete t.results)}t.finished&&!x&&W(t.workerId,t.results)}function W(r,t){var c=E[r];q(c.userComplete)&&c.userComplete(t),c.terminate(),delete E[r]}function ce(){throw new Error("Not implemented.")}function te(r){if(typeof r!="object"||r===null)return r;var t,c=Array.isArray(r)?[]:{};for(t in r)c[t]=te(r[t]);return c}function re(r,t){return function(){r.apply(t,arguments)}}function q(r){return typeof r=="function"}return u.parse=function(r,t){var c=(t=t||{}).dynamicTyping||!1;if(q(c)&&(t.dynamicTypingFunction=c,c={}),t.dynamicTyping=c,t.transform=!!q(t.transform)&&t.transform,!t.worker||!u.WORKERS_SUPPORTED)return c=null,u.NODE_STREAM_INPUT,typeof r=="string"?(r=(x=>x.charCodeAt(0)!==65279?x:x.slice(1))(r),c=new(t.download?C:M)(t)):r.readable===!0&&q(r.read)&&q(r.on)?c=new X(t):(l.File&&r instanceof File||r instanceof Object)&&(c=new O(t)),c.stream(r);(c=(()=>{var x;return!!u.WORKERS_SUPPORTED&&(x=(()=>{var y=l.URL||l.webkitURL||null,I=a.toString();return u.BLOB_URL||(u.BLOB_URL=y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",I,")();"],{type:"text/javascript"})))})(),(x=new l.Worker(x)).onmessage=L,x.id=ee++,E[x.id]=x)})()).userStep=t.step,c.userChunk=t.chunk,c.userComplete=t.complete,c.userError=t.error,t.step=q(t.step),t.chunk=q(t.chunk),t.complete=q(t.complete),t.error=q(t.error),delete t.worker,c.postMessage({input:r,config:t,workerId:c.id})},u.unparse=function(r,t){var c=!1,x=!0,y=",",I=`\r
`,ie='"',ye=ie+ie,ge=!1,A=null,K=!1,R=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||u.BAD_DELIMITERS.filter(function(F){return t.delimiter.indexOf(F)!==-1}).length||(y=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(c=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(ge=t.skipEmptyLines),typeof t.newline=="string"&&(I=t.newline),typeof t.quoteChar=="string"&&(ie=t.quoteChar),typeof t.header=="boolean"&&(x=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");A=t.columns}t.escapeChar!==void 0&&(ye=t.escapeChar+ie),t.escapeFormulae instanceof RegExp?K=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(K=/^[=+\-@\t\r].*$/)}})(),new RegExp(B(ie),"g"));if(typeof r=="string"&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return ne(null,r,ge);if(typeof r[0]=="object")return ne(A||Object.keys(r[0]),r,ge)}else if(typeof r=="object")return typeof r.data=="string"&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||A),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:typeof r.data[0]=="object"?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||typeof r.data[0]=="object"||(r.data=[r.data])),ne(r.fields||[],r.data||[],ge);throw new Error("Unable to serialize unrecognized input");function ne(F,w,v){var N="",ve=(typeof F=="string"&&(F=JSON.parse(F)),typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(F)&&0<F.length),pe=!Array.isArray(w[0]);if(ve&&x){for(var J=0;J<F.length;J++)0<J&&(N+=y),N+=P(F[J],J);0<w.length&&(N+=I)}for(var se=0;se<w.length;se++){var g=(ve?F:w[se]).length,f=!1,m=ve?Object.keys(w[se]).length===0:w[se].length===0;if(v&&!ve&&(f=v==="greedy"?w[se].join("").trim()==="":w[se].length===1&&w[se][0].length===0),v==="greedy"&&ve){for(var j=[],z=0;z<g;z++){var V=pe?F[z]:z;j.push(w[se][V])}f=j.join("").trim()===""}if(!f){for(var S=0;S<g;S++){0<S&&!m&&(N+=y);var Q=ve&&pe?F[S]:S;N+=P(w[se][Q],S)}se<w.length-1&&(!v||0<g&&!m)&&(N+=I)}}return N}function P(F,w){var v,N;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(N=!1,K&&typeof F=="string"&&K.test(F)&&(F="'"+F,N=!0),v=F.toString().replace(R,ye),(N=N||c===!0||typeof c=="function"&&c(F,w)||Array.isArray(c)&&c[w]||((ve,pe)=>{for(var J=0;J<pe.length;J++)if(-1<ve.indexOf(pe[J]))return!0;return!1})(v,u.BAD_DELIMITERS)||-1<v.indexOf(y)||v.charAt(0)===" "||v.charAt(v.length-1)===" ")?ie+v+ie:v)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!p&&!!l.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=b,u.ParserHandle=ae,u.NetworkStreamer=C,u.FileStreamer=O,u.StringStreamer=M,u.ReadableStreamStreamer=X,l.jQuery&&((h=l.jQuery).fn.parse=function(r){var t=r.config||{},c=[];return this.each(function(I){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var ie=0;ie<this.files.length;ie++)c.push({file:this.files[ie],inputElem:this,instanceConfig:h.extend({},t)})}),x(),this;function x(){if(c.length===0)q(r.complete)&&r.complete();else{var I,ie,ye,ge,A=c[0];if(q(r.before)){var K=r.before(A.file,A.inputElem);if(typeof K=="object"){if(K.action==="abort")return I="AbortError",ie=A.file,ye=A.inputElem,ge=K.reason,void(q(r.error)&&r.error({name:I},ie,ye,ge));if(K.action==="skip")return void y();typeof K.config=="object"&&(A.instanceConfig=h.extend(A.instanceConfig,K.config))}else if(K==="skip")return void y()}var R=A.instanceConfig.complete;A.instanceConfig.complete=function(ne){q(R)&&R(ne,A.file,A.inputElem),y()},u.parse(A.file,A.instanceConfig)}}function y(){c.splice(0,1),x()}}),_&&(l.onmessage=function(r){r=r.data,u.WORKER_ID===void 0&&r&&(u.WORKER_ID=r.workerId),typeof r.input=="string"?l.postMessage({workerId:u.WORKER_ID,results:u.parse(r.input,r.config),finished:!0}):(l.File&&r.input instanceof File||r.input instanceof Object)&&(r=u.parse(r.input,r.config))&&l.postMessage({workerId:u.WORKER_ID,results:r,finished:!0})}),(C.prototype=Object.create(D.prototype)).constructor=C,(O.prototype=Object.create(D.prototype)).constructor=O,(M.prototype=Object.create(M.prototype)).constructor=M,(X.prototype=Object.create(D.prototype)).constructor=X,u})}(Tt)),Tt.exports}var ya=ma();const wa=ga(ya);function ka(n){const s=wa.parse(n,{header:!0,skipEmptyLines:!0,transformHeader:a=>a.trim().toLowerCase(),dynamicTyping:!1,transform:a=>a.trim()});return s.errors.length>0?(console.error("CSV Parsing Errors with Papaparse:",s.errors),s.data.filter(l=>l&&typeof l=="object"&&Object.keys(l).length>0)):s.data.filter(a=>a&&typeof a=="object"&&Object.keys(a).length>0)}function xa(n){const s={};return n.forEach(a=>{var C;const l=a.title;if(!l)return;const h=[],p=Object.keys(a),_=p.findIndex(O=>O.toLowerCase()==="casted");if(_!==-1)for(let O=_+1;O<p.length;O++){const M=p[O].trim(),X=(C=a[p[O]])==null?void 0:C.trim();M&&X&&h.push({character_name:X,performer_name:M})}const E=a.time||a.duration||"5:00",[ee,u]=E.split(":").map(Number),D=ee+(u||0)/60;s[l]={id:crypto.randomUUID(),title:l,description:a.description||"",duration:Math.ceil(D),chars:parseInt(a.chars||"0",10),casted:h.length,locked:!1,character_performers:h.map(O=>({character_name:O.character_name,performer_name:O.performer_name})),raw_data:a}}),Object.values(s)}async function Ca(n){return new Promise((s,a)=>{const l=new FileReader;l.onload=h=>{var p;try{const _=(p=h.target)==null?void 0:p.result,E=ka(_);s(E)}catch(_){a(_)}},l.onerror=()=>a(l.error),l.readAsText(n)})}var Sa=Z('<div><h2 class="text-lg font-medium text-gray-900 mb-4">Import Running Order</h2> <div class="space-y-6"><div class="flex items-center justify-center w-full"><label for="csv-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"><div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg> <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p> <p class="text-xs text-gray-500">CSV files only</p></div> <input id="csv-file" type="file" accept=".csv" class="hidden"></label></div> <button type="button" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-2">Upload CSV</button></div></div>');function Ea(n,s){je(s,!1),He(s,"showId",8);const a=Ct();let l=me(),h=me(!1);function p(b){const L=b.map(t=>t.toLowerCase().trim());if(["sketch","cues","props","costume","stage dressing"].every(t=>L.includes(t)))return"techDetails";const te=["title"],re=["time","chars","casted","rocio","jacob","adrian","vera","max","gusta","richie","harry","connor","kieran","chiara","lari","theresa","cliff","tim"],q=te.every(t=>L.includes(t)),r=re.some(t=>L.includes(t));return q&&r?"sketches":"unknown"}async function _(){const b=e(l).files;if(!(!b||b.length===0))try{const L=b[0],W=await Ca(L);if(!W||W.length===0){alert("CSV file is empty or could not be processed."),mt(l,e(l).value="");return}const ce=Object.keys(W[0]),te=p(ce);if(te==="unknown"){alert('Could not automatically determine CSV type. Please check the file headers and format. Expected headers for sketches: "title" and at least one of "Time", "chars", etc. Expected headers for tech details: "Sketch", "Cues", "Props", "Costume", "Stage Dressing".'),mt(l,e(l).value="");return}let re;te==="sketches"?re=xa(W):re=W,a("import",{importType:te,data:re}),mt(l,e(l).value="")}catch(L){console.error("Error importing CSV:",L),alert("Error importing CSV file. Please check the file format and content."),mt(l,e(l).value="")}}function E(b){b.preventDefault(),$(h,!0)}function ee(b){b.preventDefault(),$(h,!1)}function u(b){var W;b.preventDefault(),$(h,!1);const L=(W=b.dataTransfer)==null?void 0:W.files;L&&L.length>0&&(mt(l,e(l).files=L),_())}ft();var D=Sa();let C;var O=d(o(D),2),M=o(O),X=o(M),ae=d(o(X),2);ta(ae,b=>$(l,b),()=>e(l)),i(X),i(M);var B=d(M,2);B.__click=_,i(O),i(D),de(b=>C=$e(D,1,"bg-white p-6 rounded-lg shadow-sm",null,C,b),[()=>({"border-2":e(h),"border-dashed":e(h),"border-blue-500":e(h)})],Ue),Y("dragover",D,b=>E(b)),Y("dragleave",D,b=>ee(b)),Y("drop",D,b=>u(b)),T(n,D),Ne()}vr(["click"]);const $a=n=>n;function Da(n){const s=n-1;return s*s*s+1}function Oa(n,{delay:s=0,duration:a=400,easing:l=$a}={}){const h=+getComputedStyle(n).opacity;return{delay:s,duration:a,easing:l,css:p=>`opacity: ${p*h}`}}function Ra(n,{delay:s=0,duration:a=400,easing:l=Da,axis:h="y"}={}){const p=getComputedStyle(n),_=+p.opacity,E=h==="y"?"height":"width",ee=parseFloat(p[E]),u=h==="y"?["top","bottom"]:["left","right"],D=u.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),C=parseFloat(p[`padding${D[0]}`]),O=parseFloat(p[`padding${D[1]}`]),M=parseFloat(p[`margin${D[0]}`]),X=parseFloat(p[`margin${D[1]}`]),ae=parseFloat(p[`border${D[0]}Width`]),B=parseFloat(p[`border${D[1]}Width`]);return{delay:s,duration:a,easing:l,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*_};${E}: ${b*ee}px;padding-${u[0]}: ${b*C}px;padding-${u[1]}: ${b*O}px;margin-${u[0]}: ${b*M}px;margin-${u[1]}: ${b*X}px;border-${u[0]}-width: ${b*ae}px;border-${u[1]}-width: ${b*B}px;min-${E}: 0`}}var Ta=It('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),Aa=It('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),Pa=Z('<span class="text-amber-500"> </span>'),Ia=Z('<li class="flex justify-between"><span class="font-medium text-gray-700"> </span> <span class="text-gray-500"> </span></li>'),La=Z('<div class="cast-list px-4 pb-3 pt-1 bg-gray-50"><ul class="text-xs space-y-1"></ul></div>'),Ma=Z('<div class="border-t border-gray-200 px-4 py-2"><button class="cast-toggle text-sm text-blue-600 hover:text-blue-800 font-medium focus:outline-none w-full text-left flex justify-between items-center"><span> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!>',1),Fa=Z('<div tabindex="0" role="button" style="min-height: 150px;"><div class="p-4 flex-grow"><div class="flex justify-between items-center mb-2"><div class="flex items-center gap-2"><h3 class="text-lg font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center gap-0.5"><button><!></button> <button class="action-button delete-button svelte-1qd7kif" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <p class="description text-sm text-gray-600 mb-3 line-clamp-1"> </p> <div class="stats text-xs text-gray-500 space-x-3 mb-3"><span> </span> <span> </span> <span> </span> <!></div></div> <!></div>');function za(n,s){je(s,!1);let a=He(s,"sketch",8),l=He(s,"isSelected",8,!1),h=He(s,"showCharacterWarning",8,!1),p=me(!1);const _=Ct();function E(v){v.target instanceof HTMLElement&&v.target.closest("button, .cast-toggle")||v.target instanceof HTMLElement&&v.target.closest(".card")&&_("select",{sketch:a()})}function ee(v){v.stopPropagation(),_("lock",{id:a().id,locked:!a().locked})}function u(v){v.stopPropagation(),_("delete",{id:a().id})}function D(v){v.stopPropagation(),$(p,!e(p))}function C(v){(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),v.target instanceof HTMLElement&&v.target.closest("button, .cast-toggle")?v.target.closest(".cast-toggle")&&D(v):E(v))}ft();var O=Fa(),M=o(O),X=o(M),ae=o(X),B=o(ae),b=o(B,!0);i(B);var L=d(B,2);{var W=v=>{_r(v,{class:"warning-icon",size:16})};le(L,v=>{h()&&v(W)})}i(ae);var ce=d(ae,2),te=o(ce);let re;var q=o(te);{var r=v=>{var N=Ta();T(v,N)},t=v=>{var N=Aa();T(v,N)};le(q,v=>{a().locked?v(r):v(t,!1)})}i(te);var c=d(te,2);i(ce),i(X);var x=d(X,2),y=o(x,!0);i(x);var I=d(x,2),ie=o(I),ye=o(ie);i(ie);var ge=d(ie,2),A=o(ge);i(ge);var K=d(ge,2),R=o(K);i(K);var ne=d(K,2);{var P=v=>{var N=Pa(),ve=o(N);i(N),de(()=>{var pe;return G(ve,`(${(((pe=a().character_performers)==null?void 0:pe.length)||0)??""}/${a().chars??""} characters)`)}),T(v,N)};le(ne,v=>{h()&&v(P)})}i(I),i(M);var F=d(M,2);{var w=v=>{var N=Ma(),ve=Ge(N),pe=o(ve),J=o(pe),se=o(J);i(J);var g=d(J,2);i(pe),i(ve);var f=d(ve,2);{var m=j=>{var z=La(),V=o(z);Je(V,5,()=>a().character_performers,S=>S.id||S.character_name+S.performer_name,(S,Q)=>{var k=Ia(),U=o(k),we=o(U,!0);i(U);var _e=d(U,2),he=o(_e,!0);i(_e),i(k),de(()=>{G(we,e(Q).character_name),G(he,e(Q).performer_name)}),T(S,k)}),i(V),i(z),hr(3,z,()=>Ra,()=>({duration:200})),T(j,z)};le(f,j=>{e(p)&&j(m)})}de(()=>{ze(pe,"aria-expanded",e(p)),G(se,`Show Cast (${a().character_performers.length??""})`),$e(g,0,`w-4 h-4 transform transition-transform duration-200 ${e(p)?"rotate-180":""}`)}),Y("click",pe,D),T(v,N)};le(F,v=>{a().character_performers&&a().character_performers.length>0&&v(w)})}i(O),de(v=>{$e(O,1,`card ${l()?"selected border-blue-500":"border-gray-200"} ${a().locked?"locked":""} border bg-white rounded-lg shadow hover:shadow-md transition-all duration-200 flex flex-col`,"svelte-1qd7kif"),ze(O,"aria-label",`View sketch details for ${a().title??""}`),ze(B,"title",a().title),G(b,a().title),re=$e(te,1,"action-button lock-button svelte-1qd7kif",null,re,v),ze(te,"aria-label",a().locked?"Unlock sketch":"Lock sketch"),ze(te,"title",a().locked?"Unlock sketch":"Lock sketch"),ze(x,"title",a().description||"A sketch waiting for its story..."),G(y,a().description||"A sketch waiting for its story..."),G(ye,`Duration: ${a().duration??""} min`),G(A,`Chars: ${a().chars??""}`),G(R,`Casted: ${a().casted??""}`)},[()=>({locked:a().locked})],Ue),Y("click",te,kt(ee)),Y("click",c,kt(u)),Y("click",O,E),Y("keydown",O,C),T(n,O),Ne()}function ja(n,s){$(s,!0)}function Na(n,s,a,l,h,p,_,E){$(s,!1),$(a,l().title),$(h,l().description),$(p,l().duration),$(_,l().chars),$(E,[...l().character_performers||[]])}function qa(n,s,a,l,h,p,_,E,ee){const u={...s(),title:e(a),description:e(l),duration:e(h),chars:e(p),casted:e(_).length,character_performers:e(_)};E("update",{sketch:u}),$(ee,!1)}var Ha=n=>n.stopPropagation(),Va=(n,s)=>n.key==="Enter"&&s(),Ba=(n,s,a)=>s(e(a).id),Ua=Z('<li class="svelte-9bbfpy"><span class="character svelte-9bbfpy"> </span> <span class="performer svelte-9bbfpy"> </span> <button type="button" class="remove-button svelte-9bbfpy">Ã—</button></li>'),Wa=Z('<div class="character-list svelte-9bbfpy"><h4>Current Assignments</h4> <ul class="svelte-9bbfpy"></ul></div>'),Ka=Z('<div class="edit-form svelte-9bbfpy"><div class="form-group svelte-9bbfpy"><label for="title" class="svelte-9bbfpy">Title</label> <input type="text" id="title" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="description" class="svelte-9bbfpy">Description</label> <textarea id="description" class="svelte-9bbfpy"></textarea></div> <div class="form-group svelte-9bbfpy"><label for="duration" class="svelte-9bbfpy">Duration (minutes)</label> <input type="number" id="duration" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="chars" class="svelte-9bbfpy">Number of Characters</label> <input type="number" id="chars" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label class="svelte-9bbfpy">Character Assignments</label> <div class="character-inputs svelte-9bbfpy"><input type="text" placeholder="Character name" class="svelte-9bbfpy"> <input type="text" placeholder="Performer name" class="svelte-9bbfpy"> <button type="button" class="svelte-9bbfpy">Add</button></div></div> <!> <div class="form-actions svelte-9bbfpy"><button type="button" class="svelte-9bbfpy">Cancel</button> <button type="button" class="svelte-9bbfpy">Save</button></div></div>'),Ja=Z('<p class="description svelte-9bbfpy"> </p>'),Ga=Z('<div class="cast-item svelte-9bbfpy"><span class="character-name svelte-9bbfpy"> </span> <span class="performer-name svelte-9bbfpy"> </span></div>'),Qa=Z('<div class="cast-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Cast</h4> <div class="cast-grid svelte-9bbfpy"></div></div>'),Za=Z('<div class="tech-grid svelte-9bbfpy"><div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Cues</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Props</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Costume</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Stage Dressing</span> <span class="tech-value svelte-9bbfpy"> </span></div></div>'),Xa=Z('<p class="no-tech-details svelte-9bbfpy">No tech details available for this sketch.</p>'),Ya=Z('<div class="view-mode svelte-9bbfpy"><div class="header svelte-9bbfpy"><h2 class="svelte-9bbfpy"> </h2> <button type="button" class="edit-button svelte-9bbfpy">Edit</button></div> <!> <div class="stats-container svelte-9bbfpy"><div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Duration</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Characters</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Casted</span> <span class="stat-value svelte-9bbfpy"> </span></div></div> <!> <div class="tech-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Tech Details</h4> <!></div></div>'),es=Z('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-start mb-4"><div class="flex items-center gap-4"><button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Back to show"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <h2 class="text-2xl font-bold text-gray-900"> </h2></div> <button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close details"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div></div></div>');function ts(n,s){je(s,!1);let a=He(s,"sketch",8);const l=Ct();let h=me(!1),p=me(a().title),_=me(a().description),E=me(a().duration),ee=me(a().chars),u=me(""),D=me(""),C=me([...a().character_performers||[]]);function O(){!e(u)||!e(D)||($(C,[...e(C),{id:crypto.randomUUID(),sketch_id:a().id,character_name:e(u),performer_name:e(D),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),$(u,""),$(D,""))}function M(y){$(C,e(C).filter(I=>I.id!==y))}function X(y){y.stopPropagation(),l("close")}function ae(y){y.key==="Escape"&&X(y)}ur(()=>(document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae))),ft();var B=es();B.__click=X;var b=o(B);b.__click=[Ha];var L=o(b),W=o(L),ce=o(W),te=o(ce);te.__click=X;var re=d(te,2),q=o(re,!0);i(re),i(ce);var r=d(ce,2);r.__click=X,i(W);var t=d(W,2);{var c=y=>{var I=Ka(),ie=o(I),ye=d(o(ie),2);yt(ye),i(ie);var ge=d(ie,2),A=d(o(ge),2);Qr(A),i(ge);var K=d(ge,2),R=d(o(K),2);yt(R),i(K);var ne=d(K,2),P=d(o(ne),2);yt(P),i(ne);var F=d(ne,2),w=d(o(F),2),v=o(w);yt(v);var N=d(v,2);yt(N),N.__keydown=[Va,O];var ve=d(N,2);ve.__click=O,i(w),i(F);var pe=d(F,2);{var J=m=>{var j=Wa(),z=d(o(j),2);Je(z,5,()=>e(C),xt,(V,S)=>{var Q=Ua(),k=o(Q),U=o(k,!0);i(k);var we=d(k,2),_e=o(we,!0);i(we);var he=d(we,2);he.__click=[Ba,M,S],i(Q),de(()=>{G(U,e(S).character_name),G(_e,e(S).performer_name)}),T(V,Q)}),i(z),i(j),T(m,j)};le(pe,m=>{e(C).length>0&&m(J)})}var se=d(pe,2),g=o(se);g.__click=[Na,h,p,a,_,E,ee,C];var f=d(g,2);f.__click=[qa,a,p,_,E,ee,C,l,h],i(se),i(I),dt(ye,()=>e(p),m=>$(p,m)),dt(A,()=>e(_),m=>$(_,m)),dt(R,()=>e(E),m=>$(E,m)),dt(P,()=>e(ee),m=>$(ee,m)),dt(v,()=>e(u),m=>$(u,m)),dt(N,()=>e(D),m=>$(D,m)),T(y,I)},x=y=>{var I=Ya(),ie=o(I),ye=o(ie),ge=o(ye,!0);i(ye);var A=d(ye,2);A.__click=[ja,h],i(ie);var K=d(ie,2);{var R=S=>{var Q=Ja(),k=o(Q,!0);i(Q),de(()=>G(k,a().description)),T(S,Q)};le(K,S=>{a().description&&S(R)})}var ne=d(K,2),P=o(ne),F=d(o(P),2),w=o(F);i(F),i(P);var v=d(P,2),N=d(o(v),2),ve=o(N,!0);i(N),i(v);var pe=d(v,2),J=d(o(pe),2),se=o(J,!0);i(J),i(pe),i(ne);var g=d(ne,2);{var f=S=>{var Q=Qa(),k=d(o(Q),2);Je(k,5,()=>a().character_performers,xt,(U,we)=>{var _e=Ga(),he=o(_e),Te=o(he,!0);i(he);var ue=d(he,2),Se=o(ue,!0);i(ue),i(_e),de(()=>{G(Te,e(we).character_name),G(Se,e(we).performer_name)}),T(U,_e)}),i(k),i(Q),T(S,Q)};le(g,S=>{var Q;(Q=a().character_performers)!=null&&Q.length&&S(f)})}var m=d(g,2),j=d(o(m),2);{var z=S=>{var Q=Za(),k=o(Q),U=d(o(k),2),we=o(U,!0);i(U),i(k);var _e=d(k,2),he=d(o(_e),2),Te=o(he,!0);i(he),i(_e);var ue=d(_e,2),Se=d(o(ue),2),be=o(Se,!0);i(Se),i(ue);var ke=d(ue,2),Oe=d(o(ke),2),Qe=o(Oe,!0);i(Oe),i(ke),i(Q),de(()=>{G(we,a().techDetails.cues||"N/A"),G(Te,a().techDetails.props||"N/A"),G(be,a().techDetails.costume||"N/A"),G(Qe,a().techDetails.stage_dressing||"N/A")}),T(S,Q)},V=S=>{var Q=Xa();T(S,Q)};le(j,S=>{a().techDetails?S(z):S(V,!1)})}i(m),i(I),de(()=>{G(ge,a().title),G(w,`${a().duration??""} min`),G(ve,a().chars),G(se,a().casted)}),T(y,I)};le(t,y=>{e(h)?y(c):y(x,!1)})}i(L),i(b),i(B),de(()=>G(q,a().title)),T(n,B),Ne()}vr(["click","keydown"]);function rs(n){const s=n-1;return s*s*s+1}function lr(n,{from:s,to:a},l={}){var{delay:h=0,duration:p=re=>Math.sqrt(re)*120,easing:_=rs}=l,E=getComputedStyle(n),ee=E.transform==="none"?"":E.transform,[u,D]=E.transformOrigin.split(" ").map(parseFloat);u/=n.clientWidth,D/=n.clientHeight;var C=as(n),O=n.clientWidth/a.width/C,M=n.clientHeight/a.height/C,X=s.left+s.width*u,ae=s.top+s.height*D,B=a.left+a.width*u,b=a.top+a.height*D,L=(X-B)*O,W=(ae-b)*M,ce=s.width/a.width,te=s.height/a.height;return{delay:h,duration:typeof p=="function"?p(Math.sqrt(L*L+W*W)):p,easing:_,css:(re,q)=>{var r=q*L,t=q*W,c=re+q*ce,x=re+q*te;return`transform: ${ee} translate(${r}px, ${t}px) scale(${c}, ${x});`}}}function as(n){if("currentCSSZoom"in n)return n.currentCSSZoom;for(var s=n,a=1;s!==null;)a*=+getComputedStyle(s).zoom,s=s.parentElement;return a}var ss=Z('<div class="detail svelte-1k3z6oi"><strong>Costume:</strong> </div>'),is=Z('<div class="detail svelte-1k3z6oi"><strong>Stage:</strong> </div>'),ns=Z('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),os=Z('<div class="detail svelte-1k3z6oi"><strong>Cues:</strong> </div>'),ls=Z('<div class="detail svelte-1k3z6oi"><strong>Props:</strong> </div>'),ds=Z('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),cs=Z('<div class="sketch svelte-1k3z6oi"><div class="sketch-header svelte-1k3z6oi"><span class="position svelte-1k3z6oi"> </span> <span class="title svelte-1k3z6oi"> </span> <span class="duration svelte-1k3z6oi"> </span></div> <div class="performers svelte-1k3z6oi"> </div> <!> <!></div>'),vs=Z('<div class="print-container svelte-1k3z6oi"><div class="header svelte-1k3z6oi"><h1 class="svelte-1k3z6oi"> </h1> <div class="version-info svelte-1k3z6oi"><!></div></div> <div class="sketches svelte-1k3z6oi"></div></div>');function us(n,s){je(s,!1);const a=me();let l=He(s,"sketches",8),h=He(s,"showTitle",8),p=He(s,"version",8);function _(b){const L=Math.floor(b/60),W=b%60;return L>0?`${L}h ${W}m`:`${W}m`}function E(b){return(b.character_performers||[]).map(L=>L.performer_name).join(", ")}Rt(()=>Ur(l()),()=>{$(a,[...l()].sort((b,L)=>b.position-L.position))}),cr(),ft();var ee=vs(),u=o(ee),D=o(u),C=o(D,!0);i(D);var O=d(D,2),M=o(O);{var X=b=>{var L=Nt("Green Room Version");T(b,L)},ae=(b,L)=>{{var W=te=>{var re=Nt("Hallway Version");T(te,re)},ce=te=>{var re=Nt("Tech Booth Version");T(te,re)};le(b,te=>{p()==="hallway"?te(W):te(ce,!1)},L)}};le(M,b=>{p()==="greenroom"?b(X):b(ae,!1)})}i(O),i(u);var B=d(u,2);Je(B,5,()=>e(a),xt,(b,L)=>{var W=cs(),ce=o(W),te=o(ce),re=o(te);i(te);var q=d(te,2),r=o(q,!0);i(q);var t=d(q,2),c=o(t,!0);i(t),i(ce);var x=d(ce,2),y=o(x,!0);i(x);var I=d(x,2);{var ie=A=>{var K=ns(),R=o(K);{var ne=w=>{var v=ss(),N=d(o(v));i(v),de(()=>G(N,` ${e(L).techDetails.costume??""}`)),T(w,v)};le(R,w=>{var v;(v=e(L).techDetails)!=null&&v.costume&&w(ne)})}var P=d(R,2);{var F=w=>{var v=is(),N=d(o(v));i(v),de(()=>G(N,` ${e(L).techDetails.stage_dressing??""}`)),T(w,v)};le(P,w=>{var v;(v=e(L).techDetails)!=null&&v.stage_dressing&&w(F)})}i(K),T(A,K)};le(I,A=>{(p()==="hallway"||p()==="techbooth")&&A(ie)})}var ye=d(I,2);{var ge=A=>{var K=ds(),R=o(K);{var ne=w=>{var v=os(),N=d(o(v));i(v),de(()=>G(N,` ${e(L).techDetails.cues??""}`)),T(w,v)};le(R,w=>{var v;(v=e(L).techDetails)!=null&&v.cues&&w(ne)})}var P=d(R,2);{var F=w=>{var v=ls(),N=d(o(v));i(v),de(()=>G(N,` ${e(L).techDetails.props??""}`)),T(w,v)};le(P,w=>{var v;(v=e(L).techDetails)!=null&&v.props&&w(F)})}i(K),T(A,K)};le(ye,A=>{p()==="techbooth"&&A(ge)})}i(W),de((A,K)=>{G(re,`${e(L).position+1}.`),G(r,e(L).title),G(c,A),G(y,K)},[()=>_(e(L).duration),()=>E(e(L))],Ue),T(b,W)}),i(B),i(ee),de(()=>G(C,h())),T(n,ee),Ne()}var fs=Z('<div class="fixed inset-0 bg-white z-50 overflow-auto"><div class="sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between print:hidden"><div class="flex items-center gap-4"><button class="flex items-center gap-2 text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m15 18-6-6 6-6"></path></svg> Back to Show</button> <h2 class="text-lg font-medium text-gray-900"> </h2></div> <div class="flex items-center gap-4"><div class="performer-filter-wrapper svelte-1afyyeo"><!></div> <div class="flex gap-2"><button>Greenroom</button> <button>Hallway</button> <button>Tech Booth</button></div> <button class="text-gray-600 hover:text-gray-900" aria-label="Print set list"><!></button></div></div> <div class="p-4"><!></div></div>'),hs=Z("<button> </button>"),ps=Z('<div class="filter-dropdown svelte-1afyyeo"><button>All Performers</button> <!></div>'),_s=Z('<div class="collapsed-buttons svelte-1afyyeo"><button class="sidebar-button svelte-1afyyeo" title="Print Set List"><!></button> <div class="filter-container svelte-1afyyeo"><button class="sidebar-button svelte-1afyyeo" title="Filter by Performer"><!></button> <!></div> <button class="sidebar-button svelte-1afyyeo" title="Import CSV"><!></button></div>'),gs=It('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),bs=It('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),ms=Z('<span class="character-count svelte-1afyyeo"> </span>'),ys=Z('<div class="description svelte-1afyyeo"><strong>Description:</strong> </div>'),ws=Z('<div class="detail svelte-1afyyeo"><strong class="svelte-1afyyeo">Costume:</strong> </div>'),ks=Z('<div class="detail svelte-1afyyeo"><strong class="svelte-1afyyeo">Stage:</strong> </div>'),xs=Z('<div class="detail svelte-1afyyeo"><strong class="svelte-1afyyeo">Cues:</strong> </div>'),Cs=Z('<div class="detail svelte-1afyyeo"><strong class="svelte-1afyyeo">Props:</strong> </div>'),Ss=Z('<div class="tech-details svelte-1afyyeo"><!> <!> <!> <!></div>'),Es=Z('<div class="list-item-details svelte-1afyyeo"><!> <!></div>'),$s=Z('<div role="listitem"><div class="list-item-header svelte-1afyyeo"><div class="list-item-main svelte-1afyyeo"><span class="position svelte-1afyyeo"> </span> <button class="title svelte-1afyyeo"> </button> <!> <span class="duration svelte-1afyyeo"> </span> <div class="list-item-actions svelte-1afyyeo"><button><!></button> <button class="action-button delete-button svelte-1afyyeo" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <div class="list-item-performers svelte-1afyyeo"> <!></div></div> <!></div>'),Ds=Z('<div class="list-view svelte-1afyyeo"></div>'),Os=Z('<div role="listitem"><!></div>'),Rs=Z('<div class="grid-view svelte-1afyyeo"></div>'),Ts=Z('<div class="modal-backdrop svelte-1afyyeo" role="dialog" aria-modal="true" aria-label="Sketch details"><div class="modal-content svelte-1afyyeo" role="document"><!></div></div>'),As=Z('<div class="show-page svelte-1afyyeo"><div><button class="sidebar-button collapse-button svelte-1afyyeo"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <div class="sidebar-header svelte-1afyyeo"><h1 class="svelte-1afyyeo"> </h1> <div class="print-controls svelte-1afyyeo"><select class="svelte-1afyyeo"><option>Green Room Version</option><option>Hallway Version</option><option>Tech Booth Version</option></select> <button class="print-button svelte-1afyyeo">Print Set List</button></div></div> <div class="sidebar-content svelte-1afyyeo"><!> <div class="mt-4"><!></div></div> <!></div> <div class="content svelte-1afyyeo"><div class="view-controls svelte-1afyyeo"><div class="view-buttons svelte-1afyyeo"><button><!></button> <button><!></button></div> <div class="print-buttons svelte-1afyyeo"><button>Green Room</button> <button>Hallway</button> <button>Tech Booth</button></div></div> <!> <!></div></div>');function Bs(n,s){je(s,!1);const[a,l]=Xr(),h=()=>Zr(ha,"$page",a),p=me(),_=me(),E=me();let ee=He(s,"data",8);Ct();const u=h().params.id;let D=ee().show,C=me(ee().sketches),O=me(null),M=me(null),X=me("list");const ae=300;let B=me(!1),b=me("greenroom"),L=me(null),W=me(null),ce=me(null),te=me(null),re=me(!1),q=me(!1);function r(g){const f=Math.floor(g/60),m=g%60;return f>0?`${f}h ${m}m`:`${m}m`}ur(async()=>{await ne()});async function t(g){try{if(!(await fetch(`/api/sketches/${g.detail.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({locked:g.detail.locked})})).ok)throw new Error("Failed to update sketch");$(C,e(C).map(m=>m.id===g.detail.id?{...m,locked:g.detail.locked}:m))}catch(f){console.error("Error updating sketch:",f)}}function c(g,f){t(new CustomEvent("lock",{detail:{id:g,locked:f}}))}async function x(g){var m;const f=g.detail.id;if(f)try{if(!(await fetch(`/api/sketches/${f}`,{method:"DELETE"})).ok)throw new Error("Failed to delete sketch");const z=e(C).findIndex(V=>V.id===f);$(C,e(C).filter(V=>V.id!==f)),$(C,e(C).map((V,S)=>({...V,position:S}))),((m=e(O))==null?void 0:m.id)===f&&$(O,null),await R(e(C))}catch(j){console.error("Error deleting sketch:",j)}}function y(g){x(new CustomEvent("delete",{detail:{id:g}}))}async function I(g){var f;try{if(!(await fetch(`/api/sketches/${g.detail.sketch.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g.detail.sketch)})).ok)throw new Error("Failed to update sketch");$(C,e(C).map(j=>j.id===g.detail.sketch.id?g.detail.sketch:j).sort((j,z)=>j.position-z.position)),((f=e(O))==null?void 0:f.id)===g.detail.sketch.id&&$(O,g.detail.sketch)}catch(m){console.error("Error updating sketch:",m)}}function ie(g,f){if(f.locked){g.preventDefault();return}$(W,f),g.dataTransfer&&(g.dataTransfer.effectAllowed="move")}function ye(g,f){g.preventDefault(),!(!e(W)||e(W).locked||e(_)[f].locked)&&($(ce,f),g.dataTransfer&&(g.dataTransfer.dropEffect="move"))}function ge(){$(ce,null)}async function A(g,f){if(g.preventDefault(),!e(W)||e(W).locked||e(_)[f].locked)return;const j=[...e(_)],z=j.findIndex(V=>{var S;return V.id===((S=e(W))==null?void 0:S.id)});if(z!==-1){j.splice(z,1),j.splice(f,0,e(W));const V=j,S=new Map(V.map((k,U)=>[k.id,U])),Q=e(C).map(k=>{if(k.locked)return k;const U=S.get(k.id);return{...k,position:U!==void 0?U:k.position}}).sort((k,U)=>k.position-U.position).map((k,U)=>({...k,position:U}));$(C,Q),await R(Q)}$(W,null),$(ce,null)}function K(){$(W,null),$(ce,null)}async function R(g){const f=g.map(m=>({id:m.id,position:m.position}));try{if(!(await fetch("/api/sketches",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:f})})).ok)throw console.error("Failed to reorder sketches API call failed"),await ne(),new Error("Failed to reorder sketches")}catch(m){console.error("Error reordering sketches:",m),await ne()}}async function ne(){try{const g=await fetch(`/api/sketches?show_id=${u}`);if(!g.ok)throw new Error("Failed to load sketches");const f=await g.json();$(C,f.map(m=>({...m,position:m.position??0,locked:!!m.locked})).sort((m,j)=>m.position-j.position))}catch(g){console.error("Error loading sketches:",g),$(C,[])}}function P(){$(B,!0),setTimeout(()=>{window.print(),$(B,!1)},100)}function F(g){var m;return(((m=g.character_performers)==null?void 0:m.length)||0)!==g.chars}function w(){$(re,!e(re))}function v(){$(q,!e(q))}function N(g){$(M,g),$(q,!1)}Rt(()=>e(C),()=>{$(p,[...new Set(e(C).flatMap(g=>g.character_performers||[]).map(g=>g.performer_name))].sort())}),Rt(()=>(e(M),e(C)),()=>{$(_,e(M)?e(C).filter(g=>{var f;return(f=g.character_performers)==null?void 0:f.some(m=>m.performer_name===e(M))}):e(C))}),Rt(()=>(e(te),e(C)),()=>{$(E,e(te)?e(C).filter(g=>{var f;return(f=g.character_performers)==null?void 0:f.some(m=>m.performer_name===e(te))}):e(C))}),cr(),ft();var ve=rt(),pe=Ge(ve);{var J=g=>{var f=fs(),m=o(f),j=o(m),z=o(j),V=d(z,2),S=o(V);i(V),i(j);var Q=d(j,2),k=o(Q),U=o(k);nr(U,{get performers(){return e(p)},get selectedPerformer(){return e(te)},$$events:{select:Oe=>$(te,Oe.detail.performer)}}),i(k);var we=d(k,2),_e=o(we),he=d(_e,2),Te=d(he,2);i(we);var ue=d(we,2),Se=o(ue);ir(Se,{size:20}),i(ue),i(Q),i(m);var be=d(m,2),ke=o(be);us(ke,{get sketches(){return e(E)},get showTitle(){return D.title},get version(){return e(b)}}),i(be),i(f),de(()=>{G(S,`Print View - ${e(b)??""}`),$e(_e,1,`print-view-button ${e(b)==="greenroom"?"active":""}`,"svelte-1afyyeo"),$e(he,1,`print-view-button ${e(b)==="hallway"?"active":""}`,"svelte-1afyyeo"),$e(Te,1,`print-view-button ${e(b)==="techbooth"?"active":""}`,"svelte-1afyyeo")}),Y("click",z,()=>$(B,!1)),Y("click",_e,()=>$(b,"greenroom")),Y("click",he,()=>$(b,"hallway")),Y("click",Te,()=>$(b,"techbooth")),Y("click",ue,()=>window.print()),T(g,f)},se=g=>{var f=As(),m=o(f);let j;var z=o(m),V=o(z);let S;i(z);var Q=d(z,2),k=o(Q),U=o(k,!0);i(k);var we=d(k,2),_e=o(we);de(()=>{e(b),Wr(()=>{})});var he=o(_e);he.value=he.__value="greenroom";var Te=d(he);Te.value=Te.__value="hallway";var ue=d(Te);ue.value=ue.__value="techbooth",i(_e);var Se=d(_e,2);i(we),i(Q);var be=d(Q,2),ke=o(be);nr(ke,{get performers(){return e(p)},get selectedPerformer(){return e(M)},set selectedPerformer(Ce){$(M,Ce)},$$legacy:!0});var Oe=d(ke,2),Qe=o(Oe);Ea(Qe,{get showId(){return D.id},$$events:{importComplete:ne}}),i(Oe),i(be);var St=d(be,2);{var Ke=Ce=>{var Ee=_s(),De=o(Ee),H=o(De);ir(H,{size:20}),i(De);var Re=d(De,2),fe=o(Re),Be=o(fe);da(Be,{size:20}),i(fe);var Ze=d(fe,2);{var Xe=Ie=>{var st=ps(),it=o(st);let $t;var _t=d(it,2);Je(_t,1,()=>e(p),xt,(gt,nt)=>{var Me=hs();let bt;var zt=o(Me,!0);i(Me),de(jt=>{bt=$e(Me,1,"filter-option svelte-1afyyeo",null,bt,jt),G(zt,e(nt))},[()=>({active:e(M)===e(nt)})],Ue),Y("click",Me,()=>N(e(nt))),T(gt,Me)}),i(st),de(gt=>$t=$e(it,1,"filter-option svelte-1afyyeo",null,$t,gt),[()=>({active:e(M)===null})],Ue),Y("click",it,()=>N(null)),hr(3,st,()=>Oa),T(Ie,st)};le(Ze,Ie=>{e(q)&&Ie(Xe)})}i(Re);var xe=d(Re,2),Ft=o(xe);ua(Ft,{size:20}),i(xe),i(Ee),Y("click",De,P),Y("click",fe,v),Y("click",xe,()=>{const Ie=document.querySelector('input[type="file"]');Ie==null||Ie.click()}),T(Ce,Ee)};le(St,Ce=>{e(re)&&Ce(Ke)})}i(m);var Le=d(m,2),Ve=o(Le),at=o(Ve),pt=o(at);let Ht;var gr=o(pt);ca(gr,{size:20}),i(pt);var Et=d(pt,2);let Vt;var br=o(Et);va(br,{size:20}),i(Et),i(at);var Bt=d(at,2),Lt=o(Bt);let Ut;var Mt=d(Lt,2);let Wt;var Kt=d(Mt,2);let Jt;i(Bt),i(Ve);var Gt=d(Ve,2);{var mr=Ce=>{var Ee=Ds();Je(Ee,15,()=>e(_),De=>De.id,(De,H,Re)=>{var fe=$s();let Be;var Ze=o(fe),Xe=o(Ze),xe=o(Xe),Ft=o(xe);i(xe);var Ie=d(xe,2),st=o(Ie,!0);i(Ie);var it=d(Ie,2);{var $t=oe=>{_r(oe,{class:"warning-icon",size:16})};le(it,oe=>{F(e(H))&&oe($t)})}var _t=d(it,2),gt=o(_t,!0);i(_t);var nt=d(_t,2),Me=o(nt);let bt;var zt=o(Me);{var jt=oe=>{var Fe=gs();T(oe,Fe)},xr=oe=>{var Fe=bs();T(oe,Fe)};le(zt,oe=>{e(H).locked?oe(jt):oe(xr,!1)})}i(Me);var Cr=d(Me,2);i(nt),i(Xe);var Qt=d(Xe,2),Zt=o(Qt),Sr=d(Zt);{var Er=oe=>{var Fe=ms(),ot=o(Fe);i(Fe),de(()=>{var lt;return G(ot,`(${(((lt=e(H).character_performers)==null?void 0:lt.length)||0)??""}/${e(H).chars??""} characters)`)}),T(oe,Fe)};le(Sr,oe=>{F(e(H))&&oe(Er)})}i(Qt),i(Ze);var $r=d(Ze,2);{var Dr=oe=>{var Fe=Es(),ot=o(Fe);{var lt=Ye=>{var et=ys(),Dt=d(o(et));i(et),de(()=>G(Dt,` ${e(H).description??""}`)),T(Ye,et)};le(ot,Ye=>{e(H).description&&Ye(lt)})}var Or=d(ot,2);{var Rr=Ye=>{var et=Ss(),Dt=o(et);{var Tr=Ae=>{var Pe=ws(),tt=d(o(Pe));i(Pe),de(()=>G(tt,` ${e(H).techDetails.costume??""}`)),T(Ae,Pe)};le(Dt,Ae=>{e(H).techDetails.costume&&Ae(Tr)})}var Xt=d(Dt,2);{var Ar=Ae=>{var Pe=ks(),tt=d(o(Pe));i(Pe),de(()=>G(tt,` ${e(H).techDetails.stage_dressing??""}`)),T(Ae,Pe)};le(Xt,Ae=>{e(H).techDetails.stage_dressing&&Ae(Ar)})}var Yt=d(Xt,2);{var Pr=Ae=>{var Pe=xs(),tt=d(o(Pe));i(Pe),de(()=>G(tt,` ${e(H).techDetails.cues??""}`)),T(Ae,Pe)};le(Yt,Ae=>{e(H).techDetails.cues&&Ae(Pr)})}var Ir=d(Yt,2);{var Lr=Ae=>{var Pe=Cs(),tt=d(o(Pe));i(Pe),de(()=>G(tt,` ${e(H).techDetails.props??""}`)),T(Ae,Pe)};le(Ir,Ae=>{e(H).techDetails.props&&Ae(Lr)})}i(et),T(Ye,et)};le(Or,Ye=>{e(H).techDetails&&Ye(Rr)})}i(Fe),T(oe,Fe)};le($r,oe=>{e(L)===e(H).id&&oe(Dr)})}i(fe),de((oe,Fe,ot,lt)=>{Be=$e(fe,1,"list-item svelte-1afyyeo",null,Be,oe),ze(fe,"draggable",!e(H).locked),G(Ft,`${e(H).position+1}.`),ze(Ie,"aria-label",`View details for ${e(H).title}`),G(st,e(H).title),G(gt,Fe),bt=$e(Me,1,"action-button lock-button svelte-1afyyeo",null,bt,ot),ze(Me,"aria-label",e(H).locked?"Unlock sketch":"Lock sketch"),ze(Me,"title",e(H).locked?"Unlock sketch":"Lock sketch"),G(Zt,`${lt??""} `)},[()=>{var oe;return{expanded:e(L)===e(H).id,locked:e(H).locked,dragging:((oe=e(W))==null?void 0:oe.id)===e(H).id,"drag-over":e(ce)===e(Re)}},()=>r(e(H).duration),()=>({locked:e(H).locked}),()=>(e(H).character_performers||[]).map(oe=>oe.performer_name).join(", ")],Ue),Y("click",Ie,()=>$(O,e(H))),Y("keydown",Ie,oe=>oe.key==="Enter"&&$(O,e(H))),Y("click",Me,kt(()=>c(e(H).id,!e(H).locked))),Y("click",Cr,kt(()=>y(e(H).id))),sr(fe,()=>lr,()=>({duration:ae})),Y("dragstart",fe,oe=>ie(oe,e(H))),Y("dragover",fe,oe=>ye(oe,e(Re))),Y("dragleave",fe,ge),Y("drop",fe,oe=>A(oe,e(Re))),Y("dragend",fe,K),T(De,fe)}),i(Ee),T(Ce,Ee)},yr=Ce=>{var Ee=Rs();Je(Ee,15,()=>e(_),De=>De.id,(De,H,Re)=>{var fe=Os();let Be;var Ze=o(fe);const Xe=Ue(()=>F(e(H)));za(Ze,{get sketch(){return e(H)},get showCharacterWarning(){return e(Xe)},$$events:{update:ne,select:()=>$(O,e(H)),lock:xe=>t(xe),delete:xe=>x(xe)}}),i(fe),de(xe=>{Be=$e(fe,1,"sketch-list-item svelte-1afyyeo",null,Be,xe),ze(fe,"draggable",!e(H).locked)},[()=>{var xe;return{locked:e(H).locked,dragging:((xe=e(W))==null?void 0:xe.id)===e(H).id,"drag-over":e(ce)===e(Re)}}],Ue),sr(fe,()=>lr,()=>({duration:ae})),Y("dragstart",fe,xe=>ie(xe,e(H))),Y("dragover",fe,xe=>ye(xe,e(Re))),Y("dragleave",fe,ge),Y("drop",fe,xe=>A(xe,e(Re))),Y("dragend",fe,K),T(De,fe)}),i(Ee),T(Ce,Ee)};le(Gt,Ce=>{e(X)==="list"?Ce(mr):Ce(yr,!1)})}var wr=d(Gt,2);{var kr=Ce=>{var Ee=Ts(),De=o(Ee),H=o(De);ts(H,{get sketch(){return e(O)},$$events:{close:()=>$(O,null),update:I}}),i(De),i(Ee),Y("click",De,kt(function(Re){la.call(this,s,Re)})),Y("click",Ee,()=>$(O,null)),Y("keydown",Ee,Re=>Re.key==="Escape"&&$(O,null)),T(Ce,Ee)};le(wr,Ce=>{e(O)&&Ce(kr)})}i(Le),i(f),de((Ce,Ee,De,H,Re,fe,Be)=>{j=$e(m,1,"sidebar svelte-1afyyeo",null,j,Ce),ze(z,"aria-label",e(re)?"Expand sidebar":"Collapse sidebar"),S=$e(V,0,"arrow-icon svelte-1afyyeo",null,S,Ee),G(U,D.title),Ht=$e(pt,1,"view-button svelte-1afyyeo",null,Ht,De),Vt=$e(Et,1,"view-button svelte-1afyyeo",null,Vt,H),Ut=$e(Lt,1,"print-view-button svelte-1afyyeo",null,Ut,Re),Wt=$e(Mt,1,"print-view-button svelte-1afyyeo",null,Wt,fe),Jt=$e(Kt,1,"print-view-button svelte-1afyyeo",null,Jt,Be)},[()=>({collapsed:e(re)}),()=>({collapsed:e(re)}),()=>({active:e(X)==="grid"}),()=>({active:e(X)==="list"}),()=>({active:e(B)&&e(b)==="greenroom"}),()=>({active:e(B)&&e(b)==="hallway"}),()=>({active:e(B)&&e(b)==="techbooth"})],Ue),Y("click",z,w),na(_e,()=>e(b),Ce=>$(b,Ce)),Y("click",Se,P),Y("click",pt,()=>$(X,"grid")),Y("click",Et,()=>$(X,"list")),Y("click",Lt,()=>{$(b,"greenroom"),$(B,!0)}),Y("click",Mt,()=>{$(b,"hallway"),$(B,!0)}),Y("click",Kt,()=>{$(b,"techbooth"),$(B,!0)}),T(g,f)};le(pe,g=>{e(B)?g(J):g(se,!1)})}T(n,ve),Ne(),l()}export{Bs as component};
