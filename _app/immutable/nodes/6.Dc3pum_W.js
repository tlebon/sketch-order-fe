import{c as Ae,a as K,t as ae,d as rt,n as tt}from"../chunks/C1Mc7jg_.js";import"../chunks/DEJKvyU0.js";import{a9 as nt,E as xt,aI as St,aJ as Ct,e as at,u as ut,aK as Et,a4 as Dt,q as $t,w as Oe,ad as ot,ae as lt,af as Ot,aL as Pt,G as It,p as Se,f as Le,a as Ce,Q as ge,c as l,s as u,r as n,m as a,t as he,D as L,aM as Ze,d as Tt,aN as vt,X as Pe,aO as He,aP as Rt}from"../chunks/Dr8WIEd2.js";import{k as Mt,w as jt,l as Lt,d as ht,s as se,r as At,e as ne}from"../chunks/Dt7NDDId.js";import{s as Fe,r as qe,p as de,i as ve,a as zt,b as Vt}from"../chunks/CGEmLSV_.js";import{i as Ie}from"../chunks/C3Q3JK2d.js";import{s as Ft}from"../chunks/D2lD4ZJv.js";import{c as Re,o as ft}from"../chunks/8rt3ChLC.js";import{c as qt,I as Ne,r as We,b as Ve,e as je,i as Ge,a as ye,s as $e}from"../chunks/DUpajO27.js";import{b as Nt}from"../chunks/BmMAv02D.js";import{s as Ue}from"../chunks/CV12Avte.js";const Ut=()=>performance.now(),Me={tick:i=>requestAnimationFrame(i),now:()=>Ut(),tasks:new Set};function pt(){const i=Me.now();Me.tasks.forEach(r=>{r.c(i)||(Me.tasks.delete(r),r.f())}),Me.tasks.size!==0&&Me.tick(pt)}function Bt(i){let r;return Me.tasks.size===0&&Me.tick(pt),{promise:new Promise(s=>{Me.tasks.add(r={c:i,f:s})}),abort(){Me.tasks.delete(r)}}}function Qe(i,r){jt(()=>{i.dispatchEvent(new CustomEvent(r))})}function Ht(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const r=i.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("")}function dt(i){const r={},s=i.split(";");for(const o of s){const[p,_]=o.split(":");if(!p||_===void 0)break;const c=Ht(p.trim());r[c]=_.trim()}return r}const Wt=i=>i;function gt(i,r,s){var o=qt,p,_,c,k=null;o.a??(o.a={element:i,measure(){p=this.element.getBoundingClientRect()},apply(){if(c==null||c.abort(),_=this.element.getBoundingClientRect(),p.left!==_.left||p.right!==_.right||p.top!==_.top||p.bottom!==_.bottom){const Q=r()(this.element,{from:p,to:_},s==null?void 0:s());c=Ye(this.element,Q,void 0,1,()=>{c==null||c.abort(),c=void 0})}},fix(){if(!i.getAnimations().length){var{position:Q,width:h,height:P}=getComputedStyle(i);if(Q!=="absolute"&&Q!=="fixed"){var x=i.style;k={position:x.position,width:x.width,height:x.height,transform:x.transform},x.position="absolute",x.width=h,x.height=P;var M=i.getBoundingClientRect();if(p.left!==M.left||p.top!==M.top){var q=`translate(${p.left-M.left}px, ${p.top-M.top}px)`;x.transform=x.transform?`${x.transform} ${q}`:q}}}},unfix(){if(k){var Q=i.style;Q.position=k.position,Q.width=k.width,Q.height=k.height,Q.transform=k.transform}}}),o.a.element=i}function _t(i,r,s,o){var p=(i&Et)!==0,_="both",c,k=r.inert,Q=r.style.overflow,h,P;function x(){var V=Ot,f=nt;ot(null),lt(null);try{return c??(c=s()(r,(o==null?void 0:o())??{},{direction:_}))}finally{ot(V),lt(f)}}var M={is_global:p,in(){r.inert=k,Qe(r,"introstart"),h=Ye(r,x(),P,1,()=>{Qe(r,"introend"),h==null||h.abort(),h=c=void 0,r.style.overflow=Q})},out(V){r.inert=!0,Qe(r,"outrostart"),P=Ye(r,x(),h,0,()=>{Qe(r,"outroend"),V==null||V()})},stop:()=>{h==null||h.abort(),P==null||P.abort()}},q=nt;if((q.transitions??(q.transitions=[])).push(M),Mt){var Y=p;if(!Y){for(var B=q.parent;B&&(B.f&xt)!==0;)for(;(B=B.parent)&&(B.f&St)===0;);Y=!B||(B.f&Ct)!==0}Y&&at(()=>{ut(()=>M.in())})}}function Ye(i,r,s,o,p){var _=o===1;if(Dt(r)){var c,k=!1;return $t(()=>{if(!k){var V=r({direction:_?"in":"out"});c=Ye(i,V,s,o,p)}}),{abort:()=>{k=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(s==null||s.deactivate(),!(r!=null&&r.duration))return p(),{abort:Oe,deactivate:Oe,reset:Oe,t:()=>o};const{delay:Q=0,css:h,tick:P,easing:x=Wt}=r;var M=[];if(_&&s===void 0&&(P&&P(0,1),h)){var q=dt(h(0,1));M.push(q,q)}var Y=()=>1-o,B=i.animate(M,{duration:Q});return B.onfinish=()=>{var V=(s==null?void 0:s.t())??1-o;s==null||s.abort();var f=o-V,C=r.duration*Math.abs(f),E=[];if(C>0){var b=!1;if(h)for(var N=Math.ceil(C/16.666666666666668),H=0;H<=N;H+=1){var F=V+f*x(H/N),e=dt(h(F,1-F));E.push(e),b||(b=e.overflow==="hidden")}b&&(i.style.overflow="hidden"),Y=()=>{var t=B.currentTime;return V+f*x(t/C)},P&&Bt(()=>{if(B.playState!=="running")return!1;var t=Y();return P(t,1-t),!0})}B=i.animate(E,{duration:C,fill:"forwards"}),B.onfinish=()=>{Y=()=>o,P==null||P(o,1-o),p()}},{abort:()=>{B&&(B.cancel(),B.effect=null,B.onfinish=Oe)},deactivate:()=>{p=Oe},reset:()=>{o===0&&(P==null||P(1,0))},t:()=>Y()}}function et(i,r,s){if(i.multiple)return Gt(i,r);for(var o of i.options){var p=Ke(o);if(Pt(p,r)){o.selected=!0;return}}(!s||r!==void 0)&&(i.selectedIndex=-1)}function mt(i,r){let s=!0;at(()=>{r&&et(i,ut(r),s),s=!1;var o=new MutationObserver(()=>{var p=i.__value;et(i,p)});return o.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{o.disconnect()}})}function Kt(i,r,s=r){var o=!0;Lt(i,"change",p=>{var _=p?"[selected]":":checked",c;if(i.multiple)c=[].map.call(i.querySelectorAll(_),Ke);else{var k=i.querySelector(_)??i.querySelector("option:not([disabled])");c=k&&Ke(k)}s(c)}),at(()=>{var p=r();if(et(i,p,o),o&&p===void 0){var _=i.querySelector(":checked");_!==null&&(p=Ke(_),s(p))}i.__value=p,o=!1}),mt(i)}function Gt(i,r){for(var s of i.options)s.selected=~r.indexOf(Ke(s))}function Ke(i){return"__value"in i?i.__value:i.value}function Je(i){return function(...r){var s=r[0];return s.stopPropagation(),i==null?void 0:i.apply(this,r)}}function Jt(i,r){var _;var s=(_=i.$$events)==null?void 0:_[r.type],o=It(s)?s.slice():s==null?[]:[s];for(var p of o)p.call(this,r)}function Qt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"funnel"},()=>s,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:(p,_)=>{var c=Ae(),k=Le(c);Ue(k,()=>r.children??Oe),K(p,c)},$$slots:{default:!0}})),Ce()}function Zt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"layout-grid"},()=>s,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(p,_)=>{var c=Ae(),k=Le(c);Ue(k,()=>r.children??Oe),K(p,c)},$$slots:{default:!0}})),Ce()}function Xt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"list"},()=>s,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(p,_)=>{var c=Ae(),k=Le(c);Ue(k,()=>r.children??Oe),K(p,c)},$$slots:{default:!0}})),Ce()}function bt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"printer"},()=>s,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(p,_)=>{var c=Ae(),k=Le(c);Ue(k,()=>r.children??Oe),K(p,c)},$$slots:{default:!0}})),Ce()}function kt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"triangle-alert"},()=>s,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(p,_)=>{var c=Ae(),k=Le(c);Ue(k,()=>r.children??Oe),K(p,c)},$$slots:{default:!0}})),Ce()}function Yt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"upload"},()=>s,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(p,_)=>{var c=Ae(),k=Le(c);Ue(k,()=>r.children??Oe),K(p,c)},$$slots:{default:!0}})),Ce()}const er=()=>{const i=Ft;return{page:{subscribe:i.page.subscribe},navigating:{subscribe:i.navigating.subscribe},updated:i.updated}},tr={subscribe(i){return er().page.subscribe(i)}};function rr(i,r){L(r,!0)}function ar(i,r,s,o,p,_,c,k){L(r,!1),L(s,o().title),L(p,o().description),L(_,o().duration),L(c,o().chars),L(k,[...o().character_performers||[]])}function sr(i,r,s,o,p,_,c,k,Q){const h={...r(),title:a(s),description:a(o),duration:a(p),chars:a(_),casted:a(c).length,character_performers:a(c)};k("update",{sketch:h}),L(Q,!1)}var ir=i=>i.stopPropagation(),nr=(i,r)=>i.key==="Enter"&&r(),or=(i,r,s)=>r(a(s).id),lr=ae('<li class="svelte-9bbfpy"><span class="character svelte-9bbfpy"> </span> <span class="performer svelte-9bbfpy"> </span> <button type="button" class="remove-button svelte-9bbfpy">Ã—</button></li>'),dr=ae('<div class="character-list svelte-9bbfpy"><h4>Current Assignments</h4> <ul class="svelte-9bbfpy"></ul></div>'),cr=ae('<div class="edit-form svelte-9bbfpy"><div class="form-group svelte-9bbfpy"><label for="title" class="svelte-9bbfpy">Title</label> <input type="text" id="title" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="description" class="svelte-9bbfpy">Description</label> <textarea id="description" class="svelte-9bbfpy"></textarea></div> <div class="form-group svelte-9bbfpy"><label for="duration" class="svelte-9bbfpy">Duration (minutes)</label> <input type="number" id="duration" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="chars" class="svelte-9bbfpy">Number of Characters</label> <input type="number" id="chars" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label class="svelte-9bbfpy">Character Assignments</label> <div class="character-inputs svelte-9bbfpy"><input type="text" placeholder="Character name" class="svelte-9bbfpy"> <input type="text" placeholder="Performer name" class="svelte-9bbfpy"> <button type="button" class="svelte-9bbfpy">Add</button></div></div> <!> <div class="form-actions svelte-9bbfpy"><button type="button" class="svelte-9bbfpy">Cancel</button> <button type="button" class="svelte-9bbfpy">Save</button></div></div>'),ur=ae('<p class="description svelte-9bbfpy"> </p>'),vr=ae('<div class="cast-item svelte-9bbfpy"><span class="character-name svelte-9bbfpy"> </span> <span class="performer-name svelte-9bbfpy"> </span></div>'),hr=ae('<div class="cast-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Cast</h4> <div class="cast-grid svelte-9bbfpy"></div></div>'),fr=ae('<div class="tech-grid svelte-9bbfpy"><div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Cues</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Props</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Costume</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Stage Dressing</span> <span class="tech-value svelte-9bbfpy"> </span></div></div>'),pr=ae('<p class="no-tech-details svelte-9bbfpy">No tech details available for this sketch.</p>'),gr=ae('<div class="view-mode svelte-9bbfpy"><div class="header svelte-9bbfpy"><h2 class="svelte-9bbfpy"> </h2> <button type="button" class="edit-button svelte-9bbfpy">Edit</button></div> <!> <div class="stats-container svelte-9bbfpy"><div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Duration</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Characters</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Casted</span> <span class="stat-value svelte-9bbfpy"> </span></div></div> <!> <div class="tech-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Tech Details</h4> <!></div></div>'),_r=ae('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-start mb-4"><div class="flex items-center gap-4"><button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Back to show"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <h2 class="text-2xl font-bold text-gray-900"> </h2></div> <button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close details"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div></div></div>');function mr(i,r){Se(r,!1);let s=de(r,"sketch",8);const o=Re();let p=ge(!1),_=ge(s().title),c=ge(s().description),k=ge(s().duration),Q=ge(s().chars),h=ge(""),P=ge(""),x=ge([...s().character_performers||[]]);function M(){!a(h)||!a(P)||(L(x,[...a(x),{id:crypto.randomUUID(),sketch_id:s().id,character_name:a(h),performer_name:a(P),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),L(h,""),L(P,""))}function q(y){L(x,a(x).filter(U=>U.id!==y))}function Y(y){y.stopPropagation(),o("close")}function B(y){y.key==="Escape"&&Y(y)}ft(()=>(document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B))),Ie();var V=_r();V.__click=Y;var f=l(V);f.__click=[ir];var C=l(f),E=l(C),b=l(E),N=l(b);N.__click=Y;var H=u(N,2),F=l(H,!0);n(H),n(b);var e=u(b,2);e.__click=Y,n(E);var t=u(E,2);{var d=y=>{var U=cr(),oe=l(U),fe=u(l(oe),2);We(fe),n(oe);var ce=u(oe,2),G=u(l(ce),2);At(G),n(ce);var W=u(ce,2),R=u(l(W),2);We(R),n(W);var le=u(W,2),J=u(l(le),2);We(J),n(le);var X=u(le,2),$=u(l(X),2),m=l($);We(m);var ee=u(m,2);We(ee),ee.__keydown=[nr,M];var D=u(ee,2);D.__click=M,n($),n(X);var I=u(X,2);{var O=T=>{var Z=dr(),z=u(l(Z),2);je(z,5,()=>a(x),Ge,(re,g)=>{var w=lr(),A=l(w),ie=l(A,!0);n(A);var _e=u(A,2),ke=l(_e,!0);n(_e);var be=u(_e,2);be.__click=[or,q,g],n(w),he(()=>{se(ie,a(g).character_name),se(ke,a(g).performer_name)}),K(re,w)}),n(z),n(Z),K(T,Z)};ve(I,T=>{a(x).length>0&&T(O)})}var j=u(I,2),te=l(j);te.__click=[ar,p,_,s,c,k,Q,x];var v=u(te,2);v.__click=[sr,s,_,c,k,Q,x,o,p],n(j),n(U),Ve(fe,()=>a(_),T=>L(_,T)),Ve(G,()=>a(c),T=>L(c,T)),Ve(R,()=>a(k),T=>L(k,T)),Ve(J,()=>a(Q),T=>L(Q,T)),Ve(m,()=>a(h),T=>L(h,T)),Ve(ee,()=>a(P),T=>L(P,T)),K(y,U)},S=y=>{var U=gr(),oe=l(U),fe=l(oe),ce=l(fe,!0);n(fe);var G=u(fe,2);G.__click=[rr,p],n(oe);var W=u(oe,2);{var R=g=>{var w=ur(),A=l(w,!0);n(w),he(()=>se(A,s().description)),K(g,w)};ve(W,g=>{s().description&&g(R)})}var le=u(W,2),J=l(le),X=u(l(J),2),$=l(X);n(X),n(J);var m=u(J,2),ee=u(l(m),2),D=l(ee,!0);n(ee),n(m);var I=u(m,2),O=u(l(I),2),j=l(O,!0);n(O),n(I),n(le);var te=u(le,2);{var v=g=>{var w=hr(),A=u(l(w),2);je(A,5,()=>s().character_performers,Ge,(ie,_e)=>{var ke=vr(),be=l(ke),De=l(be,!0);n(be);var me=u(be,2),xe=l(me,!0);n(me),n(ke),he(()=>{se(De,a(_e).character_name),se(xe,a(_e).performer_name)}),K(ie,ke)}),n(A),n(w),K(g,w)};ve(te,g=>{var w;(w=s().character_performers)!=null&&w.length&&g(v)})}var T=u(te,2),Z=u(l(T),2);{var z=g=>{var w=fr(),A=l(w),ie=u(l(A),2),_e=l(ie,!0);n(ie),n(A);var ke=u(A,2),be=u(l(ke),2),De=l(be,!0);n(be),n(ke);var me=u(ke,2),xe=u(l(me),2),we=l(xe,!0);n(xe),n(me);var ue=u(me,2),pe=u(l(ue),2),Ee=l(pe,!0);n(pe),n(ue),n(w),he(()=>{se(_e,s().techDetails.cues||"N/A"),se(De,s().techDetails.props||"N/A"),se(we,s().techDetails.costume||"N/A"),se(Ee,s().techDetails.stage_dressing||"N/A")}),K(g,w)},re=g=>{var w=pr();K(g,w)};ve(Z,g=>{s().techDetails?g(z):g(re,!1)})}n(T),n(U),he(()=>{se(ce,s().title),se($,`${s().duration??""} min`),se(D,s().chars),se(j,s().casted)}),K(y,U)};ve(t,y=>{a(p)?y(d):y(S,!1)})}n(C),n(f),n(V),he(()=>se(F,s().title)),K(i,V),Ce()}ht(["click","keydown"]);var br=ae('<div class="detail svelte-1k3z6oi"><strong>Costume:</strong> </div>'),kr=ae('<div class="detail svelte-1k3z6oi"><strong>Stage:</strong> </div>'),wr=ae('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),yr=ae('<div class="detail svelte-1k3z6oi"><strong>Cues:</strong> </div>'),xr=ae('<div class="detail svelte-1k3z6oi"><strong>Props:</strong> </div>'),Sr=ae('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),Cr=ae('<div class="sketch svelte-1k3z6oi"><div class="sketch-header svelte-1k3z6oi"><span class="position svelte-1k3z6oi"> </span> <span class="title svelte-1k3z6oi"> </span> <span class="duration svelte-1k3z6oi"> </span></div> <div class="performers svelte-1k3z6oi"> </div> <!> <!></div>'),Er=ae('<div class="print-container svelte-1k3z6oi"><div class="header svelte-1k3z6oi"><h1 class="svelte-1k3z6oi"> </h1> <div class="version-info svelte-1k3z6oi"><!></div></div> <div class="sketches svelte-1k3z6oi"></div></div>');function Dr(i,r){Se(r,!1);const s=ge();let o=de(r,"sketches",8),p=de(r,"showTitle",8),_=de(r,"version",8);function c(f){const C=Math.floor(f/60),E=f%60;return C>0?`${C}h ${E}m`:`${E}m`}function k(f){return(f.character_performers||[]).map(C=>C.performer_name).join(", ")}Ze(()=>Tt(o()),()=>{L(s,[...o()].sort((f,C)=>f.position-C.position))}),vt(),Ie();var Q=Er(),h=l(Q),P=l(h),x=l(P,!0);n(P);var M=u(P,2),q=l(M);{var Y=f=>{var C=rt("Green Room Version");K(f,C)},B=(f,C)=>{{var E=N=>{var H=rt("Hallway Version");K(N,H)},b=N=>{var H=rt("Tech Booth Version");K(N,H)};ve(f,N=>{_()==="hallway"?N(E):N(b,!1)},C)}};ve(q,f=>{_()==="greenroom"?f(Y):f(B,!1)})}n(M),n(h);var V=u(h,2);je(V,5,()=>a(s),Ge,(f,C)=>{var E=Cr(),b=l(E),N=l(b),H=l(N);n(N);var F=u(N,2),e=l(F,!0);n(F);var t=u(F,2),d=l(t,!0);n(t),n(b);var S=u(b,2),y=l(S,!0);n(S);var U=u(S,2);{var oe=G=>{var W=wr(),R=l(W);{var le=$=>{var m=br(),ee=u(l(m));n(m),he(()=>se(ee,` ${a(C).techDetails.costume??""}`)),K($,m)};ve(R,$=>{var m;(m=a(C).techDetails)!=null&&m.costume&&$(le)})}var J=u(R,2);{var X=$=>{var m=kr(),ee=u(l(m));n(m),he(()=>se(ee,` ${a(C).techDetails.stage_dressing??""}`)),K($,m)};ve(J,$=>{var m;(m=a(C).techDetails)!=null&&m.stage_dressing&&$(X)})}n(W),K(G,W)};ve(U,G=>{(_()==="hallway"||_()==="techbooth")&&G(oe)})}var fe=u(U,2);{var ce=G=>{var W=Sr(),R=l(W);{var le=$=>{var m=yr(),ee=u(l(m));n(m),he(()=>se(ee,` ${a(C).techDetails.cues??""}`)),K($,m)};ve(R,$=>{var m;(m=a(C).techDetails)!=null&&m.cues&&$(le)})}var J=u(R,2);{var X=$=>{var m=xr(),ee=u(l(m));n(m),he(()=>se(ee,` ${a(C).techDetails.props??""}`)),K($,m)};ve(J,$=>{var m;(m=a(C).techDetails)!=null&&m.props&&$(X)})}n(W),K(G,W)};ve(fe,G=>{_()==="techbooth"&&G(ce)})}n(E),he((G,W)=>{se(H,`${a(C).position+1}.`),se(e,a(C).title),se(d,G),se(y,W)},[()=>c(a(C).duration),()=>k(a(C))],Pe),K(f,E)}),n(V),n(Q),he(()=>se(x,p())),K(i,Q),Ce()}var $r=ae("<option> </option>"),Or=ae('<div class="performer-filter svelte-9vn570"><label for="performer-select" class="svelte-9vn570">Filter by Performer</label> <select id="performer-select" class="svelte-9vn570"><option>All Performers</option><!></select></div>');function wt(i,r){Se(r,!1);let s=de(r,"performers",24,()=>[]),o=de(r,"selectedPerformer",12,null);const p=Re();function _(x){const M=x.target,q=M.value===""?null:M.value;o(q),p("select",{performer:q})}Ie();var c=Or(),k=u(l(c),2);mt(k,()=>o()||"");var Q,h=l(k);h.value=h.__value="";var P=u(h);je(P,1,s,Ge,(x,M)=>{var q=$r(),Y={},B=l(q,!0);n(q),he(()=>{Y!==(Y=a(M))&&(q.value=(q.__value=a(M))??""),se(B,a(M))}),K(x,q)}),n(k),n(c),he(()=>{Q!==(Q=o()||"")&&(k.value=(k.__value=o()||"")??"",et(k,o()||""))}),ne("change",k,_),K(i,c),Ce()}function Pr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Xe={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var Ir=Xe.exports,ct;function Tr(){return ct||(ct=1,function(i,r){((s,o)=>{i.exports=o()})(Ir,function s(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},p,_=!o.document&&!!o.postMessage,c=o.IS_PAPA_WORKER||!1,k={},Q=0,h={};function P(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var d=N(t);d.chunkSize=parseInt(d.chunkSize),t.step||t.chunk||(d.chunkSize=null),this._handle=new B(d),(this._handle.streamer=this)._config=d}).call(this,e),this.parseChunk=function(t,d){var S=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<S){let U=this._config.newline;U||(y=this._config.quoteChar||'"',U=this._handle.guessLineEndings(t,y)),t=[...t.split(U).slice(S)].join(U)}this.isFirstChunk&&F(this._config.beforeFirstChunk)&&(y=this._config.beforeFirstChunk(t))!==void 0&&(t=y),this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+t,y=(this._partialLine="",this._handle.parse(S,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=y.meta.cursor,S=(this._finished||(this._partialLine=S.substring(t-this._baseIndex),this._baseIndex=t),y&&y.data&&(this._rowCount+=y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)o.postMessage({results:y,workerId:h.WORKER_ID,finished:S});else if(F(this._config.chunk)&&!d){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!S||!F(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),S||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(t){F(this._config.error)?this._config.error(t):c&&this._config.error&&o.postMessage({workerId:h.WORKER_ID,error:t,finished:!1})}}function x(e){var t;(e=e||{}).chunkSize||(e.chunkSize=h.RemoteChunkSize),P.call(this,e),this._nextChunk=_?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),_||(t.onload=H(this._chunkLoaded,this),t.onerror=H(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!_),this._config.downloadRequestHeaders){var d,S=this._config.downloadRequestHeaders;for(d in S)t.setRequestHeader(d,S[d])}var y;this._config.chunkSize&&(y=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+y));try{t.send(this._config.downloadRequestBody)}catch(U){this._chunkError(U.message)}_&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(d){d=t.statusText||d,this._sendError(new Error(d))}}function M(e){(e=e||{}).chunkSize||(e.chunkSize=h.LocalChunkSize),P.call(this,e);var t,d,S=typeof FileReader<"u";this.stream=function(y){this._input=y,d=y.slice||y.webkitSlice||y.mozSlice,S?((t=new FileReader).onload=H(this._chunkLoaded,this),t.onerror=H(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input,U=(this._config.chunkSize&&(U=Math.min(this._start+this._config.chunkSize,this._input.size),y=d.call(y,this._start,U)),t.readAsText(y,this._config.encoding));S||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(t.error)}}function q(e){var t;P.call(this,e=e||{}),this.stream=function(d){return t=d,this._nextChunk()},this._nextChunk=function(){var d,S;if(!this._finished)return d=this._config.chunkSize,t=d?(S=t.substring(0,d),t.substring(d)):(S=t,""),this._finished=!t,this.parseChunk(S)}}function Y(e){P.call(this,e=e||{});var t=[],d=!0,S=!1;this.pause=function(){P.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){P.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){S&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):d=!0},this._streamData=H(function(y){try{t.push(typeof y=="string"?y:y.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(U){this._streamError(U)}},this),this._streamError=H(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=H(function(){this._streamCleanUp(),S=!0,this._streamData("")},this),this._streamCleanUp=H(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function B(e){var t,d,S,y,U=Math.pow(2,53),oe=-U,fe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ce=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,W=0,R=0,le=!1,J=!1,X=[],$={data:[],errors:[],meta:{}};function m(O){return e.skipEmptyLines==="greedy"?O.join("").trim()==="":O.length===1&&O[0].length===0}function ee(){if($&&S&&(I("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),S=!1),e.skipEmptyLines&&($.data=$.data.filter(function(v){return!m(v)})),D()){let v=function(T,Z){F(e.transformHeader)&&(T=e.transformHeader(T,Z)),X.push(T)};if($)if(Array.isArray($.data[0])){for(var O=0;D()&&O<$.data.length;O++)$.data[O].forEach(v);$.data.splice(0,1)}else $.data.forEach(v)}function j(v,T){for(var Z=e.header?{}:[],z=0;z<v.length;z++){var re=z,g=v[z],g=((w,A)=>(ie=>(e.dynamicTypingFunction&&e.dynamicTyping[ie]===void 0&&(e.dynamicTyping[ie]=e.dynamicTypingFunction(ie)),(e.dynamicTyping[ie]||e.dynamicTyping)===!0))(w)?A==="true"||A==="TRUE"||A!=="false"&&A!=="FALSE"&&((ie=>{if(fe.test(ie)&&(ie=parseFloat(ie),oe<ie&&ie<U))return 1})(A)?parseFloat(A):ce.test(A)?new Date(A):A===""?null:A):A)(re=e.header?z>=X.length?"__parsed_extra":X[z]:re,g=e.transform?e.transform(g,re):g);re==="__parsed_extra"?(Z[re]=Z[re]||[],Z[re].push(g)):Z[re]=g}return e.header&&(z>X.length?I("FieldMismatch","TooManyFields","Too many fields: expected "+X.length+" fields but parsed "+z,R+T):z<X.length&&I("FieldMismatch","TooFewFields","Too few fields: expected "+X.length+" fields but parsed "+z,R+T)),Z}var te;$&&(e.header||e.dynamicTyping||e.transform)&&(te=1,!$.data.length||Array.isArray($.data[0])?($.data=$.data.map(j),te=$.data.length):$.data=j($.data,0),e.header&&$.meta&&($.meta.fields=X),R+=te)}function D(){return e.header&&X.length===0}function I(O,j,te,v){O={type:O,code:j,message:te},v!==void 0&&(O.row=v),$.errors.push(O)}F(e.step)&&(y=e.step,e.step=function(O){$=O,D()?ee():(ee(),$.data.length!==0&&(W+=O.data.length,e.preview&&W>e.preview?d.abort():($.data=$.data[0],y($,G))))}),this.parse=function(O,j,te){var v=e.quoteChar||'"',v=(e.newline||(e.newline=this.guessLineEndings(O,v)),S=!1,e.delimiter?F(e.delimiter)&&(e.delimiter=e.delimiter(O),$.meta.delimiter=e.delimiter):((v=((T,Z,z,re,g)=>{var w,A,ie,_e;g=g||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var ke=0;ke<g.length;ke++){for(var be,De=g[ke],me=0,xe=0,we=0,ue=(ie=void 0,new f({comments:re,delimiter:De,newline:Z,preview:10}).parse(T)),pe=0;pe<ue.data.length;pe++)z&&m(ue.data[pe])?we++:(be=ue.data[pe].length,xe+=be,ie===void 0?ie=be:0<be&&(me+=Math.abs(be-ie),ie=be));0<ue.data.length&&(xe/=ue.data.length-we),(A===void 0||me<=A)&&(_e===void 0||_e<xe)&&1.99<xe&&(A=me,w=De,_e=xe)}return{successful:!!(e.delimiter=w),bestDelimiter:w}})(O,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=v.bestDelimiter:(S=!0,e.delimiter=h.DefaultDelimiter),$.meta.delimiter=e.delimiter),N(e));return e.preview&&e.header&&v.preview++,t=O,d=new f(v),$=d.parse(t,j,te),ee(),le?{meta:{paused:!0}}:$||{meta:{paused:!1}}},this.paused=function(){return le},this.pause=function(){le=!0,d.abort(),t=F(e.chunk)?"":t.substring(d.getCharIndex())},this.resume=function(){G.streamer._halted?(le=!1,G.streamer.parseChunk(t,!0)):setTimeout(G.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,d.abort(),$.meta.aborted=!0,F(e.complete)&&e.complete($),t=""},this.guessLineEndings=function(T,v){T=T.substring(0,1048576);var v=new RegExp(V(v)+"([^]*?)"+V(v),"gm"),te=(T=T.replace(v,"")).split("\r"),v=T.split(`
`),T=1<v.length&&v[0].length<te[0].length;if(te.length===1||T)return`
`;for(var Z=0,z=0;z<te.length;z++)te[z][0]===`
`&&Z++;return Z>=te.length/2?`\r
`:"\r"}}function V(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t=(e=e||{}).delimiter,d=e.newline,S=e.comments,y=e.step,U=e.preview,oe=e.fastMode,fe=null,ce=!1,G=e.quoteChar==null?'"':e.quoteChar,W=G;if(e.escapeChar!==void 0&&(W=e.escapeChar),(typeof t!="string"||-1<h.BAD_DELIMITERS.indexOf(t))&&(t=","),S===t)throw new Error("Comment character same as delimiter");S===!0?S="#":(typeof S!="string"||-1<h.BAD_DELIMITERS.indexOf(S))&&(S=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var R=0,le=!1;this.parse=function(J,X,$){if(typeof J!="string")throw new Error("Input must be a string");var m=J.length,ee=t.length,D=d.length,I=S.length,O=F(y),j=[],te=[],v=[],T=R=0;if(!J)return me();if(oe||oe!==!1&&J.indexOf(G)===-1){for(var Z=J.split(d),z=0;z<Z.length;z++){if(v=Z[z],R+=v.length,z!==Z.length-1)R+=d.length;else if($)return me();if(!S||v.substring(0,I)!==S){if(O){if(j=[],_e(v.split(t)),xe(),le)return me()}else _e(v.split(t));if(U&&U<=z)return j=j.slice(0,U),me(!0)}}return me()}for(var re=J.indexOf(t,R),g=J.indexOf(d,R),w=new RegExp(V(W)+V(G),"g"),A=J.indexOf(G,R);;)if(J[R]===G)for(A=R,R++;;){if((A=J.indexOf(G,A+1))===-1)return $||te.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:j.length,index:R}),be();if(A===m-1)return be(J.substring(R,A).replace(w,G));if(G===W&&J[A+1]===W)A++;else if(G===W||A===0||J[A-1]!==W){re!==-1&&re<A+1&&(re=J.indexOf(t,A+1));var ie=ke((g=g!==-1&&g<A+1?J.indexOf(d,A+1):g)===-1?re:Math.min(re,g));if(J.substr(A+1+ie,ee)===t){v.push(J.substring(R,A).replace(w,G)),J[R=A+1+ie+ee]!==G&&(A=J.indexOf(G,R)),re=J.indexOf(t,R),g=J.indexOf(d,R);break}if(ie=ke(g),J.substring(A+1+ie,A+1+ie+D)===d){if(v.push(J.substring(R,A).replace(w,G)),De(A+1+ie+D),re=J.indexOf(t,R),A=J.indexOf(G,R),O&&(xe(),le))return me();if(U&&j.length>=U)return me(!0);break}te.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:j.length,index:R}),A++}}else if(S&&v.length===0&&J.substring(R,R+I)===S){if(g===-1)return me();R=g+D,g=J.indexOf(d,R),re=J.indexOf(t,R)}else if(re!==-1&&(re<g||g===-1))v.push(J.substring(R,re)),R=re+ee,re=J.indexOf(t,R);else{if(g===-1)break;if(v.push(J.substring(R,g)),De(g+D),O&&(xe(),le))return me();if(U&&j.length>=U)return me(!0)}return be();function _e(we){j.push(we),T=R}function ke(we){var ue=0;return ue=we!==-1&&(we=J.substring(A+1,we))&&we.trim()===""?we.length:ue}function be(we){return $||(we===void 0&&(we=J.substring(R)),v.push(we),R=m,_e(v),O&&xe()),me()}function De(we){R=we,_e(v),v=[],g=J.indexOf(d,R)}function me(we){if(e.header&&!X&&j.length&&!ce){var ue=j[0],pe={},Ee=new Set(ue);let st=!1;for(let ze=0;ze<ue.length;ze++){let Te=ue[ze];if(pe[Te=F(e.transformHeader)?e.transformHeader(Te,ze):Te]){let Be,it=pe[Te];for(;Be=Te+"_"+it,it++,Ee.has(Be););Ee.add(Be),ue[ze]=Be,pe[Te]++,st=!0,(fe=fe===null?{}:fe)[Be]=Te}else pe[Te]=1,ue[ze]=Te;Ee.add(Te)}st&&console.warn("Duplicate headers found and renamed."),ce=!0}return{data:j,errors:te,meta:{delimiter:t,linebreak:d,aborted:le,truncated:!!we,cursor:T+(X||0),renamedHeaders:fe}}}function xe(){y(me()),j=[],te=[]}},this.abort=function(){le=!0},this.getCharIndex=function(){return R}}function C(e){var t=e.data,d=k[t.workerId],S=!1;if(t.error)d.userError(t.error,t.file);else if(t.results&&t.results.data){var y={abort:function(){S=!0,E(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(F(d.userStep)){for(var U=0;U<t.results.data.length&&(d.userStep({data:t.results.data[U],errors:t.results.errors,meta:t.results.meta},y),!S);U++);delete t.results}else F(d.userChunk)&&(d.userChunk(t.results,y,t.file),delete t.results)}t.finished&&!S&&E(t.workerId,t.results)}function E(e,t){var d=k[e];F(d.userComplete)&&d.userComplete(t),d.terminate(),delete k[e]}function b(){throw new Error("Not implemented.")}function N(e){if(typeof e!="object"||e===null)return e;var t,d=Array.isArray(e)?[]:{};for(t in e)d[t]=N(e[t]);return d}function H(e,t){return function(){e.apply(t,arguments)}}function F(e){return typeof e=="function"}return h.parse=function(e,t){var d=(t=t||{}).dynamicTyping||!1;if(F(d)&&(t.dynamicTypingFunction=d,d={}),t.dynamicTyping=d,t.transform=!!F(t.transform)&&t.transform,!t.worker||!h.WORKERS_SUPPORTED)return d=null,h.NODE_STREAM_INPUT,typeof e=="string"?(e=(S=>S.charCodeAt(0)!==65279?S:S.slice(1))(e),d=new(t.download?x:q)(t)):e.readable===!0&&F(e.read)&&F(e.on)?d=new Y(t):(o.File&&e instanceof File||e instanceof Object)&&(d=new M(t)),d.stream(e);(d=(()=>{var S;return!!h.WORKERS_SUPPORTED&&(S=(()=>{var y=o.URL||o.webkitURL||null,U=s.toString();return h.BLOB_URL||(h.BLOB_URL=y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",U,")();"],{type:"text/javascript"})))})(),(S=new o.Worker(S)).onmessage=C,S.id=Q++,k[S.id]=S)})()).userStep=t.step,d.userChunk=t.chunk,d.userComplete=t.complete,d.userError=t.error,t.step=F(t.step),t.chunk=F(t.chunk),t.complete=F(t.complete),t.error=F(t.error),delete t.worker,d.postMessage({input:e,config:t,workerId:d.id})},h.unparse=function(e,t){var d=!1,S=!0,y=",",U=`\r
`,oe='"',fe=oe+oe,ce=!1,G=null,W=!1,R=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||h.BAD_DELIMITERS.filter(function(X){return t.delimiter.indexOf(X)!==-1}).length||(y=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(d=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(ce=t.skipEmptyLines),typeof t.newline=="string"&&(U=t.newline),typeof t.quoteChar=="string"&&(oe=t.quoteChar),typeof t.header=="boolean"&&(S=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");G=t.columns}t.escapeChar!==void 0&&(fe=t.escapeChar+oe),t.escapeFormulae instanceof RegExp?W=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(W=/^[=+\-@\t\r].*$/)}})(),new RegExp(V(oe),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return le(null,e,ce);if(typeof e[0]=="object")return le(G||Object.keys(e[0]),e,ce)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||G),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),le(e.fields||[],e.data||[],ce);throw new Error("Unable to serialize unrecognized input");function le(X,$,m){var ee="",D=(typeof X=="string"&&(X=JSON.parse(X)),typeof $=="string"&&($=JSON.parse($)),Array.isArray(X)&&0<X.length),I=!Array.isArray($[0]);if(D&&S){for(var O=0;O<X.length;O++)0<O&&(ee+=y),ee+=J(X[O],O);0<$.length&&(ee+=U)}for(var j=0;j<$.length;j++){var te=(D?X:$[j]).length,v=!1,T=D?Object.keys($[j]).length===0:$[j].length===0;if(m&&!D&&(v=m==="greedy"?$[j].join("").trim()==="":$[j].length===1&&$[j][0].length===0),m==="greedy"&&D){for(var Z=[],z=0;z<te;z++){var re=I?X[z]:z;Z.push($[j][re])}v=Z.join("").trim()===""}if(!v){for(var g=0;g<te;g++){0<g&&!T&&(ee+=y);var w=D&&I?X[g]:g;ee+=J($[j][w],g)}j<$.length-1&&(!m||0<te&&!T)&&(ee+=U)}}return ee}function J(X,$){var m,ee;return X==null?"":X.constructor===Date?JSON.stringify(X).slice(1,25):(ee=!1,W&&typeof X=="string"&&W.test(X)&&(X="'"+X,ee=!0),m=X.toString().replace(R,fe),(ee=ee||d===!0||typeof d=="function"&&d(X,$)||Array.isArray(d)&&d[$]||((D,I)=>{for(var O=0;O<I.length;O++)if(-1<D.indexOf(I[O]))return!0;return!1})(m,h.BAD_DELIMITERS)||-1<m.indexOf(y)||m.charAt(0)===" "||m.charAt(m.length-1)===" ")?oe+m+oe:m)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!_&&!!o.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=f,h.ParserHandle=B,h.NetworkStreamer=x,h.FileStreamer=M,h.StringStreamer=q,h.ReadableStreamStreamer=Y,o.jQuery&&((p=o.jQuery).fn.parse=function(e){var t=e.config||{},d=[];return this.each(function(U){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var oe=0;oe<this.files.length;oe++)d.push({file:this.files[oe],inputElem:this,instanceConfig:p.extend({},t)})}),S(),this;function S(){if(d.length===0)F(e.complete)&&e.complete();else{var U,oe,fe,ce,G=d[0];if(F(e.before)){var W=e.before(G.file,G.inputElem);if(typeof W=="object"){if(W.action==="abort")return U="AbortError",oe=G.file,fe=G.inputElem,ce=W.reason,void(F(e.error)&&e.error({name:U},oe,fe,ce));if(W.action==="skip")return void y();typeof W.config=="object"&&(G.instanceConfig=p.extend(G.instanceConfig,W.config))}else if(W==="skip")return void y()}var R=G.instanceConfig.complete;G.instanceConfig.complete=function(le){F(R)&&R(le,G.file,G.inputElem),y()},h.parse(G.file,G.instanceConfig)}}function y(){d.splice(0,1),S()}}),c&&(o.onmessage=function(e){e=e.data,h.WORKER_ID===void 0&&e&&(h.WORKER_ID=e.workerId),typeof e.input=="string"?o.postMessage({workerId:h.WORKER_ID,results:h.parse(e.input,e.config),finished:!0}):(o.File&&e.input instanceof File||e.input instanceof Object)&&(e=h.parse(e.input,e.config))&&o.postMessage({workerId:h.WORKER_ID,results:e,finished:!0})}),(x.prototype=Object.create(P.prototype)).constructor=x,(M.prototype=Object.create(P.prototype)).constructor=M,(q.prototype=Object.create(q.prototype)).constructor=q,(Y.prototype=Object.create(P.prototype)).constructor=Y,h})}(Xe)),Xe.exports}var Rr=Tr();const Mr=Pr(Rr);function jr(i){const r=Mr.parse(i,{header:!0,skipEmptyLines:!0,transformHeader:s=>s.trim().toLowerCase(),dynamicTyping:!1,transform:s=>s.trim()});return r.errors.length>0?(console.error("CSV Parsing Errors with Papaparse:",r.errors),r.data.filter(o=>o&&typeof o=="object"&&Object.keys(o).length>0)):r.data.filter(s=>s&&typeof s=="object"&&Object.keys(s).length>0)}function Lr(i){const r={},s=["total","actors","chars/actor","min number","people with extra"];return i.forEach(o=>{var q,Y;const p=(q=o.title)==null?void 0:q.trim(),_=parseInt(o.chars||"",10);if(!p||s.includes(p.toLowerCase())||isNaN(_)||_<=0)return;const c=[],k=Object.keys(o),Q=k.findIndex(B=>B.toLowerCase()==="casted");if(Q!==-1)for(let B=Q+1;B<k.length;B++){const V=k[B].trim(),f=(Y=o[k[B]])==null?void 0:Y.trim();V&&f&&c.push({character_name:f,performer_name:V})}const h=o.time||o.duration||"5:00",[P,x]=h.split(":").map(Number),M=P+(x||0)/60;r[p]={id:crypto.randomUUID(),title:p,description:o.description||"",duration:Math.ceil(M),chars:parseInt(o.chars||"0",10),casted:c.length,locked:!1,character_performers:c.map(B=>({character_name:B.character_name,performer_name:B.performer_name})),raw_data:o}}),Object.values(r)}async function Ar(i){return new Promise((r,s)=>{const o=new FileReader;o.onload=p=>{var _;try{const c=(_=p.target)==null?void 0:_.result,k=jr(c);r(k)}catch(c){s(c)}},o.onerror=()=>s(o.error),o.readAsText(i)})}var zr=ae('<div><h2 class="text-lg font-medium text-gray-900 mb-4">Import Running Order</h2> <div class="space-y-6"><div class="flex items-center justify-center w-full"><label for="csv-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"><div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg> <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p> <p class="text-xs text-gray-500">CSV files only</p></div> <input id="csv-file" type="file" accept=".csv" class="hidden"></label></div> <button type="button" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-2">Upload CSV</button></div></div>');function Vr(i,r){Se(r,!1),de(r,"showId",8);const s=Re();let o=ge(),p=ge(!1);function _(f){const C=f.map(t=>t.toLowerCase().trim());if(["sketch","cues","props","costume","stage dressing"].every(t=>C.includes(t)))return"techDetails";const N=["title"],H=["time","chars","casted","rocio","jacob","adrian","vera","max","gusta","richie","harry","connor","kieran","chiara","lari","theresa","cliff","tim"],F=N.every(t=>C.includes(t)),e=H.some(t=>C.includes(t));return F&&e?"sketches":"unknown"}async function c(){const f=a(o).files;if(!(!f||f.length===0))try{const C=f[0],E=await Ar(C);if(!E||E.length===0){alert("CSV file is empty or could not be processed."),He(o,a(o).value="");return}const b=Object.keys(E[0]),N=_(b);if(N==="unknown"){alert('Could not automatically determine CSV type. Please check the file headers and format. Expected headers for sketches: "title" and at least one of "Time", "chars", etc. Expected headers for tech details: "Sketch", "Cues", "Props", "Costume", "Stage Dressing".'),He(o,a(o).value="");return}let H;N==="sketches"?H=Lr(E):H=E,s("import",{importType:N,data:H}),He(o,a(o).value="")}catch(C){console.error("Error importing CSV:",C),alert("Error importing CSV file. Please check the file format and content."),He(o,a(o).value="")}}function k(f){f.preventDefault(),L(p,!0)}function Q(f){f.preventDefault(),L(p,!1)}function h(f){var E;f.preventDefault(),L(p,!1);const C=(E=f.dataTransfer)==null?void 0:E.files;C&&C.length>0&&(He(o,a(o).files=C),c())}Ie();var P=zr();let x;var M=u(l(P),2),q=l(M),Y=l(q),B=u(l(Y),2);Nt(B,f=>L(o,f),()=>a(o)),n(Y),n(q);var V=u(q,2);V.__click=c,n(M),n(P),he(f=>x=ye(P,1,"bg-white p-6 rounded-lg shadow-sm",null,x,f),[()=>({"border-2":a(p),"border-dashed":a(p),"border-blue-500":a(p)})],Pe),ne("dragover",P,f=>k(f)),ne("dragleave",P,f=>Q(f)),ne("drop",P,f=>h(f)),K(i,P),Ce()}ht(["click"]);const Fr=i=>i;function qr(i){const r=i-1;return r*r*r+1}function Nr(i,{delay:r=0,duration:s=400,easing:o=Fr}={}){const p=+getComputedStyle(i).opacity;return{delay:r,duration:s,easing:o,css:_=>`opacity: ${_*p}`}}function Ur(i,{delay:r=0,duration:s=400,easing:o=qr,axis:p="y"}={}){const _=getComputedStyle(i),c=+_.opacity,k=p==="y"?"height":"width",Q=parseFloat(_[k]),h=p==="y"?["top","bottom"]:["left","right"],P=h.map(f=>`${f[0].toUpperCase()}${f.slice(1)}`),x=parseFloat(_[`padding${P[0]}`]),M=parseFloat(_[`padding${P[1]}`]),q=parseFloat(_[`margin${P[0]}`]),Y=parseFloat(_[`margin${P[1]}`]),B=parseFloat(_[`border${P[0]}Width`]),V=parseFloat(_[`border${P[1]}Width`]);return{delay:r,duration:s,easing:o,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*c};${k}: ${f*Q}px;padding-${h[0]}: ${f*x}px;padding-${h[1]}: ${f*M}px;margin-${h[0]}: ${f*q}px;margin-${h[1]}: ${f*Y}px;border-${h[0]}-width: ${f*B}px;border-${h[1]}-width: ${f*V}px;min-${k}: 0`}}var Br=ae("<button> </button>"),Hr=ae('<div class="filter-dropdown svelte-uawkgq"><button>All Performers</button> <!></div>'),Wr=ae('<div class="collapsed-buttons svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Print Set List"><!></button> <div class="filter-container svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Filter by Performer"><!></button> <!></div> <button class="sidebar-button svelte-uawkgq" title="Import CSV"><!></button></div>'),Kr=ae('<div><button class="sidebar-button collapse-button svelte-uawkgq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <div class="sidebar-header svelte-uawkgq"><h1 class="svelte-uawkgq"> </h1> <div class="print-controls svelte-uawkgq"><select class="svelte-uawkgq"><option>Green Room Version</option><option>Hallway Version</option><option>Tech Booth Version</option></select> <button class="print-button svelte-uawkgq">Print Set List</button></div></div> <div class="sidebar-content svelte-uawkgq"><!> <div class="mt-4"><!></div></div> <!></div>');function Gr(i,r){Se(r,!1);let s=de(r,"show",8),o=de(r,"performers",8),p=de(r,"selectedPerformer",12,null),_=de(r,"printVersion",12,"greenroom"),c=de(r,"isSidebarCollapsed",12,!1);const k=Re();let Q=ge(!1);function h(){c(!c()),k("collapse",{collapsed:c()})}function P(){L(Q,!a(Q))}function x(W){k("filter",{performer:W}),L(Q,!1)}function M(){k("print",{printVersion:_()})}function q(W){k("csvImport",W.detail)}Ie();var Y=Kr();let B;var V=l(Y),f=l(V);let C;n(V);var E=u(V,2),b=l(E),N=l(b,!0);n(b);var H=u(b,2),F=l(H);he(()=>{_(),Rt(()=>{})});var e=l(F);e.value=e.__value="greenroom";var t=u(e);t.value=t.__value="hallway";var d=u(t);d.value=d.__value="techbooth",n(F);var S=u(F,2);n(H),n(E);var y=u(E,2),U=l(y);wt(U,{get performers(){return o()},get selectedPerformer(){return p()},set selectedPerformer(W){p(W)},$$legacy:!0});var oe=u(U,2),fe=l(oe);Vr(fe,{get showId(){return s().id},$$events:{import:q,importComplete:()=>k("importComplete")}}),n(oe),n(y);var ce=u(y,2);{var G=W=>{var R=Wr(),le=l(R),J=l(le);bt(J,{size:20}),n(le);var X=u(le,2),$=l(X),m=l($);Qt(m,{size:20}),n($);var ee=u($,2);{var D=j=>{var te=Hr(),v=l(te);let T;var Z=u(v,2);je(Z,1,o,Ge,(z,re)=>{var g=Br();let w;var A=l(g,!0);n(g),he(ie=>{w=ye(g,1,"filter-option svelte-uawkgq",null,w,ie),se(A,a(re))},[()=>({active:p()===a(re)})],Pe),ne("click",g,()=>x(a(re))),K(z,g)}),n(te),he(z=>T=ye(v,1,"filter-option svelte-uawkgq",null,T,z),[()=>({active:p()===null})],Pe),ne("click",v,()=>x(null)),_t(3,te,()=>Nr),K(j,te)};ve(ee,j=>{a(Q)&&j(D)})}n(X);var I=u(X,2),O=l(I);Yt(O,{size:20}),n(I),n(R),ne("click",le,M),ne("click",$,P),ne("click",I,()=>{const j=document.querySelector('input[type="file"]');j==null||j.click()}),K(W,R)};ve(ce,W=>{c()&&W(G)})}n(Y),he((W,R)=>{B=ye(Y,1,"sidebar svelte-uawkgq",null,B,W),$e(V,"aria-label",c()?"Expand sidebar":"Collapse sidebar"),C=ye(f,0,"arrow-icon svelte-uawkgq",null,C,R),se(N,s().title)},[()=>({collapsed:c()}),()=>({collapsed:c()})],Pe),ne("click",V,h),Kt(F,_),ne("click",S,M),K(i,Y),Ce()}var Jr=ae('<div class="view-controls svelte-6p89z8"><div class="view-buttons svelte-6p89z8"><button aria-label="Grid view"><!></button> <button aria-label="List view"><!></button></div> <div class="print-buttons svelte-6p89z8"><button>Green Room</button> <button>Hallway</button> <button>Tech Booth</button></div></div>');function Qr(i,r){Se(r,!1);let s=de(r,"viewMode",12,"list"),o=de(r,"printVersion",12,"greenroom"),p=de(r,"showPrintView",8,!1);const _=Re();function c(F){s(F),_("viewModeChange",{viewMode:F})}function k(F){o(F),_("printVersionChange",{printVersion:F}),_("showPrintViewChange",{showPrintView:!0})}Ie();var Q=Jr(),h=l(Q),P=l(h);let x;var M=l(P);Zt(M,{size:20}),n(P);var q=u(P,2);let Y;var B=l(q);Xt(B,{size:20}),n(q),n(h);var V=u(h,2),f=l(V);let C;var E=u(f,2);let b;var N=u(E,2);let H;n(V),n(Q),he((F,e,t,d,S)=>{x=ye(P,1,"view-button svelte-6p89z8",null,x,F),Y=ye(q,1,"view-button svelte-6p89z8",null,Y,e),C=ye(f,1,"print-view-button svelte-6p89z8",null,C,t),b=ye(E,1,"print-view-button svelte-6p89z8",null,b,d),H=ye(N,1,"print-view-button svelte-6p89z8",null,H,S)},[()=>({active:s()==="grid"}),()=>({active:s()==="list"}),()=>({active:p()&&o()==="greenroom"}),()=>({active:p()&&o()==="hallway"}),()=>({active:p()&&o()==="techbooth"})],Pe),ne("click",P,()=>c("grid")),ne("click",q,()=>c("list")),ne("click",f,()=>k("greenroom")),ne("click",E,()=>k("hallway")),ne("click",N,()=>k("techbooth")),K(i,Q),Ce()}function Zr(i){const r=i-1;return r*r*r+1}function yt(i,{from:r,to:s},o={}){var{delay:p=0,duration:_=H=>Math.sqrt(H)*120,easing:c=Zr}=o,k=getComputedStyle(i),Q=k.transform==="none"?"":k.transform,[h,P]=k.transformOrigin.split(" ").map(parseFloat);h/=i.clientWidth,P/=i.clientHeight;var x=Xr(i),M=i.clientWidth/s.width/x,q=i.clientHeight/s.height/x,Y=r.left+r.width*h,B=r.top+r.height*P,V=s.left+s.width*h,f=s.top+s.height*P,C=(Y-V)*M,E=(B-f)*q,b=r.width/s.width,N=r.height/s.height;return{delay:p,duration:typeof _=="function"?_(Math.sqrt(C*C+E*E)):_,easing:c,css:(H,F)=>{var e=F*C,t=F*E,d=H+F*b,S=H+F*N;return`transform: ${Q} translate(${e}px, ${t}px) scale(${d}, ${S});`}}}function Xr(i){if("currentCSSZoom"in i)return i.currentCSSZoom;for(var r=i,s=1;r!==null;)s*=+getComputedStyle(r).zoom,r=r.parentElement;return s}var Yr=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),ea=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),ta=ae('<span class="character-count svelte-t9pjlk"> </span>'),ra=ae('<div class="description svelte-t9pjlk"><strong>Description:</strong> </div>'),aa=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Costume:</strong> </div>'),sa=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Stage:</strong> </div>'),ia=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Cues:</strong> </div>'),na=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Props:</strong> </div>'),oa=ae('<div class="tech-details svelte-t9pjlk"><!> <!> <!> <!></div>'),la=ae('<div class="list-item-details svelte-t9pjlk"><!> <!></div>'),da=ae('<div role="listitem"><div class="list-item-header svelte-t9pjlk"><div class="list-item-main svelte-t9pjlk"><span class="position svelte-t9pjlk"> </span> <button class="title svelte-t9pjlk"> </button> <!> <span class="duration svelte-t9pjlk"> </span> <div class="list-item-actions svelte-t9pjlk"><button><!></button> <button class="action-button delete-button svelte-t9pjlk" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <div class="list-item-performers svelte-t9pjlk"> <!></div></div> <!></div>'),ca=ae('<div class="list-view svelte-t9pjlk"></div>');function ua(i,r){Se(r,!1),de(r,"sketches",24,()=>[]);let s=de(r,"filteredSketches",24,()=>[]),o=de(r,"expandedSketchId",8,null),p=de(r,"draggedSketch",8,null),_=de(r,"draggedOverIndex",8,null),c=de(r,"flipDurationMs",8,300);de(r,"selectedSketch",8,null);const k=Re();function Q(E){k("select",{sketch:E})}function h(E,b){k("lock",{id:E,locked:b})}function P(E){k("delete",{id:E})}function x(E,b){k("dragstart",{event:E,sketch:b})}function M(E,b){k("dragover",{event:E,index:b})}function q(){k("dragleave")}function Y(E,b){k("drop",{event:E,index:b})}function B(){k("dragend")}function V(E){var N;return(((N=E.character_performers)==null?void 0:N.length)||0)!==E.chars}function f(E){const b=Math.floor(E/60),N=E%60;return b>0?`${b}h ${N}m`:`${N}m`}Ie();var C=ca();je(C,15,s,E=>E.id,(E,b,N)=>{var H=da();let F;var e=l(H),t=l(e),d=l(t),S=l(d);n(d);var y=u(d,2),U=l(y,!0);n(y);var oe=u(y,2);{var fe=v=>{kt(v,{class:"warning-icon",size:16})};ve(oe,v=>{V(a(b))&&v(fe)})}var ce=u(oe,2),G=l(ce,!0);n(ce);var W=u(ce,2),R=l(W);let le;var J=l(R);{var X=v=>{var T=Yr();K(v,T)},$=v=>{var T=ea();K(v,T)};ve(J,v=>{a(b).locked?v(X):v($,!1)})}n(R);var m=u(R,2);n(W),n(t);var ee=u(t,2),D=l(ee),I=u(D);{var O=v=>{var T=ta(),Z=l(T);n(T),he(()=>{var z;return se(Z,`(${(((z=a(b).character_performers)==null?void 0:z.length)||0)??""}/${a(b).chars??""} characters)`)}),K(v,T)};ve(I,v=>{V(a(b))&&v(O)})}n(ee),n(e);var j=u(e,2);{var te=v=>{var T=la(),Z=l(T);{var z=w=>{var A=ra(),ie=u(l(A));n(A),he(()=>se(ie,` ${a(b).description??""}`)),K(w,A)};ve(Z,w=>{a(b).description&&w(z)})}var re=u(Z,2);{var g=w=>{var A=oa(),ie=l(A);{var _e=ue=>{var pe=aa(),Ee=u(l(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.costume??""}`)),K(ue,pe)};ve(ie,ue=>{a(b).techDetails.costume&&ue(_e)})}var ke=u(ie,2);{var be=ue=>{var pe=sa(),Ee=u(l(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.stage_dressing??""}`)),K(ue,pe)};ve(ke,ue=>{a(b).techDetails.stage_dressing&&ue(be)})}var De=u(ke,2);{var me=ue=>{var pe=ia(),Ee=u(l(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.cues??""}`)),K(ue,pe)};ve(De,ue=>{a(b).techDetails.cues&&ue(me)})}var xe=u(De,2);{var we=ue=>{var pe=na(),Ee=u(l(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.props??""}`)),K(ue,pe)};ve(xe,ue=>{a(b).techDetails.props&&ue(we)})}n(A),K(w,A)};ve(re,w=>{a(b).techDetails&&w(g)})}n(T),K(v,T)};ve(j,v=>{o()===a(b).id&&v(te)})}n(H),he((v,T,Z,z)=>{F=ye(H,1,"list-item svelte-t9pjlk",null,F,v),$e(H,"draggable",!a(b).locked),se(S,`${a(b).position+1}.`),$e(y,"aria-label",`View details for ${a(b).title}`),se(U,a(b).title),se(G,T),le=ye(R,1,"action-button lock-button svelte-t9pjlk",null,le,Z),$e(R,"aria-label",a(b).locked?"Unlock sketch":"Lock sketch"),$e(R,"title",a(b).locked?"Unlock sketch":"Lock sketch"),se(D,`${z??""} `)},[()=>{var v;return{expanded:o()===a(b).id,locked:a(b).locked,dragging:((v=p())==null?void 0:v.id)===a(b).id,"drag-over":_()===a(N)}},()=>f(a(b).duration),()=>({locked:a(b).locked}),()=>(a(b).character_performers||[]).map(v=>v.performer_name).join(", ")],Pe),ne("click",y,()=>Q(a(b))),ne("keydown",y,v=>v.key==="Enter"&&Q(a(b))),ne("click",R,Je(()=>h(a(b).id,!a(b).locked))),ne("click",m,Je(()=>P(a(b).id))),gt(H,()=>yt,()=>({duration:c()})),ne("dragstart",H,v=>x(v,a(b))),ne("dragover",H,v=>M(v,a(N))),ne("dragleave",H,q),ne("drop",H,v=>Y(v,a(N))),ne("dragend",H,B),K(E,H)}),n(C),K(i,C),Ce()}var va=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),ha=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),fa=ae('<span class="text-amber-500"> </span>'),pa=ae('<li class="flex justify-between"><span class="font-medium text-gray-700"> </span> <span class="text-gray-500"> </span></li>'),ga=ae('<div class="cast-list px-4 pb-3 pt-1 bg-gray-50"><ul class="text-xs space-y-1"></ul></div>'),_a=ae('<div class="border-t border-gray-200 px-4 py-2"><button class="cast-toggle text-sm text-blue-600 hover:text-blue-800 font-medium focus:outline-none w-full text-left flex justify-between items-center"><span> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!>',1),ma=ae('<div tabindex="0" role="button" style="min-height: 150px;"><div class="p-4 flex-grow"><div class="flex justify-between items-center mb-2"><div class="flex items-center gap-2"><h3 class="text-lg font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center gap-0.5"><button><!></button> <button class="action-button delete-button svelte-1qd7kif" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <p class="description text-sm text-gray-600 mb-3 line-clamp-1"> </p> <div class="stats text-xs text-gray-500 space-x-3 mb-3"><span> </span> <span> </span> <span> </span> <!></div></div> <!></div>');function ba(i,r){Se(r,!1);let s=de(r,"sketch",8),o=de(r,"isSelected",8,!1),p=de(r,"showCharacterWarning",8,!1),_=ge(!1);const c=Re();function k(m){m.target instanceof HTMLElement&&m.target.closest("button, .cast-toggle")||m.target instanceof HTMLElement&&m.target.closest(".card")&&c("select",{sketch:s()})}function Q(m){m.stopPropagation(),c("lock",{id:s().id,locked:!s().locked})}function h(m){m.stopPropagation(),c("delete",{id:s().id})}function P(m){m.stopPropagation(),L(_,!a(_))}function x(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),m.target instanceof HTMLElement&&m.target.closest("button, .cast-toggle")?m.target.closest(".cast-toggle")&&P(m):k(m))}Ie();var M=ma(),q=l(M),Y=l(q),B=l(Y),V=l(B),f=l(V,!0);n(V);var C=u(V,2);{var E=m=>{kt(m,{class:"warning-icon",size:16})};ve(C,m=>{p()&&m(E)})}n(B);var b=u(B,2),N=l(b);let H;var F=l(N);{var e=m=>{var ee=va();K(m,ee)},t=m=>{var ee=ha();K(m,ee)};ve(F,m=>{s().locked?m(e):m(t,!1)})}n(N);var d=u(N,2);n(b),n(Y);var S=u(Y,2),y=l(S,!0);n(S);var U=u(S,2),oe=l(U),fe=l(oe);n(oe);var ce=u(oe,2),G=l(ce);n(ce);var W=u(ce,2),R=l(W);n(W);var le=u(W,2);{var J=m=>{var ee=fa(),D=l(ee);n(ee),he(()=>{var I;return se(D,`(${(((I=s().character_performers)==null?void 0:I.length)||0)??""}/${s().chars??""} characters)`)}),K(m,ee)};ve(le,m=>{p()&&m(J)})}n(U),n(q);var X=u(q,2);{var $=m=>{var ee=_a(),D=Le(ee),I=l(D),O=l(I),j=l(O);n(O);var te=u(O,2);n(I),n(D);var v=u(D,2);{var T=Z=>{var z=ga(),re=l(z);je(re,5,()=>s().character_performers,g=>g.id||g.character_name+g.performer_name,(g,w)=>{var A=pa(),ie=l(A),_e=l(ie,!0);n(ie);var ke=u(ie,2),be=l(ke,!0);n(ke),n(A),he(()=>{se(_e,a(w).character_name),se(be,a(w).performer_name)}),K(g,A)}),n(re),n(z),_t(3,z,()=>Ur,()=>({duration:200})),K(Z,z)};ve(v,Z=>{a(_)&&Z(T)})}he(()=>{$e(I,"aria-expanded",a(_)),se(j,`Show Cast (${s().character_performers.length??""})`),ye(te,0,`w-4 h-4 transform transition-transform duration-200 ${a(_)?"rotate-180":""}`)}),ne("click",I,P),K(m,ee)};ve(X,m=>{s().character_performers&&s().character_performers.length>0&&m($)})}n(M),he(m=>{ye(M,1,`card ${o()?"selected border-blue-500":"border-gray-200"} ${s().locked?"locked":""} border bg-white rounded-lg shadow hover:shadow-md transition-all duration-200 flex flex-col`,"svelte-1qd7kif"),$e(M,"aria-label",`View sketch details for ${s().title??""}`),$e(V,"title",s().title),se(f,s().title),H=ye(N,1,"action-button lock-button svelte-1qd7kif",null,H,m),$e(N,"aria-label",s().locked?"Unlock sketch":"Lock sketch"),$e(N,"title",s().locked?"Unlock sketch":"Lock sketch"),$e(S,"title",s().description||"A sketch waiting for its story..."),se(y,s().description||"A sketch waiting for its story..."),se(fe,`Duration: ${s().duration??""} min`),se(G,`Chars: ${s().chars??""}`),se(R,`Casted: ${s().casted??""}`)},[()=>({locked:s().locked})],Pe),ne("click",N,Je(Q)),ne("click",d,Je(h)),ne("click",M,k),ne("keydown",M,x),K(i,M),Ce()}var ka=ae('<div role="listitem"><!></div>'),wa=ae('<div class="grid-view svelte-1q07nmr"></div>');function ya(i,r){Se(r,!1),de(r,"sketches",24,()=>[]);let s=de(r,"filteredSketches",24,()=>[]);de(r,"expandedSketchId",8,null);let o=de(r,"draggedSketch",8,null),p=de(r,"draggedOverIndex",8,null),_=de(r,"flipDurationMs",8,300);de(r,"selectedSketch",8,null);const c=Re();function k(f){c("select",{sketch:f})}function Q(f){c("lock",f.detail)}function h(f){c("delete",f.detail)}function P(f,C){c("dragstart",{event:f,sketch:C})}function x(f,C){c("dragover",{event:f,index:C})}function M(){c("dragleave")}function q(f,C){c("drop",{event:f,index:C})}function Y(){c("dragend")}function B(f){var E;return(((E=f.character_performers)==null?void 0:E.length)||0)!==f.chars}Ie();var V=wa();je(V,15,s,f=>f.id,(f,C,E)=>{var b=ka();let N;var H=l(b);const F=Pe(()=>B(a(C)));ba(H,{get sketch(){return a(C)},get showCharacterWarning(){return a(F)},$$events:{update:()=>{},select:()=>k(a(C)),lock:Q,delete:h}}),n(b),he(e=>{N=ye(b,1,"sketch-list-item svelte-1q07nmr",null,N,e),$e(b,"draggable",!a(C).locked)},[()=>{var e;return{locked:a(C).locked,dragging:((e=o())==null?void 0:e.id)===a(C).id,"drag-over":p()===a(E)}}],Pe),gt(b,()=>yt,()=>({duration:_()})),ne("dragstart",b,e=>P(e,a(C))),ne("dragover",b,e=>x(e,a(E))),ne("dragleave",b,M),ne("drop",b,e=>q(e,a(E))),ne("dragend",b,Y),K(f,b)}),n(V),K(i,V),Ce()}var xa=ae('<div class="print-header svelte-1xa2n7i"><div class="left svelte-1xa2n7i"><button class="back-btn svelte-1xa2n7i"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m15 18-6-6 6-6"></path></svg> Back to Show</button> <h2 class="print-title svelte-1xa2n7i"> </h2></div> <div class="right svelte-1xa2n7i"><div class="performer-filter-wrapper svelte-1xa2n7i"><!></div> <div class="print-version-btns svelte-1xa2n7i"><button>Greenroom</button> <button>Hallway</button> <button>Tech Booth</button></div> <button class="print-btn svelte-1xa2n7i" aria-label="Print set list"><!></button></div></div>');function Sa(i,r){Se(r,!1);let s=de(r,"printVersion",8,"greenroom"),o=de(r,"printViewPerformer",8,null),p=de(r,"performers",24,()=>[]);const _=Re();function c(S){_("versionChange",{printVersion:S})}function k(S){_("performerSelect",{performer:S.detail.performer})}function Q(){_("back")}function h(){_("print")}Ie();var P=xa(),x=l(P),M=l(x),q=u(M,2),Y=l(q);n(q),n(x);var B=u(x,2),V=l(B),f=l(V);wt(f,{get performers(){return p()},get selectedPerformer(){return o()},$$events:{select:k}}),n(V);var C=u(V,2),E=l(C);let b;var N=u(E,2);let H;var F=u(N,2);let e;n(C);var t=u(C,2),d=l(t);bt(d,{size:20}),n(t),n(B),n(P),he((S,y,U)=>{se(Y,`Print View - ${s()??""}`),b=ye(E,1,"print-view-button svelte-1xa2n7i",null,b,S),H=ye(N,1,"print-view-button svelte-1xa2n7i",null,H,y),e=ye(F,1,"print-view-button svelte-1xa2n7i",null,e,U)},[()=>({active:s()==="greenroom"}),()=>({active:s()==="hallway"}),()=>({active:s()==="techbooth"})],Pe),ne("click",M,Q),ne("click",E,()=>c("greenroom")),ne("click",N,()=>c("hallway")),ne("click",F,()=>c("techbooth")),ne("click",t,h),K(i,P),Ce()}var Ca=ae('<div class="fixed inset-0 z-50 overflow-auto bg-white"><!> <div class="p-4"><!></div></div>'),Ea=ae('<div class="modal-backdrop svelte-pz2bd9" role="dialog" aria-modal="true" aria-label="Sketch details"><div class="modal-content svelte-pz2bd9" role="document"><!></div></div>'),Da=ae('<div class="show-page svelte-pz2bd9"><!> <div class="content svelte-pz2bd9"><!> <!> <!></div></div>');function Va(i,r){Se(r,!1);const[s,o]=Vt(),p=()=>zt(tr,"$page",s),_=ge(),c=ge(),k=ge();let Q=de(r,"data",8);Re();const h=p().params.id;let P=Q().show,x=ge(Q().sketches),M=ge(null),q=ge(null),Y=ge("list");const B=300;let V=ge(!1),f=ge("greenroom"),C=ge(null),E=ge(null),b=ge(null),N=ge(null),H=ge(!1);ft(async()=>{await R()});async function F(D){try{const{importType:I,data:O}=D.detail;if(I==="unknown"){console.error("Import type is unknown. Aborting."),alert("Could not determine CSV type. Please check file format.");return}let j;I==="sketches"?j={show_id:h,importType:I,data:O.map((T,Z)=>({...T,position:a(x).length+Z}))}:j={show_id:h,importType:I,data:O};const te=await fetch("/api/sketches/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!te.ok){const T=await te.json().catch(()=>({error:"Failed to import data. Unknown error."}));throw new Error(T.error||"Failed to import data")}const v=await te.json();if(I==="sketches"){const T=v.filter(Z=>Z.success&&Z.sketch).map(Z=>Z.sketch);if(T.length>0)L(x,[...a(x),...T].sort((Z,z)=>Z.position-z.position)),alert(`${T.length} sketch(es) imported successfully.`);else{const Z=v.filter(z=>!z.success);Z.length>0?(alert(`Import partially failed. ${Z.length} sketch(es) had issues. Check console for details.`),console.error("Sketch import errors:",Z)):alert("No new sketches were imported. The file might have been empty or all rows failed.")}}else{const T=v.filter(z=>z.success).length,Z=v.length-T;alert(`Tech details import complete. ${T} successful, ${Z} failed. Check console for details.`),Z>0&&console.error("Tech detail import issues:",v.filter(z=>!z.success)),await R()}}catch(I){console.error("Error importing data:",I),alert(`Error during import: ${I instanceof Error?I.message:"Unknown error"}`)}}async function e(D){try{if(!(await fetch(`/api/sketches/${D.detail.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({locked:D.detail.locked})})).ok)throw new Error("Failed to update sketch");L(x,a(x).map(O=>O.id===D.detail.id?{...O,locked:D.detail.locked}:O))}catch(I){console.error("Error updating sketch:",I)}}function t(D,I){e(new CustomEvent("lock",{detail:{id:D,locked:I}}))}async function d(D){var O;const I=D.detail.id;if(I)try{if(!(await fetch(`/api/sketches/${I}`,{method:"DELETE"})).ok)throw new Error("Failed to delete sketch");const te=a(x).findIndex(v=>v.id===I);L(x,a(x).filter(v=>v.id!==I)),L(x,a(x).map((v,T)=>({...v,position:T}))),((O=a(M))==null?void 0:O.id)===I&&L(M,null),await W(a(x))}catch(j){console.error("Error deleting sketch:",j)}}function S(D){d(new CustomEvent("delete",{detail:{id:D}}))}async function y(D){var I;try{if(!(await fetch(`/api/sketches/${D.detail.sketch.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D.detail.sketch)})).ok)throw new Error("Failed to update sketch");L(x,a(x).map(j=>j.id===D.detail.sketch.id?D.detail.sketch:j).sort((j,te)=>j.position-te.position)),((I=a(M))==null?void 0:I.id)===D.detail.sketch.id&&L(M,D.detail.sketch)}catch(O){console.error("Error updating sketch:",O)}}function U(D,I){if(I.locked){D.preventDefault();return}L(E,I),D.dataTransfer&&(D.dataTransfer.effectAllowed="move")}function oe(D,I){D.preventDefault(),!(!a(E)||a(E).locked||a(c)[I].locked)&&(L(b,I),D.dataTransfer&&(D.dataTransfer.dropEffect="move"))}function fe(){L(b,null)}async function ce(D,I){if(D.preventDefault(),!a(E)||a(E).locked||a(c)[I].locked)return;const j=[...a(c)],te=j.findIndex(v=>{var T;return v.id===((T=a(E))==null?void 0:T.id)});if(te!==-1){j.splice(te,1),j.splice(I,0,a(E));const v=j,T=new Map(v.map((z,re)=>[z.id,re])),Z=a(x).map(z=>{if(z.locked)return z;const re=T.get(z.id);return{...z,position:re!==void 0?re:z.position}}).sort((z,re)=>z.position-re.position).map((z,re)=>({...z,position:re}));L(x,Z),await W(Z)}L(E,null),L(b,null)}function G(){L(E,null),L(b,null)}async function W(D){const I=D.map(O=>({id:O.id,position:O.position}));try{if(!(await fetch("/api/sketches",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:I})})).ok)throw console.error("Failed to reorder sketches API call failed"),await R(),new Error("Failed to reorder sketches")}catch(O){console.error("Error reordering sketches:",O),await R()}}async function R(){try{const D=await fetch(`/api/sketches?show_id=${h}`);if(!D.ok)throw new Error("Failed to load sketches");const I=await D.json();L(x,I.map(O=>({...O,position:O.position??0,locked:!!O.locked})).sort((O,j)=>O.position-j.position))}catch(D){console.error("Error loading sketches:",D),L(x,[])}}function le(){L(V,!0),setTimeout(()=>{window.print(),L(V,!1)},100)}function J(D){L(C,a(C)===D?null:D)}Ze(()=>a(x),()=>{L(_,[...new Set(a(x).flatMap(D=>D.character_performers||[]).map(D=>D.performer_name))].sort())}),Ze(()=>(a(q),a(x)),()=>{L(c,a(q)?a(x).filter(D=>{var I;return(I=D.character_performers)==null?void 0:I.some(O=>O.performer_name===a(q))}):a(x))}),Ze(()=>(a(N),a(x)),()=>{L(k,a(N)?a(x).filter(D=>{var I;return(I=D.character_performers)==null?void 0:I.some(O=>O.performer_name===a(N))}):a(x))}),vt(),Ie();var X=Ae(),$=Le(X);{var m=D=>{var I=Ca(),O=l(I);Sa(O,{get printVersion(){return a(f)},get printViewPerformer(){return a(N)},get performers(){return a(_)},$$events:{back:()=>L(V,!1),versionChange:v=>L(f,v.detail.printVersion),performerSelect:v=>L(N,v.detail.performer),print:le}});var j=u(O,2),te=l(j);Dr(te,{get sketches(){return a(k)},get showTitle(){return P.title},get version(){return a(f)}}),n(j),n(I),K(D,I)},ee=D=>{var I=Da(),O=l(I);Gr(O,{show:P,get performers(){return a(_)},get selectedPerformer(){return a(q)},set selectedPerformer(g){L(q,g)},get printVersion(){return a(f)},set printVersion(g){L(f,g)},get isSidebarCollapsed(){return a(H)},set isSidebarCollapsed(g){L(H,g)},$$events:{collapse:({detail:g})=>L(H,g.collapsed),filter:({detail:g})=>L(q,g.performer),print:({detail:g})=>{L(f,g.printVersion),le()},importComplete:R,csvImport:F},$$legacy:!0});var j=u(O,2),te=l(j);Qr(te,{get viewMode(){return a(Y)},set viewMode(g){L(Y,g)},get printVersion(){return a(f)},set printVersion(g){L(f,g)},get showPrintView(){return a(V)},set showPrintView(g){L(V,g)},$$events:{viewModeChange:g=>L(Y,g.detail.viewMode),printVersionChange:g=>L(f,g.detail.printVersion),showPrintViewChange:g=>L(V,g.detail.showPrintView)},$$legacy:!0});var v=u(te,2);{var T=g=>{ua(g,{get sketches(){return a(x)},get filteredSketches(){return a(c)},get draggedSketch(){return a(E)},get draggedOverIndex(){return a(b)},flipDurationMs:B,get expandedSketchId(){return a(C)},set expandedSketchId(w){L(C,w)},get selectedSketch(){return a(M)},set selectedSketch(w){L(M,w)},$$events:{select:w=>L(M,w.detail.sketch),lock:w=>t(w.detail.id,w.detail.locked),delete:w=>S(w.detail.id),expand:w=>J(w.detail.sketchId),dragstart:w=>U(w.detail.event,w.detail.sketch),dragover:w=>oe(w.detail.event,w.detail.index),dragleave:fe,drop:w=>ce(w.detail.event,w.detail.index),dragend:G},$$legacy:!0})},Z=g=>{ya(g,{get sketches(){return a(x)},get filteredSketches(){return a(c)},get draggedSketch(){return a(E)},get draggedOverIndex(){return a(b)},flipDurationMs:B,get expandedSketchId(){return a(C)},set expandedSketchId(w){L(C,w)},get selectedSketch(){return a(M)},set selectedSketch(w){L(M,w)},$$events:{select:w=>L(M,w.detail.sketch),lock:w=>t(w.detail.id,w.detail.locked),delete:w=>S(w.detail.id),expand:w=>J(w.detail.sketchId),dragstart:w=>U(w.detail.event,w.detail.sketch),dragover:w=>oe(w.detail.event,w.detail.index),dragleave:fe,drop:w=>ce(w.detail.event,w.detail.index),dragend:G},$$legacy:!0})};ve(v,g=>{a(Y)==="list"?g(T):g(Z,!1)})}var z=u(v,2);{var re=g=>{var w=Ea(),A=l(w),ie=l(A);mr(ie,{get sketch(){return a(M)},$$events:{close:()=>L(M,null),update:y}}),n(A),n(w),ne("click",A,Je(function(_e){Jt.call(this,r,_e)})),ne("click",w,()=>L(M,null)),ne("keydown",w,_e=>_e.key==="Escape"&&L(M,null)),K(g,w)};ve(z,g=>{a(M)&&g(re)})}n(j),n(I),K(D,I)};ve($,D=>{a(V)?D(m):D(ee,!1)})}K(i,X),Ce(),o()}export{Va as component};
