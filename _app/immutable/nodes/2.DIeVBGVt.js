import{c as Q,a as x,f as D}from"../chunks/Dp9hfF4v.js";import{p as V,a as q,f as R,w as W,B as k,C as M,D as l,c as s,s as v,r,m as o,F as X,t as O}from"../chunks/BN8bhnsD.js";import{d as Y,e as z,r as Z,s as P}from"../chunks/ZtTpgCh3.js";import{s as ee,r as te,i as U}from"../chunks/D9rdsxVW.js";import{I as ae,e as re,r as oe,b as J,s as se}from"../chunks/D-s4lsVp.js";import{a as ie}from"../chunks/CQHl3USB.js";import{dndzone as de}from"svelte-dnd-action";import{s as ne}from"../chunks/Br-INW2v.js";function le(f,d){V(d,!0);let i=te(d,["$$slots","$$events","$$legacy"]);ae(f,ee({name:"trash-2"},()=>i,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(b,u)=>{var w=Q(),C=R(w);ne(C,()=>d.children??W),x(b,w)},$$slots:{default:!0}})),q()}var ce=(f,d)=>l(d,!0),ve=(f,d)=>l(d,!1),pe=D('<div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-xl font-semibold mb-4">Create New Show</h2> <form><div class="space-y-4"><div><label for="title" class="block text-sm font-medium text-gray-700">Title</label> <input type="text" id="title" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required/></div> <div><label for="description" class="block text-sm font-medium text-gray-700">Description</label> <textarea id="description" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" rows="3"></textarea></div> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button> <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">Create Show</button></div></div></form></div>'),he=D('<p class="mt-1 text-gray-600"> </p>'),ue=(f,d,i)=>d(o(i).id),me=D('<div class="bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow"><div class="flex justify-between items-start"><div><h2 class="text-xl font-semibold text-gray-900"><a class="hover:text-blue-500"> </a></h2> <!></div> <div class="flex space-x-2"><button class="text-red-500 hover:text-red-600" aria-label="Delete show"><!></button></div></div></div>'),fe=D('<div class="max-w-7xl mx-auto p-8"><div class="text-center mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-2">Sketch Show Manager</h1> <p class="text-gray-600">Create and manage your sketch shows. Drag and drop to reorder.</p></div> <div class="flex justify-end mb-6"><button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">Create New Show</button></div> <!> <div class="space-y-4"></div></div>');function Se(f,d){V(d,!0);let i=k(M(d.data.shows)),S=k(!1),b=k(!1),u=k(M({title:"",description:""}));async function w(t){const{items:e}=t.detail;l(S,!0),l(i,e,!0)}async function C(t){const{items:e}=t.detail;l(S,!1),l(i,e,!0);const a=e.map((c,n)=>({id:c.id,position:n}));try{if(!(await fetch("/api/shows",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:a})})).ok)throw new Error("Failed to update show order")}catch(c){console.error("Failed to update show order:",c),l(i,[...o(i)].sort((n,p)=>n.position-p.position),!0)}}async function B(){const t=new Date().toISOString(),e={id:crypto.randomUUID(),...o(u),position:o(i).length,created_at:t,updated_at:t};try{if(!(await fetch("/api/shows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Failed to create show");l(i,[...o(i),e],!0),l(b,!1),l(u,{title:"",description:""},!0)}catch(a){console.error("Failed to create show:",a)}}async function H(t){try{if(!(await fetch(`/api/shows/${t}`,{method:"DELETE"})).ok)throw new Error("Failed to delete show");l(i,o(i).filter(a=>a.id!==t),!0)}catch(e){console.error("Failed to delete show:",e)}}var F=fe(),T=v(s(F),2),L=s(T);L.__click=[ce,b],r(T);var I=v(T,2);{var A=t=>{var e=pe(),a=v(s(e),2),c=s(a),n=s(c),p=v(s(n),2);oe(p),r(n);var m=v(n,2),y=v(s(m),2);Z(y),r(m);var g=v(m,2),E=s(g);E.__click=[ve,b],X(2),r(g),r(c),r(a),r(e),z("submit",a,h=>{h.preventDefault(),B()}),J(p,()=>o(u).title,h=>o(u).title=h),J(y,()=>o(u).description,h=>o(u).description=h),x(t,e)};U(I,t=>{o(b)&&t(A)})}var _=v(I,2);re(_,21,()=>o(i),t=>t.id,(t,e)=>{var a=me(),c=s(a),n=s(c),p=s(n),m=s(p),y=s(m,!0);r(m),r(p);var g=v(p,2);{var E=$=>{var j=he(),K=s(j,!0);r(j),O(()=>P(K,o(e).description)),x($,j)};U(g,$=>{o(e).description&&$(E)})}r(n);var h=v(n,2),N=s(h);N.__click=[ue,H,e];var G=s(N);le(G,{size:20}),r(N),r(h),r(c),r(a),O(()=>{se(m,"href",`/shows/${o(e).id??""}`),P(y,o(e).title)}),x(t,a)}),r(_),ie(_,(t,e)=>{var a;return(a=de)==null?void 0:a(t,e)},()=>({items:o(i)})),r(F),z("consider",_,w),z("finalize",_,C),x(f,F),q()}Y(["click"]);export{Se as component};
