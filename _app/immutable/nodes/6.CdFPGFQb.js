import{b as wt,e as Nt,c as Xe,a as U,f as X,t as mt,d as _t}from"../chunks/Dp9hfF4v.js";import"../chunks/B32V0_Ly.js";import{c as We,o as Ot}from"../chunks/0YVxvMKV.js";import{t as ve,y as yt,I as xt,aa as kt,aK as Ut,z as St,ai as Bt,al as Ht,aj as Wt,N as Kt,a8 as dt,E as Jt,aL as Gt,aM as Qt,e as bt,u as Pt,aN as Zt,a5 as Yt,q as Xt,w as Be,ae as Ct,af as Dt,ag as er,G as It,aO as tr,aP as rr,p as Re,f as Ye,a as je,R as we,c as n,s as c,r as i,m as e,D as M,aQ as Pe,Y as Ae,aR as ut,d as ar,aS as Tt,aT as sr}from"../chunks/BN8bhnsD.js";import{k as ir,w as nr,l as or,d as Rt,s as se,r as Ue,e as ne}from"../chunks/ZtTpgCh3.js";import{s as rt,r as at,p as pe,i as de,a as lr,b as cr}from"../chunks/D9rdsxVW.js";import{i as He}from"../chunks/CCgLv8Cn.js";import{s as dr}from"../chunks/Dpv8RXV8.js";import{c as vr,I as st,r as Ke,b as Ee,e as Ze,i as lt,a as Ie,s as Ne}from"../chunks/D-s4lsVp.js";import{b as ur}from"../chunks/CDVvyIc6.js";import{s as it}from"../chunks/Br-INW2v.js";function hr(l,a,s=!1,o=!1,g=!1){var p=l,v="";ve(()=>{var b=kt;if(v===(v=a()??"")){yt&&xt();return}if(b.nodes_start!==null&&(Ut(b.nodes_start,b.nodes_end),b.nodes_start=b.nodes_end=null),v!==""){if(yt){St.data;for(var z=xt(),f=z;z!==null&&(z.nodeType!==8||z.data!=="");)f=z,z=Bt(z);if(z===null)throw Ht(),Wt;wt(St,f),p=Kt(z);return}var S=v+"";s?S=`<svg>${S}</svg>`:o&&(S=`<math>${S}</math>`);var k=Nt(S);if((s||o)&&(k=dt(k)),wt(dt(k),k.lastChild),s||o)for(;dt(k);)p.before(dt(k));else p.before(k)}})}const fr=()=>performance.now(),Je={tick:l=>requestAnimationFrame(l),now:()=>fr(),tasks:new Set};function jt(){const l=Je.now();Je.tasks.forEach(a=>{a.c(l)||(Je.tasks.delete(a),a.f())}),Je.tasks.size!==0&&Je.tick(jt)}function pr(l){let a;return Je.tasks.size===0&&Je.tick(jt),{promise:new Promise(s=>{Je.tasks.add(a={c:l,f:s})}),abort(){Je.tasks.delete(a)}}}function vt(l,a){nr(()=>{l.dispatchEvent(new CustomEvent(a))})}function _r(l){if(l==="float")return"cssFloat";if(l==="offset")return"cssOffset";if(l.startsWith("--"))return l;const a=l.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("")}function Et(l){const a={},s=l.split(";");for(const o of s){const[g,p]=o.split(":");if(!g||p===void 0)break;const v=_r(g.trim());a[v]=p.trim()}return a}const gr=l=>l;function Mt(l,a,s){var o=vr,g,p,v,b=null;o.a??(o.a={element:l,measure(){g=this.element.getBoundingClientRect()},apply(){if(v==null||v.abort(),p=this.element.getBoundingClientRect(),g.left!==p.left||g.right!==p.right||g.top!==p.top||g.bottom!==p.bottom){const z=a()(this.element,{from:g,to:p},s==null?void 0:s());v=ft(this.element,z,void 0,1,()=>{v==null||v.abort(),v=void 0})}},fix(){if(!l.getAnimations().length){var{position:z,width:f,height:S}=getComputedStyle(l);if(z!=="absolute"&&z!=="fixed"){var k=l.style;b={position:k.position,width:k.width,height:k.height,transform:k.transform},k.position="absolute",k.width=f,k.height=S;var u=l.getBoundingClientRect();if(g.left!==u.left||g.top!==u.top){var V=`translate(${g.left-u.left}px, ${g.top-u.top}px)`;k.transform=k.transform?`${k.transform} ${V}`:V}}}},unfix(){if(b){var z=l.style;z.position=b.position,z.width=b.width,z.height=b.height,z.transform=b.transform}}}),o.a.element=l}function Lt(l,a,s,o){var g=(l&Zt)!==0,p="both",v,b=a.inert,z=a.style.overflow,f,S;function k(){var W=er,w=kt;Ct(null),Dt(null);try{return v??(v=s()(a,(o==null?void 0:o())??{},{direction:p}))}finally{Ct(W),Dt(w)}}var u={is_global:g,in(){a.inert=b,vt(a,"introstart"),f=ft(a,k(),S,1,()=>{vt(a,"introend"),f==null||f.abort(),f=v=void 0,a.style.overflow=z})},out(W){a.inert=!0,vt(a,"outrostart"),S=ft(a,k(),f,0,()=>{vt(a,"outroend"),W==null||W()})},stop:()=>{f==null||f.abort(),S==null||S.abort()}},V=kt;if((V.transitions??(V.transitions=[])).push(u),ir){var Z=g;if(!Z){for(var B=V.parent;B&&(B.f&Jt)!==0;)for(;(B=B.parent)&&(B.f&Gt)===0;);Z=!B||(B.f&Qt)!==0}Z&&bt(()=>{Pt(()=>u.in())})}}function ft(l,a,s,o,g){var p=o===1;if(Yt(a)){var v,b=!1;return Xt(()=>{if(!b){var W=a({direction:p?"in":"out"});v=ft(l,W,s,o,g)}}),{abort:()=>{b=!0,v==null||v.abort()},deactivate:()=>v.deactivate(),reset:()=>v.reset(),t:()=>v.t()}}if(s==null||s.deactivate(),!(a!=null&&a.duration))return g(),{abort:Be,deactivate:Be,reset:Be,t:()=>o};const{delay:z=0,css:f,tick:S,easing:k=gr}=a;var u=[];if(p&&s===void 0&&(S&&S(0,1),f)){var V=Et(f(0,1));u.push(V,V)}var Z=()=>1-o,B=l.animate(u,{duration:z});return B.onfinish=()=>{var W=(s==null?void 0:s.t())??1-o;s==null||s.abort();var w=o-W,I=a.duration*Math.abs(w),_=[];if(I>0){var m=!1;if(f)for(var H=Math.ceil(I/16.666666666666668),L=0;L<=H;L+=1){var j=W+w*k(L/H),t=Et(f(j,1-j));_.push(t),m||(m=t.overflow==="hidden")}m&&(l.style.overflow="hidden"),Z=()=>{var r=B.currentTime;return W+w*k(r/I)},S&&pr(()=>{if(B.playState!=="running")return!1;var r=Z();return S(r,1-r),!0})}B=l.animate(_,{duration:I,fill:"forwards"}),B.onfinish=()=>{Z=()=>o,S==null||S(o,1-o),g()}},{abort:()=>{B&&(B.cancel(),B.effect=null,B.onfinish=Be)},deactivate:()=>{g=Be},reset:()=>{o===0&&(S==null||S(1,0))},t:()=>Z()}}function pt(l,a,s){if(l.multiple)return a==null?void 0:It(a)?kr(l,a):tr();for(var o of l.options){var g=ot(o);if(rr(g,a)){o.selected=!0;return}}(!s||a!==void 0)&&(l.selectedIndex=-1)}function zt(l,a){let s=!0;bt(()=>{a&&pt(l,Pt(a),s),s=!1;var o=new MutationObserver(()=>{var g=l.__value;pt(l,g)});return o.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{o.disconnect()}})}function mr(l,a,s=a){var o=!0;or(l,"change",g=>{var p=g?"[selected]":":checked",v;if(l.multiple)v=[].map.call(l.querySelectorAll(p),ot);else{var b=l.querySelector(p)??l.querySelector("option:not([disabled])");v=b&&ot(b)}s(v)}),bt(()=>{var g=a();if(pt(l,g,o),o&&g===void 0){var p=l.querySelector(":checked");p!==null&&(g=ot(p),s(g))}l.__value=g,o=!1}),zt(l)}function kr(l,a){for(var s of l.options)s.selected=a.includes(ot(s))}function ot(l){return"__value"in l?l.__value:l.value}function ct(l){return function(...a){var s=a[0];return s.stopPropagation(),l==null?void 0:l.apply(this,a)}}function br(l,a){var p;var s=(p=l.$$events)==null?void 0:p[a.type],o=It(s)?s.slice():s==null?[]:[s];for(var g of o)g.call(this,a)}function wr(l,a){Re(a,!0);let s=at(a,["$$slots","$$events","$$legacy"]);st(l,rt({name:"funnel"},()=>s,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:(g,p)=>{var v=Xe(),b=Ye(v);it(b,()=>a.children??Be),U(g,v)},$$slots:{default:!0}})),je()}function yr(l,a){Re(a,!0);let s=at(a,["$$slots","$$events","$$legacy"]);st(l,rt({name:"layout-grid"},()=>s,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(g,p)=>{var v=Xe(),b=Ye(v);it(b,()=>a.children??Be),U(g,v)},$$slots:{default:!0}})),je()}function xr(l,a){Re(a,!0);let s=at(a,["$$slots","$$events","$$legacy"]);st(l,rt({name:"list"},()=>s,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(g,p)=>{var v=Xe(),b=Ye(v);it(b,()=>a.children??Be),U(g,v)},$$slots:{default:!0}})),je()}function qt(l,a){Re(a,!0);let s=at(a,["$$slots","$$events","$$legacy"]);st(l,rt({name:"printer"},()=>s,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(g,p)=>{var v=Xe(),b=Ye(v);it(b,()=>a.children??Be),U(g,v)},$$slots:{default:!0}})),je()}function At(l,a){Re(a,!0);let s=at(a,["$$slots","$$events","$$legacy"]);st(l,rt({name:"triangle-alert"},()=>s,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(g,p)=>{var v=Xe(),b=Ye(v);it(b,()=>a.children??Be),U(g,v)},$$slots:{default:!0}})),je()}function Sr(l,a){Re(a,!0);let s=at(a,["$$slots","$$events","$$legacy"]);st(l,rt({name:"upload"},()=>s,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(g,p)=>{var v=Xe(),b=Ye(v);it(b,()=>a.children??Be),U(g,v)},$$slots:{default:!0}})),je()}const Cr=()=>{const l=dr;return{page:{subscribe:l.page.subscribe},navigating:{subscribe:l.navigating.subscribe},updated:l.updated}},Dr={subscribe(l){return Cr().page.subscribe(l)}};function Er(l,a){M(a,!0)}function $r(l,a,s,o,g,p,v,b,z){var f,S,k,u,V,Z,B;M(a,!1),M(s,o().title),M(g,o().description),M(p,o().duration),M(v,o().chars),M(b,[...o().character_performers||[]]),M(z,{cues:((f=o().techDetails)==null?void 0:f.cues)||"",props:((S=o().techDetails)==null?void 0:S.props)||"",costume:((k=o().techDetails)==null?void 0:k.costume)||"",stage_dressing:((u=o().techDetails)==null?void 0:u.stage_dressing)||"",chairs:((V=o().techDetails)==null?void 0:V.chairs)||0,stools:((Z=o().techDetails)==null?void 0:Z.stools)||0,other_props:((B=o().techDetails)==null?void 0:B.other_props)||""})}function Or(l,a,s,o,g,p,v,b,z,f){var k,u;const S={...a(),title:e(s),description:e(o),duration:e(g),chars:e(p),casted:e(v).length,character_performers:e(v),techDetails:{id:((k=a().techDetails)==null?void 0:k.id)||crypto.randomUUID(),sketch_id:a().id,...e(b),created_at:((u=a().techDetails)==null?void 0:u.created_at)||new Date().toISOString(),updated_at:new Date().toISOString()}};z("update",{sketch:S}),M(f,!1)}var Pr=l=>l.stopPropagation(),Ir=(l,a)=>l.key==="Enter"&&a(),Tr=(l,a,s)=>a(e(s).id),Rr=X('<li class="svelte-kenoik"><span class="character svelte-kenoik"> </span> <span class="performer svelte-kenoik"> </span> <button type="button" class="remove-button svelte-kenoik">Ã—</button></li>'),jr=X('<div class="character-list svelte-kenoik"><h4>Current Assignments</h4> <ul class="svelte-kenoik"></ul></div>'),Mr=X('<div class="edit-form svelte-kenoik"><div class="form-group svelte-kenoik"><label for="title" class="svelte-kenoik">Title</label> <input type="text" id="title" required class="svelte-kenoik"/></div> <div class="form-group svelte-kenoik"><label for="description" class="svelte-kenoik">Description</label> <textarea id="description" class="svelte-kenoik"></textarea></div> <div class="form-group svelte-kenoik"><label for="duration" class="svelte-kenoik">Duration (minutes)</label> <input type="number" id="duration" min="1" required class="svelte-kenoik"/></div> <div class="form-group svelte-kenoik"><label for="chars" class="svelte-kenoik">Number of Characters</label> <input type="number" id="chars" min="1" required class="svelte-kenoik"/></div> <div class="form-group svelte-kenoik"><label class="svelte-kenoik">Character Assignments</label> <div class="character-inputs svelte-kenoik"><input type="text" placeholder="Character name" class="svelte-kenoik"/> <input type="text" placeholder="Performer name" class="svelte-kenoik"/> <button type="button" class="svelte-kenoik">Add</button></div></div> <!> <div class="form-group svelte-kenoik"><label class="svelte-kenoik">Tech Details</label> <div class="tech-grid svelte-kenoik"><div class="tech-item svelte-kenoik"><label for="cues" class="svelte-kenoik">Cues</label> <textarea id="cues" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="props" class="svelte-kenoik">Props</label> <textarea id="props" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="costume" class="svelte-kenoik">Costume</label> <textarea id="costume" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="stage_dressing" class="svelte-kenoik">Stage Dressing</label> <textarea id="stage_dressing" class="svelte-kenoik"></textarea></div> <div class="tech-item svelte-kenoik"><label for="chairs" class="svelte-kenoik">Chairs</label> <input type="number" id="chairs" min="0" class="svelte-kenoik"/></div> <div class="tech-item svelte-kenoik"><label for="stools" class="svelte-kenoik">Stools</label> <input type="number" id="stools" min="0" class="svelte-kenoik"/></div> <div class="tech-item svelte-kenoik"><label for="other_props" class="svelte-kenoik">Other Props</label> <textarea id="other_props" class="svelte-kenoik"></textarea></div></div></div> <div class="form-actions svelte-kenoik"><button type="button" class="svelte-kenoik">Cancel</button> <button type="button" class="svelte-kenoik">Save</button></div></div>'),Lr=X('<p class="description svelte-kenoik"> </p>'),zr=X('<div class="cast-item svelte-kenoik"><span class="character-name svelte-kenoik"> </span> <span class="performer-name svelte-kenoik"> </span></div>'),qr=X('<div class="cast-section svelte-kenoik"><h4 class="section-title svelte-kenoik">Cast</h4> <div class="cast-grid svelte-kenoik"></div></div>'),Ar=X('<div class="tech-grid svelte-kenoik"><div class="tech-item svelte-kenoik"><label for="cues">Cues</label> <textarea id="cues"></textarea></div> <div class="tech-item svelte-kenoik"><label for="props">Props</label> <textarea id="props"></textarea></div> <div class="tech-item svelte-kenoik"><label for="costume">Costume</label> <textarea id="costume"></textarea></div> <div class="tech-item svelte-kenoik"><label for="stage_dressing">Stage Dressing</label> <textarea id="stage_dressing"></textarea></div> <div class="tech-item svelte-kenoik"><label for="chairs">Chairs</label> <input type="number" id="chairs" min="0"/></div> <div class="tech-item svelte-kenoik"><label for="stools">Stools</label> <input type="number" id="stools" min="0"/></div> <div class="tech-item svelte-kenoik"><label for="other_props">Other Props</label> <textarea id="other_props"></textarea></div></div>'),Vr=X('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Cues</span> <span class="tech-value svelte-kenoik"> </span></div>'),Fr=X('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Props</span> <span class="tech-value svelte-kenoik"> </span></div>'),Nr=X('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Costume</span> <span class="tech-value svelte-kenoik"> </span></div>'),Ur=X('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Stage Dressing</span> <span class="tech-value svelte-kenoik"> </span></div>'),Br=X('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Furniture</span> <span class="tech-value svelte-kenoik"> </span></div>'),Hr=X('<div class="tech-item svelte-kenoik"><span class="tech-label svelte-kenoik">Other Props</span> <span class="tech-value svelte-kenoik"> </span></div>'),Wr=X('<div class="tech-grid svelte-kenoik"><!> <!> <!> <!> <!> <!></div>'),Kr=X('<p class="no-tech-details svelte-kenoik">No tech details available for this sketch.</p>'),Jr=X('<div class="view-mode svelte-kenoik"><div class="header svelte-kenoik"><h2 class="svelte-kenoik"> </h2> <button type="button" class="edit-button svelte-kenoik">Edit</button></div> <!> <div class="stats-container svelte-kenoik"><div class="stat-item svelte-kenoik"><span class="stat-label svelte-kenoik">Duration</span> <span class="stat-value svelte-kenoik"> </span></div> <div class="stat-item svelte-kenoik"><span class="stat-label svelte-kenoik">Characters</span> <span class="stat-value svelte-kenoik"> </span></div> <div class="stat-item svelte-kenoik"><span class="stat-label svelte-kenoik">Casted</span> <span class="stat-value svelte-kenoik"> </span></div></div> <!> <div class="tech-section svelte-kenoik"><h4 class="section-title svelte-kenoik">Tech Details</h4> <!></div></div>'),Gr=X('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-start mb-4"><div class="flex items-center gap-4"><button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Back to show"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <h2 class="text-2xl font-bold text-gray-900"> </h2></div> <button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close details"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div></div></div>');function Qr(l,a){var Q,ue,ke,me,re,ae,q;Re(a,!1);let s=pe(a,"sketch",8);const o=We();let g=we(!1),p=we(s().title),v=we(s().description),b=we(s().duration),z=we(s().chars),f=we(""),S=we(""),k=we([...s().character_performers||[]]),u=we({cues:((Q=s().techDetails)==null?void 0:Q.cues)||"",props:((ue=s().techDetails)==null?void 0:ue.props)||"",costume:((ke=s().techDetails)==null?void 0:ke.costume)||"",stage_dressing:((me=s().techDetails)==null?void 0:me.stage_dressing)||"",chairs:((re=s().techDetails)==null?void 0:re.chairs)||0,stools:((ae=s().techDetails)==null?void 0:ae.stools)||0,other_props:((q=s().techDetails)==null?void 0:q.other_props)||""});function V(){!e(f)||!e(S)||(M(k,[...e(k),{id:crypto.randomUUID(),sketch_id:s().id,character_name:e(f),performer_name:e(S),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),M(f,""),M(S,""))}function Z(ie){M(k,e(k).filter(J=>J.id!==ie))}function B(ie){ie.stopPropagation(),o("close")}function W(ie){ie.key==="Escape"&&B(ie)}Ot(()=>(document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W))),He();var w=Gr();w.__click=B;var I=n(w);I.__click=[Pr];var _=n(I),m=n(_),H=n(m),L=n(H);L.__click=B;var j=c(L,2),t=n(j,!0);i(j),i(H);var r=c(H,2);r.__click=B,i(m);var d=c(m,2);{var D=ie=>{var J=Mr(),Y=n(J),$=c(n(Y),2);Ke($),i(Y);var C=c(Y,2),ee=c(n(C),2);Ue(ee),i(C);var y=c(C,2),E=c(n(y),2);Ke(E),i(y);var x=c(y,2),O=c(n(x),2);Ke(O),i(x);var A=c(x,2),h=c(n(A),2),F=n(h);Ke(F);var G=c(F,2);Ke(G),G.__keydown=[Ir,V];var N=c(G,2);N.__click=V,i(h),i(A);var te=c(A,2);{var P=fe=>{var Ge=jr(),Qe=c(n(Ge),2);Ze(Qe,5,()=>e(k),lt,(tt,Oe)=>{var nt=Rr(),ye=n(nt),xe=n(ye,!0);i(ye);var De=c(ye,2),Ve=n(De,!0);i(De);var gt=c(De,2);gt.__click=[Tr,Z,Oe],i(nt),ve(()=>{se(xe,e(Oe).character_name),se(Ve,e(Oe).performer_name)}),U(tt,nt)}),i(Qe),i(Ge),U(fe,Ge)};de(te,fe=>{e(k).length>0&&fe(P)})}var R=c(te,2),K=c(n(R),2),oe=n(K),Ce=c(n(oe),2);Ue(Ce),i(oe);var Te=c(oe,2),$e=c(n(Te),2);Ue($e),i(Te);var qe=c(Te,2),he=c(n(qe),2);Ue(he),i(qe);var ge=c(qe,2),_e=c(n(ge),2);Ue(_e),i(ge);var ce=c(ge,2),le=c(n(ce),2);Ke(le),i(ce);var be=c(ce,2),Me=c(n(be),2);Ke(Me),i(be);var Le=c(be,2),Se=c(n(Le),2);Ue(Se),i(Le),i(K),i(R);var ze=c(R,2),Fe=n(ze);Fe.__click=[$r,g,p,s,v,b,z,k,u];var et=c(Fe,2);et.__click=[Or,s,p,v,b,z,k,u,o,g],i(ze),i(J),Ee($,()=>e(p),fe=>M(p,fe)),Ee(ee,()=>e(v),fe=>M(v,fe)),Ee(E,()=>e(b),fe=>M(b,fe)),Ee(O,()=>e(z),fe=>M(z,fe)),Ee(F,()=>e(f),fe=>M(f,fe)),Ee(G,()=>e(S),fe=>M(S,fe)),Ee(Ce,()=>e(u).cues,fe=>Pe(u,e(u).cues=fe)),Ee($e,()=>e(u).props,fe=>Pe(u,e(u).props=fe)),Ee(he,()=>e(u).costume,fe=>Pe(u,e(u).costume=fe)),Ee(_e,()=>e(u).stage_dressing,fe=>Pe(u,e(u).stage_dressing=fe)),Ee(le,()=>e(u).chairs,fe=>Pe(u,e(u).chairs=fe)),Ee(Me,()=>e(u).stools,fe=>Pe(u,e(u).stools=fe)),Ee(Se,()=>e(u).other_props,fe=>Pe(u,e(u).other_props=fe)),U(ie,J)},T=ie=>{var J=Jr(),Y=n(J),$=n(Y),C=n($,!0);i($);var ee=c($,2);ee.__click=[Er,g],i(Y);var y=c(Y,2);{var E=he=>{var ge=Lr(),_e=n(ge,!0);i(ge),ve(()=>se(_e,s().description)),U(he,ge)};de(y,he=>{s().description&&he(E)})}var x=c(y,2),O=n(x),A=c(n(O),2),h=n(A);i(A),i(O);var F=c(O,2),G=c(n(F),2),N=n(G,!0);i(G),i(F);var te=c(F,2),P=c(n(te),2),R=n(P,!0);i(P),i(te),i(x);var K=c(x,2);{var oe=he=>{var ge=qr(),_e=c(n(ge),2);Ze(_e,5,()=>s().character_performers,lt,(ce,le)=>{var be=zr(),Me=n(be),Le=n(Me,!0);i(Me);var Se=c(Me,2),ze=n(Se,!0);i(Se),i(be),ve(()=>{se(Le,e(le).character_name),se(ze,e(le).performer_name)}),U(ce,be)}),i(_e),i(ge),U(he,ge)};de(K,he=>{var ge;(ge=s().character_performers)!=null&&ge.length&&he(oe)})}var Ce=c(K,2),Te=c(n(Ce),2);{var $e=he=>{var ge=Ar(),_e=n(ge),ce=c(n(_e),2);Ue(ce),i(_e);var le=c(_e,2),be=c(n(le),2);Ue(be),i(le);var Me=c(le,2),Le=c(n(Me),2);Ue(Le),i(Me);var Se=c(Me,2),ze=c(n(Se),2);Ue(ze),i(Se);var Fe=c(Se,2),et=c(n(Fe),2);Ke(et),i(Fe);var fe=c(Fe,2),Ge=c(n(fe),2);Ke(Ge),i(fe);var Qe=c(fe,2),tt=c(n(Qe),2);Ue(tt),i(Qe),i(ge),Ee(ce,()=>e(u).cues,Oe=>Pe(u,e(u).cues=Oe)),Ee(be,()=>e(u).props,Oe=>Pe(u,e(u).props=Oe)),Ee(Le,()=>e(u).costume,Oe=>Pe(u,e(u).costume=Oe)),Ee(ze,()=>e(u).stage_dressing,Oe=>Pe(u,e(u).stage_dressing=Oe)),Ee(et,()=>e(u).chairs,Oe=>Pe(u,e(u).chairs=Oe)),Ee(Ge,()=>e(u).stools,Oe=>Pe(u,e(u).stools=Oe)),Ee(tt,()=>e(u).other_props,Oe=>Pe(u,e(u).other_props=Oe)),U(he,ge)},qe=(he,ge)=>{{var _e=le=>{var be=Wr(),Me=n(be);{var Le=ye=>{var xe=Vr(),De=c(n(xe),2),Ve=n(De,!0);i(De),i(xe),ve(()=>se(Ve,s().techDetails.cues)),U(ye,xe)};de(Me,ye=>{s().techDetails.cues&&ye(Le)})}var Se=c(Me,2);{var ze=ye=>{var xe=Fr(),De=c(n(xe),2),Ve=n(De,!0);i(De),i(xe),ve(()=>se(Ve,s().techDetails.props)),U(ye,xe)};de(Se,ye=>{s().techDetails.props&&ye(ze)})}var Fe=c(Se,2);{var et=ye=>{var xe=Nr(),De=c(n(xe),2),Ve=n(De,!0);i(De),i(xe),ve(()=>se(Ve,s().techDetails.costume)),U(ye,xe)};de(Fe,ye=>{s().techDetails.costume&&ye(et)})}var fe=c(Fe,2);{var Ge=ye=>{var xe=Ur(),De=c(n(xe),2),Ve=n(De,!0);i(De),i(xe),ve(()=>se(Ve,s().techDetails.stage_dressing)),U(ye,xe)};de(fe,ye=>{s().techDetails.stage_dressing&&ye(Ge)})}var Qe=c(fe,2);{var tt=ye=>{var xe=Br(),De=c(n(xe),2),Ve=n(De,!0);i(De),i(xe),ve(gt=>se(Ve,gt),[()=>[s().techDetails.chairs>0?`${s().techDetails.chairs} chair${s().techDetails.chairs!==1?"s":""}`:null,s().techDetails.stools>0?`${s().techDetails.stools} stool${s().techDetails.stools!==1?"s":""}`:null].filter(Boolean).join(", ")],Ae),U(ye,xe)};de(Qe,ye=>{(s().techDetails.chairs>0||s().techDetails.stools>0)&&ye(tt)})}var Oe=c(Qe,2);{var nt=ye=>{var xe=Hr(),De=c(n(xe),2),Ve=n(De,!0);i(De),i(xe),ve(()=>se(Ve,s().techDetails.other_props)),U(ye,xe)};de(Oe,ye=>{s().techDetails.other_props&&ye(nt)})}i(be),U(le,be)},ce=le=>{var be=Kr();U(le,be)};de(he,le=>{s().techDetails?le(_e):le(ce,!1)},ge)}};de(Te,he=>{e(g)?he($e):he(qe,!1)})}i(Ce),i(J),ve(()=>{se(C,s().title),se(h,`${s().duration??""} min`),se(N,s().chars),se(R,s().casted)}),U(ie,J)};de(d,ie=>{e(g)?ie(D):ie(T,!1)})}i(_),i(I),i(w),ve(()=>se(t,s().title)),U(l,w),je()}Rt(["click","keydown"]);var Zr=X('<div class="detail svelte-u5cezq"><strong>Costume:</strong> </div>'),Yr=X('<span class="differential svelte-u5cezq"> </span>'),Xr=X('<div class="detail svelte-u5cezq"><strong>Stage:</strong> <!></div>'),ea=X('<div class="detail svelte-u5cezq"><strong>Stage:</strong> <span class="differential svelte-u5cezq"> </span></div>'),ta=X('<div class="detail svelte-u5cezq"><strong>Cues:</strong> </div>'),ra=X('<div class="detail svelte-u5cezq"><strong>Props:</strong> </div>'),aa=X('<div class="tech-details svelte-u5cezq"><!> <!></div>'),sa=X('<div class="sketch svelte-u5cezq"><div class="sketch-header svelte-u5cezq"><span class="position svelte-u5cezq"> </span> <span class="title svelte-u5cezq"> </span> <span class="duration svelte-u5cezq"> </span></div> <div class="performers svelte-u5cezq"><!></div> <div class="tech-details svelte-u5cezq"><!> <!></div> <!></div>'),ia=X('<div class="print-container svelte-u5cezq"><div class="header svelte-u5cezq"><h1 class="svelte-u5cezq"> </h1> <div class="version-info svelte-u5cezq"><!></div></div> <div class="sketches svelte-u5cezq"></div></div>');function na(l,a){Re(a,!1);const s=we();let o=pe(a,"sketches",8),g=pe(a,"showTitle",8),p=pe(a,"version",8);function v(I){const _=Math.floor(I/60),m=I%60;return _>0?`${_}h ${m}m`:`${m}m`}function b(I){return(I.character_performers||[]).map(_=>p()==="greenroom"?`<strong>${_.performer_name.toUpperCase()}</strong>`:_.performer_name).join(", ")}function z(I,_){var d,D,T,Q;console.log("Current sketch:",{title:I.title,techDetails:JSON.stringify(I.techDetails,null,2)}),console.log("Previous sketch:",_?{title:_.title,techDetails:JSON.stringify(_.techDetails,null,2)}:"none");const m={chairs:((d=I.techDetails)==null?void 0:d.chairs)??0,stools:((D=I.techDetails)==null?void 0:D.stools)??0},H=_?{chairs:((T=_.techDetails)==null?void 0:T.chairs)??0,stools:((Q=_.techDetails)==null?void 0:Q.stools)??0}:{chairs:0,stools:0};console.log("Calculating differential:",{current:m,previous:H,chairDiff:m.chairs-H.chairs,stoolDiff:m.stools-H.stools});const L=m.chairs-H.chairs,j=m.stools-H.stools,t=[];L!==0&&t.push(`${L>0?"+":""}${L} chair${Math.abs(L)!==1?"s":""}`),j!==0&&t.push(`${j>0?"+":""}${j} stool${Math.abs(j)!==1?"s":""}`);const r=t.length>0?`(${t.join(", ")})`:"";return console.log("Differential result:",r),r}ut(()=>ar(o()),()=>{M(s,[...o()].sort((I,_)=>I.position-_.position))}),Tt(),He();var f=ia(),S=n(f),k=n(S),u=n(k,!0);i(k);var V=c(k,2),Z=n(V);{var B=I=>{var _=mt("Green Room Version");U(I,_)},W=(I,_)=>{{var m=L=>{var j=mt("Hallway Version");U(L,j)},H=L=>{var j=mt("Tech Booth Version");U(L,j)};de(I,L=>{p()==="hallway"?L(m):L(H,!1)},_)}};de(Z,I=>{p()==="greenroom"?I(B):I(W,!1)})}i(V),i(S);var w=c(S,2);Ze(w,5,()=>e(s),lt,(I,_,m)=>{var H=sa(),L=n(H),j=n(L),t=n(j);i(j);var r=c(j,2),d=n(r,!0);i(r);var D=c(r,2),T=n(D,!0);i(D),i(L);var Q=c(L,2),ue=n(Q);hr(ue,()=>b(e(_))),i(Q);var ke=c(Q,2),me=n(ke);{var re=$=>{var C=Zr(),ee=c(n(C));i(C),ve(()=>se(ee,` ${e(_).techDetails.costume??""}`)),U($,C)};de(me,$=>{var C;(p()==="greenroom"||p()==="hallway")&&((C=e(_).techDetails)!=null&&C.costume)&&$(re)})}var ae=c(me,2);{var q=$=>{var C=Xr(),ee=c(n(C)),y=c(ee);{var E=x=>{var O=Yr(),A=n(O,!0);i(O),ve(h=>se(A,h),[()=>z(e(_),e(s)[m-1])],Ae),U(x,O)};de(y,x=>{p()==="hallway"&&x(E)})}i(C),ve(()=>se(ee,` ${e(_).techDetails.stage_dressing??""} `)),U($,C)},ie=($,C)=>{{var ee=y=>{var E=ea(),x=c(n(E),2),O=n(x,!0);i(x),i(E),ve(A=>se(O,A),[()=>z(e(_),e(s)[m-1])],Ae),U(y,E)};de($,y=>{p()==="hallway"&&y(ee)},C)}};de(ae,$=>{var C;(p()==="hallway"||p()==="techbooth")&&((C=e(_).techDetails)!=null&&C.stage_dressing)?$(q):$(ie,!1)})}i(ke);var J=c(ke,2);{var Y=$=>{var C=aa(),ee=n(C);{var y=O=>{var A=ta(),h=c(n(A));i(A),ve(()=>se(h,` ${e(_).techDetails.cues??""}`)),U(O,A)};de(ee,O=>{var A;(A=e(_).techDetails)!=null&&A.cues&&O(y)})}var E=c(ee,2);{var x=O=>{var A=ra(),h=c(n(A));i(A),ve(()=>se(h,` ${e(_).techDetails.props??""}`)),U(O,A)};de(E,O=>{var A;(A=e(_).techDetails)!=null&&A.props&&O(x)})}i(C),U($,C)};de(J,$=>{p()==="techbooth"&&$(Y)})}i(H),ve($=>{se(t,`${e(_).position+1}.`),se(d,e(_).title),se(T,$)},[()=>v(e(_).duration)],Ae),U(I,H)}),i(w),i(f),ve(()=>se(u,g())),U(l,f),je()}var oa=X("<option> </option>"),la=X('<div class="performer-filter svelte-9vn570"><label for="performer-select" class="svelte-9vn570">Filter by Performer</label> <select id="performer-select" class="svelte-9vn570"><option>All Performers</option><!></select></div>');function Vt(l,a){Re(a,!1);let s=pe(a,"performers",24,()=>[]),o=pe(a,"selectedPerformer",12,null);const g=We();function p(k){const u=k.target,V=u.value===""?null:u.value;o(V),g("select",{performer:V})}He();var v=la(),b=c(n(v),2);zt(b,()=>o()||"");var z,f=n(b);f.value=f.__value="";var S=c(f);Ze(S,1,s,lt,(k,u)=>{var V=oa(),Z={},B=n(V,!0);i(V),ve(()=>{Z!==(Z=e(u))&&(V.value=(V.__value=e(u))??""),se(B,e(u))}),U(k,V)}),i(b),i(v),ve(()=>{z!==(z=o()||"")&&(b.value=(b.__value=o()||"")??"",pt(b,o()||""))}),ne("change",b,p),U(l,v),je()}function ca(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var ht={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var da=ht.exports,$t;function va(){return $t||($t=1,function(l,a){((s,o)=>{l.exports=o()})(da,function s(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},g,p=!o.document&&!!o.postMessage,v=o.IS_PAPA_WORKER||!1,b={},z=0,f={};function S(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(r){var d=H(r);d.chunkSize=parseInt(d.chunkSize),r.step||r.chunk||(d.chunkSize=null),this._handle=new B(d),(this._handle.streamer=this)._config=d}).call(this,t),this.parseChunk=function(r,d){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let Q=this._config.newline;Q||(T=this._config.quoteChar||'"',Q=this._handle.guessLineEndings(r,T)),r=[...r.split(Q).slice(D)].join(Q)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(T=this._config.beforeFirstChunk(r))!==void 0&&(r=T),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+r,T=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(r=T.meta.cursor,D=(this._finished||(this._partialLine=D.substring(r-this._baseIndex),this._baseIndex=r),T&&T.data&&(this._rowCount+=T.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),v)o.postMessage({results:T,workerId:f.WORKER_ID,finished:D});else if(j(this._config.chunk)&&!d){if(this._config.chunk(T,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=T=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(T.data),this._completeResults.errors=this._completeResults.errors.concat(T.errors),this._completeResults.meta=T.meta),this._completed||!D||!j(this._config.complete)||T&&T.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||T&&T.meta.paused||this._nextChunk(),T}this._halted=!0},this._sendError=function(r){j(this._config.error)?this._config.error(r):v&&this._config.error&&o.postMessage({workerId:f.WORKER_ID,error:r,finished:!1})}}function k(t){var r;(t=t||{}).chunkSize||(t.chunkSize=f.RemoteChunkSize),S.call(this,t),this._nextChunk=p?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),p||(r.onload=L(this._chunkLoaded,this),r.onerror=L(this._chunkError,this)),r.open(this._config.downloadRequestBody?"POST":"GET",this._input,!p),this._config.downloadRequestHeaders){var d,D=this._config.downloadRequestHeaders;for(d in D)r.setRequestHeader(d,D[d])}var T;this._config.chunkSize&&(T=this._start+this._config.chunkSize-1,r.setRequestHeader("Range","bytes="+this._start+"-"+T));try{r.send(this._config.downloadRequestBody)}catch(Q){this._chunkError(Q.message)}p&&r.status===0&&this._chunkError()}},this._chunkLoaded=function(){r.readyState===4&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize||r.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(r),this.parseChunk(r.responseText)))},this._chunkError=function(d){d=r.statusText||d,this._sendError(new Error(d))}}function u(t){(t=t||{}).chunkSize||(t.chunkSize=f.LocalChunkSize),S.call(this,t);var r,d,D=typeof FileReader<"u";this.stream=function(T){this._input=T,d=T.slice||T.webkitSlice||T.mozSlice,D?((r=new FileReader).onload=L(this._chunkLoaded,this),r.onerror=L(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input,Q=(this._config.chunkSize&&(Q=Math.min(this._start+this._config.chunkSize,this._input.size),T=d.call(T,this._start,Q)),r.readAsText(T,this._config.encoding));D||this._chunkLoaded({target:{result:Q}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(r.error)}}function V(t){var r;S.call(this,t=t||{}),this.stream=function(d){return r=d,this._nextChunk()},this._nextChunk=function(){var d,D;if(!this._finished)return d=this._config.chunkSize,r=d?(D=r.substring(0,d),r.substring(d)):(D=r,""),this._finished=!r,this.parseChunk(D)}}function Z(t){S.call(this,t=t||{});var r=[],d=!0,D=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&r.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),r.length?this.parseChunk(r.shift()):d=!0},this._streamData=L(function(T){try{r.push(typeof T=="string"?T:T.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(r.shift()))}catch(Q){this._streamError(Q)}},this),this._streamError=L(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=L(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=L(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function B(t){var r,d,D,T,Q=Math.pow(2,53),ue=-Q,ke=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,me=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,re=this,ae=0,q=0,ie=!1,J=!1,Y=[],$={data:[],errors:[],meta:{}};function C(x){return t.skipEmptyLines==="greedy"?x.join("").trim()==="":x.length===1&&x[0].length===0}function ee(){if($&&D&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),D=!1),t.skipEmptyLines&&($.data=$.data.filter(function(h){return!C(h)})),y()){let h=function(F,G){j(t.transformHeader)&&(F=t.transformHeader(F,G)),Y.push(F)};if($)if(Array.isArray($.data[0])){for(var x=0;y()&&x<$.data.length;x++)$.data[x].forEach(h);$.data.splice(0,1)}else $.data.forEach(h)}function O(h,F){for(var G=t.header?{}:[],N=0;N<h.length;N++){var te=N,P=h[N],P=((R,K)=>(oe=>(t.dynamicTypingFunction&&t.dynamicTyping[oe]===void 0&&(t.dynamicTyping[oe]=t.dynamicTypingFunction(oe)),(t.dynamicTyping[oe]||t.dynamicTyping)===!0))(R)?K==="true"||K==="TRUE"||K!=="false"&&K!=="FALSE"&&((oe=>{if(ke.test(oe)&&(oe=parseFloat(oe),ue<oe&&oe<Q))return 1})(K)?parseFloat(K):me.test(K)?new Date(K):K===""?null:K):K)(te=t.header?N>=Y.length?"__parsed_extra":Y[N]:te,P=t.transform?t.transform(P,te):P);te==="__parsed_extra"?(G[te]=G[te]||[],G[te].push(P)):G[te]=P}return t.header&&(N>Y.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+Y.length+" fields but parsed "+N,q+F):N<Y.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+Y.length+" fields but parsed "+N,q+F)),G}var A;$&&(t.header||t.dynamicTyping||t.transform)&&(A=1,!$.data.length||Array.isArray($.data[0])?($.data=$.data.map(O),A=$.data.length):$.data=O($.data,0),t.header&&$.meta&&($.meta.fields=Y),q+=A)}function y(){return t.header&&Y.length===0}function E(x,O,A,h){x={type:x,code:O,message:A},h!==void 0&&(x.row=h),$.errors.push(x)}j(t.step)&&(T=t.step,t.step=function(x){$=x,y()?ee():(ee(),$.data.length!==0&&(ae+=x.data.length,t.preview&&ae>t.preview?d.abort():($.data=$.data[0],T($,re))))}),this.parse=function(x,O,A){var h=t.quoteChar||'"',h=(t.newline||(t.newline=this.guessLineEndings(x,h)),D=!1,t.delimiter?j(t.delimiter)&&(t.delimiter=t.delimiter(x),$.meta.delimiter=t.delimiter):((h=((F,G,N,te,P)=>{var R,K,oe,Ce;P=P||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var Te=0;Te<P.length;Te++){for(var $e,qe=P[Te],he=0,ge=0,_e=0,ce=(oe=void 0,new w({comments:te,delimiter:qe,newline:G,preview:10}).parse(F)),le=0;le<ce.data.length;le++)N&&C(ce.data[le])?_e++:($e=ce.data[le].length,ge+=$e,oe===void 0?oe=$e:0<$e&&(he+=Math.abs($e-oe),oe=$e));0<ce.data.length&&(ge/=ce.data.length-_e),(K===void 0||he<=K)&&(Ce===void 0||Ce<ge)&&1.99<ge&&(K=he,R=qe,Ce=ge)}return{successful:!!(t.delimiter=R),bestDelimiter:R}})(x,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=h.bestDelimiter:(D=!0,t.delimiter=f.DefaultDelimiter),$.meta.delimiter=t.delimiter),H(t));return t.preview&&t.header&&h.preview++,r=x,d=new w(h),$=d.parse(r,O,A),ee(),ie?{meta:{paused:!0}}:$||{meta:{paused:!1}}},this.paused=function(){return ie},this.pause=function(){ie=!0,d.abort(),r=j(t.chunk)?"":r.substring(d.getCharIndex())},this.resume=function(){re.streamer._halted?(ie=!1,re.streamer.parseChunk(r,!0)):setTimeout(re.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,d.abort(),$.meta.aborted=!0,j(t.complete)&&t.complete($),r=""},this.guessLineEndings=function(F,h){F=F.substring(0,1048576);var h=new RegExp(W(h)+"([^]*?)"+W(h),"gm"),A=(F=F.replace(h,"")).split("\r"),h=F.split(`
`),F=1<h.length&&h[0].length<A[0].length;if(A.length===1||F)return`
`;for(var G=0,N=0;N<A.length;N++)A[N][0]===`
`&&G++;return G>=A.length/2?`\r
`:"\r"}}function W(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(t){var r=(t=t||{}).delimiter,d=t.newline,D=t.comments,T=t.step,Q=t.preview,ue=t.fastMode,ke=null,me=!1,re=t.quoteChar==null?'"':t.quoteChar,ae=re;if(t.escapeChar!==void 0&&(ae=t.escapeChar),(typeof r!="string"||-1<f.BAD_DELIMITERS.indexOf(r))&&(r=","),D===r)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<f.BAD_DELIMITERS.indexOf(D))&&(D=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var q=0,ie=!1;this.parse=function(J,Y,$){if(typeof J!="string")throw new Error("Input must be a string");var C=J.length,ee=r.length,y=d.length,E=D.length,x=j(T),O=[],A=[],h=[],F=q=0;if(!J)return he();if(ue||ue!==!1&&J.indexOf(re)===-1){for(var G=J.split(d),N=0;N<G.length;N++){if(h=G[N],q+=h.length,N!==G.length-1)q+=d.length;else if($)return he();if(!D||h.substring(0,E)!==D){if(x){if(O=[],Ce(h.split(r)),ge(),ie)return he()}else Ce(h.split(r));if(Q&&Q<=N)return O=O.slice(0,Q),he(!0)}}return he()}for(var te=J.indexOf(r,q),P=J.indexOf(d,q),R=new RegExp(W(ae)+W(re),"g"),K=J.indexOf(re,q);;)if(J[q]===re)for(K=q,q++;;){if((K=J.indexOf(re,K+1))===-1)return $||A.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:O.length,index:q}),$e();if(K===C-1)return $e(J.substring(q,K).replace(R,re));if(re===ae&&J[K+1]===ae)K++;else if(re===ae||K===0||J[K-1]!==ae){te!==-1&&te<K+1&&(te=J.indexOf(r,K+1));var oe=Te((P=P!==-1&&P<K+1?J.indexOf(d,K+1):P)===-1?te:Math.min(te,P));if(J.substr(K+1+oe,ee)===r){h.push(J.substring(q,K).replace(R,re)),J[q=K+1+oe+ee]!==re&&(K=J.indexOf(re,q)),te=J.indexOf(r,q),P=J.indexOf(d,q);break}if(oe=Te(P),J.substring(K+1+oe,K+1+oe+y)===d){if(h.push(J.substring(q,K).replace(R,re)),qe(K+1+oe+y),te=J.indexOf(r,q),K=J.indexOf(re,q),x&&(ge(),ie))return he();if(Q&&O.length>=Q)return he(!0);break}A.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:O.length,index:q}),K++}}else if(D&&h.length===0&&J.substring(q,q+E)===D){if(P===-1)return he();q=P+y,P=J.indexOf(d,q),te=J.indexOf(r,q)}else if(te!==-1&&(te<P||P===-1))h.push(J.substring(q,te)),q=te+ee,te=J.indexOf(r,q);else{if(P===-1)break;if(h.push(J.substring(q,P)),qe(P+y),x&&(ge(),ie))return he();if(Q&&O.length>=Q)return he(!0)}return $e();function Ce(_e){O.push(_e),F=q}function Te(_e){var ce=0;return ce=_e!==-1&&(_e=J.substring(K+1,_e))&&_e.trim()===""?_e.length:ce}function $e(_e){return $||(_e===void 0&&(_e=J.substring(q)),h.push(_e),q=C,Ce(h),x&&ge()),he()}function qe(_e){q=_e,Ce(h),h=[],P=J.indexOf(d,q)}function he(_e){if(t.header&&!Y&&O.length&&!me){var ce=O[0],le=Object.create(null),be=new Set(ce);let Me=!1;for(let Le=0;Le<ce.length;Le++){let Se=ce[Le];if(le[Se=j(t.transformHeader)?t.transformHeader(Se,Le):Se]){let ze,Fe=le[Se];for(;ze=Se+"_"+Fe,Fe++,be.has(ze););be.add(ze),ce[Le]=ze,le[Se]++,Me=!0,(ke=ke===null?{}:ke)[ze]=Se}else le[Se]=1,ce[Le]=Se;be.add(Se)}Me&&console.warn("Duplicate headers found and renamed."),me=!0}return{data:O,errors:A,meta:{delimiter:r,linebreak:d,aborted:ie,truncated:!!_e,cursor:F+(Y||0),renamedHeaders:ke}}}function ge(){T(he()),O=[],A=[]}},this.abort=function(){ie=!0},this.getCharIndex=function(){return q}}function I(t){var r=t.data,d=b[r.workerId],D=!1;if(r.error)d.userError(r.error,r.file);else if(r.results&&r.results.data){var T={abort:function(){D=!0,_(r.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(j(d.userStep)){for(var Q=0;Q<r.results.data.length&&(d.userStep({data:r.results.data[Q],errors:r.results.errors,meta:r.results.meta},T),!D);Q++);delete r.results}else j(d.userChunk)&&(d.userChunk(r.results,T,r.file),delete r.results)}r.finished&&!D&&_(r.workerId,r.results)}function _(t,r){var d=b[t];j(d.userComplete)&&d.userComplete(r),d.terminate(),delete b[t]}function m(){throw new Error("Not implemented.")}function H(t){if(typeof t!="object"||t===null)return t;var r,d=Array.isArray(t)?[]:{};for(r in t)d[r]=H(t[r]);return d}function L(t,r){return function(){t.apply(r,arguments)}}function j(t){return typeof t=="function"}return f.parse=function(t,r){var d=(r=r||{}).dynamicTyping||!1;if(j(d)&&(r.dynamicTypingFunction=d,d={}),r.dynamicTyping=d,r.transform=!!j(r.transform)&&r.transform,!r.worker||!f.WORKERS_SUPPORTED)return d=null,f.NODE_STREAM_INPUT,typeof t=="string"?(t=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(t),d=new(r.download?k:V)(r)):t.readable===!0&&j(t.read)&&j(t.on)?d=new Z(r):(o.File&&t instanceof File||t instanceof Object)&&(d=new u(r)),d.stream(t);(d=(()=>{var D;return!!f.WORKERS_SUPPORTED&&(D=(()=>{var T=o.URL||o.webkitURL||null,Q=s.toString();return f.BLOB_URL||(f.BLOB_URL=T.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Q,")();"],{type:"text/javascript"})))})(),(D=new o.Worker(D)).onmessage=I,D.id=z++,b[D.id]=D)})()).userStep=r.step,d.userChunk=r.chunk,d.userComplete=r.complete,d.userError=r.error,r.step=j(r.step),r.chunk=j(r.chunk),r.complete=j(r.complete),r.error=j(r.error),delete r.worker,d.postMessage({input:t,config:r,workerId:d.id})},f.unparse=function(t,r){var d=!1,D=!0,T=",",Q=`\r
`,ue='"',ke=ue+ue,me=!1,re=null,ae=!1,q=((()=>{if(typeof r=="object"){if(typeof r.delimiter!="string"||f.BAD_DELIMITERS.filter(function(Y){return r.delimiter.indexOf(Y)!==-1}).length||(T=r.delimiter),typeof r.quotes!="boolean"&&typeof r.quotes!="function"&&!Array.isArray(r.quotes)||(d=r.quotes),typeof r.skipEmptyLines!="boolean"&&typeof r.skipEmptyLines!="string"||(me=r.skipEmptyLines),typeof r.newline=="string"&&(Q=r.newline),typeof r.quoteChar=="string"&&(ue=r.quoteChar),typeof r.header=="boolean"&&(D=r.header),Array.isArray(r.columns)){if(r.columns.length===0)throw new Error("Option columns is empty");re=r.columns}r.escapeChar!==void 0&&(ke=r.escapeChar+ue),r.escapeFormulae instanceof RegExp?ae=r.escapeFormulae:typeof r.escapeFormulae=="boolean"&&r.escapeFormulae&&(ae=/^[=+\-@\t\r].*$/)}})(),new RegExp(W(ue),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return ie(null,t,me);if(typeof t[0]=="object")return ie(re||Object.keys(t[0]),t,me)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||re),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),ie(t.fields||[],t.data||[],me);throw new Error("Unable to serialize unrecognized input");function ie(Y,$,C){var ee="",y=(typeof Y=="string"&&(Y=JSON.parse(Y)),typeof $=="string"&&($=JSON.parse($)),Array.isArray(Y)&&0<Y.length),E=!Array.isArray($[0]);if(y&&D){for(var x=0;x<Y.length;x++)0<x&&(ee+=T),ee+=J(Y[x],x);0<$.length&&(ee+=Q)}for(var O=0;O<$.length;O++){var A=(y?Y:$[O]).length,h=!1,F=y?Object.keys($[O]).length===0:$[O].length===0;if(C&&!y&&(h=C==="greedy"?$[O].join("").trim()==="":$[O].length===1&&$[O][0].length===0),C==="greedy"&&y){for(var G=[],N=0;N<A;N++){var te=E?Y[N]:N;G.push($[O][te])}h=G.join("").trim()===""}if(!h){for(var P=0;P<A;P++){0<P&&!F&&(ee+=T);var R=y&&E?Y[P]:P;ee+=J($[O][R],P)}O<$.length-1&&(!C||0<A&&!F)&&(ee+=Q)}}return ee}function J(Y,$){var C,ee;return Y==null?"":Y.constructor===Date?JSON.stringify(Y).slice(1,25):(ee=!1,ae&&typeof Y=="string"&&ae.test(Y)&&(Y="'"+Y,ee=!0),C=Y.toString().replace(q,ke),(ee=ee||d===!0||typeof d=="function"&&d(Y,$)||Array.isArray(d)&&d[$]||((y,E)=>{for(var x=0;x<E.length;x++)if(-1<y.indexOf(E[x]))return!0;return!1})(C,f.BAD_DELIMITERS)||-1<C.indexOf(T)||C.charAt(0)===" "||C.charAt(C.length-1)===" ")?ue+C+ue:C)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!p&&!!o.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=w,f.ParserHandle=B,f.NetworkStreamer=k,f.FileStreamer=u,f.StringStreamer=V,f.ReadableStreamStreamer=Z,o.jQuery&&((g=o.jQuery).fn.parse=function(t){var r=t.config||{},d=[];return this.each(function(Q){if(!(g(this).prop("tagName").toUpperCase()==="INPUT"&&g(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var ue=0;ue<this.files.length;ue++)d.push({file:this.files[ue],inputElem:this,instanceConfig:g.extend({},r)})}),D(),this;function D(){if(d.length===0)j(t.complete)&&t.complete();else{var Q,ue,ke,me,re=d[0];if(j(t.before)){var ae=t.before(re.file,re.inputElem);if(typeof ae=="object"){if(ae.action==="abort")return Q="AbortError",ue=re.file,ke=re.inputElem,me=ae.reason,void(j(t.error)&&t.error({name:Q},ue,ke,me));if(ae.action==="skip")return void T();typeof ae.config=="object"&&(re.instanceConfig=g.extend(re.instanceConfig,ae.config))}else if(ae==="skip")return void T()}var q=re.instanceConfig.complete;re.instanceConfig.complete=function(ie){j(q)&&q(ie,re.file,re.inputElem),T()},f.parse(re.file,re.instanceConfig)}}function T(){d.splice(0,1),D()}}),v&&(o.onmessage=function(t){t=t.data,f.WORKER_ID===void 0&&t&&(f.WORKER_ID=t.workerId),typeof t.input=="string"?o.postMessage({workerId:f.WORKER_ID,results:f.parse(t.input,t.config),finished:!0}):(o.File&&t.input instanceof File||t.input instanceof Object)&&(t=f.parse(t.input,t.config))&&o.postMessage({workerId:f.WORKER_ID,results:t,finished:!0})}),(k.prototype=Object.create(S.prototype)).constructor=k,(u.prototype=Object.create(S.prototype)).constructor=u,(V.prototype=Object.create(V.prototype)).constructor=V,(Z.prototype=Object.create(S.prototype)).constructor=Z,f})}(ht)),ht.exports}var ua=va();const ha=ca(ua);function fa(l){const a=ha.parse(l,{header:!0,skipEmptyLines:!0,transformHeader:s=>s.trim().toLowerCase(),dynamicTyping:!1,transform:s=>s.trim()});return a.errors.length>0?(console.error("CSV Parsing Errors with Papaparse:",a.errors),a.data.filter(o=>o&&typeof o=="object"&&Object.keys(o).length>0)):a.data.filter(s=>s&&typeof s=="object"&&Object.keys(s).length>0)}function pa(l){const a={},s=["total","actors","chars/actor","min number","people with extra"];return l.forEach(o=>{var V,Z;const g=(V=o.title)==null?void 0:V.trim(),p=parseInt(o.chars||"",10);if(!g||s.includes(g.toLowerCase())||isNaN(p)||p<=0)return;const v=[],b=Object.keys(o),z=b.findIndex(B=>B.toLowerCase()==="casted");if(console.log(`Processing sketch "${g}":`,{castedIndex:z,columns:b}),z!==-1)for(let B=z+1;B<b.length;B++){const W=b[B].trim(),w=(Z=o[b[B]])==null?void 0:Z.trim();W&&w&&(console.log("Found character-performer pair:",{performerName:W,characterName:w}),v.push({character_name:w,performer_name:W}))}const f=o.time||o.duration||"5:00",[S,k]=f.split(":").map(Number),u=S+(k||0)/60;a[g]={id:crypto.randomUUID(),title:g,description:o.description||"",duration:Math.ceil(u),chars:parseInt(o.chars||"0",10),casted:v.length,locked:!1,character_performers:v.map(B=>({character_name:B.character_name,performer_name:B.performer_name})),raw_data:o}}),console.log("Processed sketches with character performers:",Object.values(a).map(o=>({title:o.title,character_performers:o.character_performers}))),Object.values(a)}async function _a(l){return new Promise((a,s)=>{const o=new FileReader;o.onload=g=>{var p;try{const v=(p=g.target)==null?void 0:p.result,b=fa(v);a(b)}catch(v){s(v)}},o.onerror=()=>s(o.error),o.readAsText(l)})}var ga=X('<div><h2 class="text-lg font-medium text-gray-900 mb-4">Import Running Order</h2> <div class="space-y-6"><div class="flex items-center justify-center w-full"><label for="csv-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"><div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg> <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p> <p class="text-xs text-gray-500">CSV files only</p></div> <input id="csv-file" type="file" accept=".csv" class="hidden"/></label></div> <button type="button" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-2">Upload CSV</button></div></div>');function ma(l,a){Re(a,!1),pe(a,"showId",8);const s=We();let o=we(),g=we(!1);function p(w){const I=w.map(r=>r.toLowerCase().trim());if(["sketch","cues","props","costume","stage dressing"].every(r=>I.includes(r)))return"techDetails";const H=["title"],L=["time","chars","casted","rocio","jacob","adrian","vera","max","gusta","richie","harry","connor","kieran","chiara","lari","theresa","cliff","tim"],j=H.every(r=>I.includes(r)),t=L.some(r=>I.includes(r));return j&&t?"sketches":"unknown"}async function v(){const w=e(o).files;if(!(!w||w.length===0))try{const I=w[0],_=await _a(I);if(!_||_.length===0){alert("CSV file is empty or could not be processed."),Pe(o,e(o).value="");return}const m=Object.keys(_[0]),H=p(m);if(H==="unknown"){alert('Could not automatically determine CSV type. Please check the file headers and format. Expected headers for sketches: "title" and at least one of "Time", "chars", etc. Expected headers for tech details: "Sketch", "Cues", "Props", "Costume", "Stage Dressing".'),Pe(o,e(o).value="");return}let L;H==="sketches"?L=pa(_):L=_,s("import",{importType:H,data:L}),Pe(o,e(o).value="")}catch(I){console.error("Error importing CSV:",I),alert("Error importing CSV file. Please check the file format and content."),Pe(o,e(o).value="")}}function b(w){w.preventDefault(),M(g,!0)}function z(w){w.preventDefault(),M(g,!1)}function f(w){var _;w.preventDefault(),M(g,!1);const I=(_=w.dataTransfer)==null?void 0:_.files;I&&I.length>0&&(Pe(o,e(o).files=I),v())}He();var S=ga();let k;var u=c(n(S),2),V=n(u),Z=n(V),B=c(n(Z),2);ur(B,w=>M(o,w),()=>e(o)),i(Z),i(V);var W=c(V,2);W.__click=v,i(u),i(S),ve(w=>k=Ie(S,1,"bg-white p-6 rounded-lg shadow-sm",null,k,w),[()=>({"border-2":e(g),"border-dashed":e(g),"border-blue-500":e(g)})],Ae),ne("dragover",S,w=>b(w)),ne("dragleave",S,w=>z(w)),ne("drop",S,w=>f(w)),U(l,S),je()}Rt(["click"]);const ka=l=>l;function ba(l){const a=l-1;return a*a*a+1}function wa(l,{delay:a=0,duration:s=400,easing:o=ka}={}){const g=+getComputedStyle(l).opacity;return{delay:a,duration:s,easing:o,css:p=>`opacity: ${p*g}`}}function ya(l,{delay:a=0,duration:s=400,easing:o=ba,axis:g="y"}={}){const p=getComputedStyle(l),v=+p.opacity,b=g==="y"?"height":"width",z=parseFloat(p[b]),f=g==="y"?["top","bottom"]:["left","right"],S=f.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),k=parseFloat(p[`padding${S[0]}`]),u=parseFloat(p[`padding${S[1]}`]),V=parseFloat(p[`margin${S[0]}`]),Z=parseFloat(p[`margin${S[1]}`]),B=parseFloat(p[`border${S[0]}Width`]),W=parseFloat(p[`border${S[1]}Width`]);return{delay:a,duration:s,easing:o,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*v};${b}: ${w*z}px;padding-${f[0]}: ${w*k}px;padding-${f[1]}: ${w*u}px;margin-${f[0]}: ${w*V}px;margin-${f[1]}: ${w*Z}px;border-${f[0]}-width: ${w*B}px;border-${f[1]}-width: ${w*W}px;min-${b}: 0`}}var xa=X("<button> </button>"),Sa=X('<div class="filter-dropdown svelte-uawkgq"><button>All Performers</button> <!></div>'),Ca=X('<div class="collapsed-buttons svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Print Set List"><!></button> <div class="filter-container svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Filter by Performer"><!></button> <!></div> <button class="sidebar-button svelte-uawkgq" title="Import CSV"><!></button></div>'),Da=X('<div><button class="sidebar-button collapse-button svelte-uawkgq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <div class="sidebar-header svelte-uawkgq"><h1 class="svelte-uawkgq"> </h1> <div class="print-controls svelte-uawkgq"><select class="svelte-uawkgq"><option>Green Room Version</option><option>Hallway Version</option><option>Tech Booth Version</option></select> <button class="print-button svelte-uawkgq">Print Set List</button></div></div> <div class="sidebar-content svelte-uawkgq"><!> <div class="mt-4"><!></div></div> <!></div>');function Ea(l,a){Re(a,!1);let s=pe(a,"show",8),o=pe(a,"performers",8),g=pe(a,"selectedPerformer",12,null),p=pe(a,"printVersion",12,"greenroom"),v=pe(a,"isSidebarCollapsed",12,!1);const b=We();let z=we(!1);function f(){v(!v()),b("collapse",{collapsed:v()})}function S(){M(z,!e(z))}function k(ae){b("filter",{performer:ae}),M(z,!1)}function u(){b("print",{printVersion:p()})}function V(ae){b("csvImport",ae.detail)}He();var Z=Da();let B;var W=n(Z),w=n(W);let I;i(W);var _=c(W,2),m=n(_),H=n(m,!0);i(m);var L=c(m,2),j=n(L);ve(()=>{p(),sr(()=>{})});var t=n(j);t.value=t.__value="greenroom";var r=c(t);r.value=r.__value="hallway";var d=c(r);d.value=d.__value="techbooth",i(j);var D=c(j,2);i(L),i(_);var T=c(_,2),Q=n(T);Vt(Q,{get performers(){return o()},get selectedPerformer(){return g()},set selectedPerformer(ae){g(ae)},$$legacy:!0});var ue=c(Q,2),ke=n(ue);ma(ke,{get showId(){return s().id},$$events:{import:V,importComplete:()=>b("importComplete")}}),i(ue),i(T);var me=c(T,2);{var re=ae=>{var q=Ca(),ie=n(q),J=n(ie);qt(J,{size:20}),i(ie);var Y=c(ie,2),$=n(Y),C=n($);wr(C,{size:20}),i($);var ee=c($,2);{var y=O=>{var A=Sa(),h=n(A);let F;var G=c(h,2);Ze(G,1,o,lt,(N,te)=>{var P=xa();let R;var K=n(P,!0);i(P),ve(oe=>{R=Ie(P,1,"filter-option svelte-uawkgq",null,R,oe),se(K,e(te))},[()=>({active:g()===e(te)})],Ae),ne("click",P,()=>k(e(te))),U(N,P)}),i(A),ve(N=>F=Ie(h,1,"filter-option svelte-uawkgq",null,F,N),[()=>({active:g()===null})],Ae),ne("click",h,()=>k(null)),Lt(3,A,()=>wa),U(O,A)};de(ee,O=>{e(z)&&O(y)})}i(Y);var E=c(Y,2),x=n(E);Sr(x,{size:20}),i(E),i(q),ne("click",ie,u),ne("click",$,S),ne("click",E,()=>{const O=document.querySelector('input[type="file"]');O==null||O.click()}),U(ae,q)};de(me,ae=>{v()&&ae(re)})}i(Z),ve((ae,q)=>{B=Ie(Z,1,"sidebar svelte-uawkgq",null,B,ae),Ne(W,"aria-label",v()?"Expand sidebar":"Collapse sidebar"),I=Ie(w,0,"arrow-icon svelte-uawkgq",null,I,q),se(H,s().title)},[()=>({collapsed:v()}),()=>({collapsed:v()})],Ae),ne("click",W,f),mr(j,p),ne("click",D,u),U(l,Z),je()}var $a=X('<div class="view-controls svelte-6p89z8"><div class="view-buttons svelte-6p89z8"><button aria-label="Grid view"><!></button> <button aria-label="List view"><!></button></div> <div class="print-buttons svelte-6p89z8"><button>Green Room</button> <button>Hallway</button> <button>Tech Booth</button></div></div>');function Oa(l,a){Re(a,!1);let s=pe(a,"viewMode",12,"list"),o=pe(a,"printVersion",12,"greenroom"),g=pe(a,"showPrintView",8,!1);const p=We();function v(j){s(j),p("viewModeChange",{viewMode:j})}function b(j){o(j),p("printVersionChange",{printVersion:j}),p("showPrintViewChange",{showPrintView:!0})}He();var z=$a(),f=n(z),S=n(f);let k;var u=n(S);yr(u,{size:20}),i(S);var V=c(S,2);let Z;var B=n(V);xr(B,{size:20}),i(V),i(f);var W=c(f,2),w=n(W);let I;var _=c(w,2);let m;var H=c(_,2);let L;i(W),i(z),ve((j,t,r,d,D)=>{k=Ie(S,1,"view-button svelte-6p89z8",null,k,j),Z=Ie(V,1,"view-button svelte-6p89z8",null,Z,t),I=Ie(w,1,"print-view-button svelte-6p89z8",null,I,r),m=Ie(_,1,"print-view-button svelte-6p89z8",null,m,d),L=Ie(H,1,"print-view-button svelte-6p89z8",null,L,D)},[()=>({active:s()==="grid"}),()=>({active:s()==="list"}),()=>({active:g()&&o()==="greenroom"}),()=>({active:g()&&o()==="hallway"}),()=>({active:g()&&o()==="techbooth"})],Ae),ne("click",S,()=>v("grid")),ne("click",V,()=>v("list")),ne("click",w,()=>b("greenroom")),ne("click",_,()=>b("hallway")),ne("click",H,()=>b("techbooth")),U(l,z),je()}function Pa(l){const a=l-1;return a*a*a+1}function Ft(l,{from:a,to:s},o={}){var{delay:g=0,duration:p=L=>Math.sqrt(L)*120,easing:v=Pa}=o,b=getComputedStyle(l),z=b.transform==="none"?"":b.transform,[f,S]=b.transformOrigin.split(" ").map(parseFloat);f/=l.clientWidth,S/=l.clientHeight;var k=Ia(l),u=l.clientWidth/s.width/k,V=l.clientHeight/s.height/k,Z=a.left+a.width*f,B=a.top+a.height*S,W=s.left+s.width*f,w=s.top+s.height*S,I=(Z-W)*u,_=(B-w)*V,m=a.width/s.width,H=a.height/s.height;return{delay:g,duration:typeof p=="function"?p(Math.sqrt(I*I+_*_)):p,easing:v,css:(L,j)=>{var t=j*I,r=j*_,d=L+j*m,D=L+j*H;return`transform: ${z} translate(${t}px, ${r}px) scale(${d}, ${D});`}}}function Ia(l){if("currentCSSZoom"in l)return l.currentCSSZoom;for(var a=l,s=1;a!==null;)s*=+getComputedStyle(a).zoom,a=a.parentElement;return s}var Ta=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),Ra=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),ja=X('<span class="character-count svelte-t9pjlk"> </span>'),Ma=X('<div class="description svelte-t9pjlk"><strong>Description:</strong> </div>'),La=X('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Costume:</strong> </div>'),za=X('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Stage:</strong> </div>'),qa=X('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Cues:</strong> </div>'),Aa=X('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Props:</strong> </div>'),Va=X('<div class="tech-details svelte-t9pjlk"><!> <!> <!> <!></div>'),Fa=X('<div class="list-item-details svelte-t9pjlk"><!> <!></div>'),Na=X('<div role="listitem"><div class="list-item-header svelte-t9pjlk"><div class="list-item-main svelte-t9pjlk"><span class="position svelte-t9pjlk"> </span> <button class="title svelte-t9pjlk"> </button> <!> <span class="duration svelte-t9pjlk"> </span> <div class="list-item-actions svelte-t9pjlk"><button><!></button> <button class="action-button delete-button svelte-t9pjlk" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <div class="list-item-performers svelte-t9pjlk"> <!></div></div> <!></div>'),Ua=X('<div class="list-view svelte-t9pjlk"></div>');function Ba(l,a){Re(a,!1),pe(a,"sketches",24,()=>[]);let s=pe(a,"filteredSketches",24,()=>[]),o=pe(a,"expandedSketchId",8,null),g=pe(a,"draggedSketch",8,null),p=pe(a,"draggedOverIndex",8,null),v=pe(a,"flipDurationMs",8,300);pe(a,"selectedSketch",8,null);const b=We();function z(_){b("select",{sketch:_})}function f(_,m){b("lock",{id:_,locked:m})}function S(_){b("delete",{id:_})}function k(_,m){b("dragstart",{event:_,sketch:m})}function u(_,m){b("dragover",{event:_,index:m})}function V(){b("dragleave")}function Z(_,m){b("drop",{event:_,index:m})}function B(){b("dragend")}function W(_){var H;return(((H=_.character_performers)==null?void 0:H.length)||0)!==_.chars}function w(_){const m=Math.floor(_/60),H=_%60;return m>0?`${m}h ${H}m`:`${H}m`}He();var I=Ua();Ze(I,15,s,_=>_.id,(_,m,H)=>{var L=Na();let j;var t=n(L),r=n(t),d=n(r),D=n(d);i(d);var T=c(d,2),Q=n(T,!0);i(T);var ue=c(T,2);{var ke=h=>{At(h,{class:"warning-icon",size:16})};de(ue,h=>{W(e(m))&&h(ke)})}var me=c(ue,2),re=n(me,!0);i(me);var ae=c(me,2),q=n(ae);let ie;var J=n(q);{var Y=h=>{var F=Ta();U(h,F)},$=h=>{var F=Ra();U(h,F)};de(J,h=>{e(m).locked?h(Y):h($,!1)})}i(q);var C=c(q,2);i(ae),i(r);var ee=c(r,2),y=n(ee),E=c(y);{var x=h=>{var F=ja(),G=n(F);i(F),ve(()=>{var N;return se(G,`(${(((N=e(m).character_performers)==null?void 0:N.length)||0)??""}/${e(m).chars??""} characters)`)}),U(h,F)};de(E,h=>{W(e(m))&&h(x)})}i(ee),i(t);var O=c(t,2);{var A=h=>{var F=Fa(),G=n(F);{var N=R=>{var K=Ma(),oe=c(n(K));i(K),ve(()=>se(oe,` ${e(m).description??""}`)),U(R,K)};de(G,R=>{e(m).description&&R(N)})}var te=c(G,2);{var P=R=>{var K=Va(),oe=n(K);{var Ce=ce=>{var le=La(),be=c(n(le));i(le),ve(()=>se(be,` ${e(m).techDetails.costume??""}`)),U(ce,le)};de(oe,ce=>{e(m).techDetails.costume&&ce(Ce)})}var Te=c(oe,2);{var $e=ce=>{var le=za(),be=c(n(le));i(le),ve(()=>se(be,` ${e(m).techDetails.stage_dressing??""}`)),U(ce,le)};de(Te,ce=>{e(m).techDetails.stage_dressing&&ce($e)})}var qe=c(Te,2);{var he=ce=>{var le=qa(),be=c(n(le));i(le),ve(()=>se(be,` ${e(m).techDetails.cues??""}`)),U(ce,le)};de(qe,ce=>{e(m).techDetails.cues&&ce(he)})}var ge=c(qe,2);{var _e=ce=>{var le=Aa(),be=c(n(le));i(le),ve(()=>se(be,` ${e(m).techDetails.props??""}`)),U(ce,le)};de(ge,ce=>{e(m).techDetails.props&&ce(_e)})}i(K),U(R,K)};de(te,R=>{e(m).techDetails&&R(P)})}i(F),U(h,F)};de(O,h=>{o()===e(m).id&&h(A)})}i(L),ve((h,F,G,N)=>{j=Ie(L,1,"list-item svelte-t9pjlk",null,j,h),Ne(L,"draggable",!e(m).locked),se(D,`${e(m).position+1}.`),Ne(T,"aria-label",`View details for ${e(m).title}`),se(Q,e(m).title),se(re,F),ie=Ie(q,1,"action-button lock-button svelte-t9pjlk",null,ie,G),Ne(q,"aria-label",e(m).locked?"Unlock sketch":"Lock sketch"),Ne(q,"title",e(m).locked?"Unlock sketch":"Lock sketch"),se(y,`${N??""} `)},[()=>{var h;return{expanded:o()===e(m).id,locked:e(m).locked,dragging:((h=g())==null?void 0:h.id)===e(m).id,"drag-over":p()===e(H)}},()=>w(e(m).duration),()=>({locked:e(m).locked}),()=>(e(m).character_performers||[]).map(h=>h.performer_name).join(", ")],Ae),ne("click",T,()=>z(e(m))),ne("keydown",T,h=>h.key==="Enter"&&z(e(m))),ne("click",q,ct(()=>f(e(m).id,!e(m).locked))),ne("click",C,ct(()=>S(e(m).id))),Mt(L,()=>Ft,()=>({duration:v()})),ne("dragstart",L,h=>k(h,e(m))),ne("dragover",L,h=>u(h,e(H))),ne("dragleave",L,V),ne("drop",L,h=>Z(h,e(H))),ne("dragend",L,B),U(_,L)}),i(I),U(l,I),je()}var Ha=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),Wa=_t('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),Ka=X('<span class="text-amber-500"> </span>'),Ja=X('<li class="flex justify-between"><span class="font-medium text-gray-700"> </span> <span class="text-gray-500"> </span></li>'),Ga=X('<div class="cast-list px-4 pb-3 pt-1 bg-gray-50"><ul class="text-xs space-y-1"></ul></div>'),Qa=X('<div class="border-t border-gray-200 px-4 py-2"><button class="cast-toggle text-sm text-blue-600 hover:text-blue-800 font-medium focus:outline-none w-full text-left flex justify-between items-center"><span> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!>',1),Za=X('<div tabindex="0" role="button" style="min-height: 150px;"><div class="p-4 flex-grow"><div class="flex justify-between items-center mb-2"><div class="flex items-center gap-2"><h3 class="text-lg font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center gap-0.5"><button><!></button> <button class="action-button delete-button svelte-1qd7kif" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <p class="description text-sm text-gray-600 mb-3 line-clamp-1"> </p> <div class="stats text-xs text-gray-500 space-x-3 mb-3"><span> </span> <span> </span> <span> </span> <!></div></div> <!></div>');function Ya(l,a){Re(a,!1);let s=pe(a,"sketch",8),o=pe(a,"isSelected",8,!1),g=pe(a,"showCharacterWarning",8,!1),p=we(!1);const v=We();function b(C){C.target instanceof HTMLElement&&C.target.closest("button, .cast-toggle")||C.target instanceof HTMLElement&&C.target.closest(".card")&&v("select",{sketch:s()})}function z(C){C.stopPropagation(),v("lock",{id:s().id,locked:!s().locked})}function f(C){C.stopPropagation(),v("delete",{id:s().id})}function S(C){C.stopPropagation(),M(p,!e(p))}function k(C){(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),C.target instanceof HTMLElement&&C.target.closest("button, .cast-toggle")?C.target.closest(".cast-toggle")&&S(C):b(C))}He();var u=Za(),V=n(u),Z=n(V),B=n(Z),W=n(B),w=n(W,!0);i(W);var I=c(W,2);{var _=C=>{At(C,{class:"warning-icon",size:16})};de(I,C=>{g()&&C(_)})}i(B);var m=c(B,2),H=n(m);let L;var j=n(H);{var t=C=>{var ee=Ha();U(C,ee)},r=C=>{var ee=Wa();U(C,ee)};de(j,C=>{s().locked?C(t):C(r,!1)})}i(H);var d=c(H,2);i(m),i(Z);var D=c(Z,2),T=n(D,!0);i(D);var Q=c(D,2),ue=n(Q),ke=n(ue);i(ue);var me=c(ue,2),re=n(me);i(me);var ae=c(me,2),q=n(ae);i(ae);var ie=c(ae,2);{var J=C=>{var ee=Ka(),y=n(ee);i(ee),ve(()=>{var E;return se(y,`(${(((E=s().character_performers)==null?void 0:E.length)||0)??""}/${s().chars??""} characters)`)}),U(C,ee)};de(ie,C=>{g()&&C(J)})}i(Q),i(V);var Y=c(V,2);{var $=C=>{var ee=Qa(),y=Ye(ee),E=n(y),x=n(E),O=n(x);i(x);var A=c(x,2);i(E),i(y);var h=c(y,2);{var F=G=>{var N=Ga(),te=n(N);Ze(te,5,()=>s().character_performers,P=>P.id||P.character_name+P.performer_name,(P,R)=>{var K=Ja(),oe=n(K),Ce=n(oe,!0);i(oe);var Te=c(oe,2),$e=n(Te,!0);i(Te),i(K),ve(()=>{se(Ce,e(R).character_name),se($e,e(R).performer_name)}),U(P,K)}),i(te),i(N),Lt(3,N,()=>ya,()=>({duration:200})),U(G,N)};de(h,G=>{e(p)&&G(F)})}ve(()=>{Ne(E,"aria-expanded",e(p)),se(O,`Show Cast (${s().character_performers.length??""})`),Ie(A,0,`w-4 h-4 transform transition-transform duration-200 ${e(p)?"rotate-180":""}`)}),ne("click",E,S),U(C,ee)};de(Y,C=>{s().character_performers&&s().character_performers.length>0&&C($)})}i(u),ve(C=>{Ie(u,1,`card ${o()?"selected border-blue-500":"border-gray-200"} ${s().locked?"locked":""} border bg-white rounded-lg shadow hover:shadow-md transition-all duration-200 flex flex-col`,"svelte-1qd7kif"),Ne(u,"aria-label",`View sketch details for ${s().title??""}`),Ne(W,"title",s().title),se(w,s().title),L=Ie(H,1,"action-button lock-button svelte-1qd7kif",null,L,C),Ne(H,"aria-label",s().locked?"Unlock sketch":"Lock sketch"),Ne(H,"title",s().locked?"Unlock sketch":"Lock sketch"),Ne(D,"title",s().description||"A sketch waiting for its story..."),se(T,s().description||"A sketch waiting for its story..."),se(ke,`Duration: ${s().duration??""} min`),se(re,`Chars: ${s().chars??""}`),se(q,`Casted: ${s().casted??""}`)},[()=>({locked:s().locked})],Ae),ne("click",H,ct(z)),ne("click",d,ct(f)),ne("click",u,b),ne("keydown",u,k),U(l,u),je()}var Xa=X('<div role="listitem"><!></div>'),es=X('<div class="grid-view svelte-1q07nmr"></div>');function ts(l,a){Re(a,!1),pe(a,"sketches",24,()=>[]);let s=pe(a,"filteredSketches",24,()=>[]);pe(a,"expandedSketchId",8,null);let o=pe(a,"draggedSketch",8,null),g=pe(a,"draggedOverIndex",8,null),p=pe(a,"flipDurationMs",8,300);pe(a,"selectedSketch",8,null);const v=We();function b(w){v("select",{sketch:w})}function z(w){v("lock",w.detail)}function f(w){v("delete",w.detail)}function S(w,I){v("dragstart",{event:w,sketch:I})}function k(w,I){v("dragover",{event:w,index:I})}function u(){v("dragleave")}function V(w,I){v("drop",{event:w,index:I})}function Z(){v("dragend")}function B(w){var _;return(((_=w.character_performers)==null?void 0:_.length)||0)!==w.chars}He();var W=es();Ze(W,15,s,w=>w.id,(w,I,_)=>{var m=Xa();let H;var L=n(m);const j=Ae(()=>B(e(I)));Ya(L,{get sketch(){return e(I)},get showCharacterWarning(){return e(j)},$$events:{update:()=>{},select:()=>b(e(I)),lock:z,delete:f}}),i(m),ve(t=>{H=Ie(m,1,"sketch-list-item svelte-1q07nmr",null,H,t),Ne(m,"draggable",!e(I).locked)},[()=>{var t;return{locked:e(I).locked,dragging:((t=o())==null?void 0:t.id)===e(I).id,"drag-over":g()===e(_)}}],Ae),Mt(m,()=>Ft,()=>({duration:p()})),ne("dragstart",m,t=>S(t,e(I))),ne("dragover",m,t=>k(t,e(_))),ne("dragleave",m,u),ne("drop",m,t=>V(t,e(_))),ne("dragend",m,Z),U(w,m)}),i(W),U(l,W),je()}var rs=X('<div class="print-header svelte-vw1bf2"><div class="left svelte-vw1bf2"><button class="back-btn svelte-vw1bf2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m15 18-6-6 6-6"></path></svg> Back to Show</button> <h2 class="print-title svelte-vw1bf2"> </h2></div> <div class="right svelte-vw1bf2"><div class="performer-filter-wrapper svelte-vw1bf2"><!></div> <div class="print-version-btns svelte-vw1bf2"><button>Greenroom</button> <button>Hallway</button> <button>Tech Booth</button></div> <button class="print-btn svelte-vw1bf2" aria-label="Print set list"><!></button></div></div>');function as(l,a){Re(a,!1);let s=pe(a,"printVersion",8,"greenroom"),o=pe(a,"printViewPerformer",8,null),g=pe(a,"performers",24,()=>[]);const p=We();function v(D){p("versionChange",{printVersion:D})}function b(D){p("performerSelect",{performer:D.detail.performer})}function z(){p("back")}function f(){p("print")}He();var S=rs(),k=n(S),u=n(k),V=c(u,2),Z=n(V);i(V),i(k);var B=c(k,2),W=n(B),w=n(W);Vt(w,{get performers(){return g()},get selectedPerformer(){return o()},$$events:{select:b}}),i(W);var I=c(W,2),_=n(I);let m;var H=c(_,2);let L;var j=c(H,2);let t;i(I);var r=c(I,2),d=n(r);qt(d,{size:20}),i(r),i(B),i(S),ve((D,T,Q)=>{se(Z,`Print View - ${s()??""}`),m=Ie(_,1,"print-view-button svelte-vw1bf2",null,m,D),L=Ie(H,1,"print-view-button svelte-vw1bf2",null,L,T),t=Ie(j,1,"print-view-button svelte-vw1bf2",null,t,Q)},[()=>({active:s()==="greenroom"}),()=>({active:s()==="hallway"}),()=>({active:s()==="techbooth"})],Ae),ne("click",u,z),ne("click",_,()=>v("greenroom")),ne("click",H,()=>v("hallway")),ne("click",j,()=>v("techbooth")),ne("click",r,f),U(l,S),je()}var ss=X('<div class="fixed inset-0 z-50 overflow-auto bg-white"><!> <div class="p-4"><!></div></div>'),is=X('<div class="modal-backdrop svelte-pz2bd9" role="dialog" aria-modal="true" aria-label="Sketch details"><div class="modal-content svelte-pz2bd9" role="document"><!></div></div>'),ns=X('<div class="show-page svelte-pz2bd9"><!> <div class="content svelte-pz2bd9"><!> <!> <!></div></div>');function ms(l,a){Re(a,!1);const[s,o]=cr(),g=()=>lr(Dr,"$page",s),p=we(),v=we(),b=we();let z=pe(a,"data",8);We();const f=g().params.id;let S=z().show,k=we(z().sketches),u=we(null),V=we(null),Z=we("list");const B=300;let W=we(!1),w=we("greenroom"),I=we(null),_=we(null),m=we(null),H=we(null),L=we(!1);Ot(async()=>{await q()});async function j(y){try{const{importType:E,data:x}=y.detail;if(E==="unknown"){console.error("Import type is unknown. Aborting."),alert("Could not determine CSV type. Please check file format.");return}let O;E==="sketches"?O={show_id:f,importType:E,data:x.map((F,G)=>({...F,position:e(k).length+G}))}:O={show_id:f,importType:E,data:x};const A=await fetch("/api/sketches/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!A.ok){const F=await A.json().catch(()=>({error:"Failed to import data. Unknown error."}));throw new Error(F.error||"Failed to import data")}const h=await A.json();if(E==="sketches"){const F=h.filter(G=>G.success&&G.sketch).map(G=>G.sketch);if(F.length>0)M(k,[...e(k),...F].sort((G,N)=>G.position-N.position)),alert(`${F.length} sketch(es) imported successfully.`);else{const G=h.filter(N=>!N.success);G.length>0?(alert(`Import partially failed. ${G.length} sketch(es) had issues. Check console for details.`),console.error("Sketch import errors:",G)):alert("No new sketches were imported. The file might have been empty or all rows failed.")}}else{const F=h.filter(N=>N.success).length,G=h.length-F;alert(`Tech details import complete. ${F} successful, ${G} failed. Check console for details.`),G>0&&console.error("Tech detail import issues:",h.filter(N=>!N.success)),await q()}}catch(E){console.error("Error importing data:",E),alert(`Error during import: ${E instanceof Error?E.message:"Unknown error"}`)}}async function t(y){try{if(!(await fetch(`/api/sketches/${y.detail.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({locked:y.detail.locked})})).ok)throw new Error("Failed to update sketch");M(k,e(k).map(x=>x.id===y.detail.id?{...x,locked:y.detail.locked}:x))}catch(E){console.error("Error updating sketch:",E)}}function r(y,E){t(new CustomEvent("lock",{detail:{id:y,locked:E}}))}async function d(y){var x;const E=y.detail.id;if(E)try{if(!(await fetch(`/api/sketches/${E}`,{method:"DELETE"})).ok)throw new Error("Failed to delete sketch");const A=e(k).findIndex(h=>h.id===E);M(k,e(k).filter(h=>h.id!==E)),M(k,e(k).map((h,F)=>({...h,position:F}))),((x=e(u))==null?void 0:x.id)===E&&M(u,null),await ae(e(k))}catch(O){console.error("Error deleting sketch:",O)}}function D(y){d(new CustomEvent("delete",{detail:{id:y}}))}async function T(y){var E;try{if(!(await fetch(`/api/sketches/${y.detail.sketch.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y.detail.sketch)})).ok)throw new Error("Failed to update sketch");M(k,e(k).map(O=>O.id===y.detail.sketch.id?y.detail.sketch:O).sort((O,A)=>O.position-A.position)),((E=e(u))==null?void 0:E.id)===y.detail.sketch.id&&M(u,y.detail.sketch)}catch(x){console.error("Error updating sketch:",x)}}function Q(y,E){if(E.locked){y.preventDefault();return}M(_,E),y.dataTransfer&&(y.dataTransfer.effectAllowed="move")}function ue(y,E){y.preventDefault(),!(!e(_)||e(_).locked||e(v)[E].locked)&&(M(m,E),y.dataTransfer&&(y.dataTransfer.dropEffect="move"))}function ke(){M(m,null)}async function me(y,E){if(y.preventDefault(),!e(_)||e(_).locked||e(v)[E].locked)return;const O=[...e(v)],A=O.findIndex(h=>{var F;return h.id===((F=e(_))==null?void 0:F.id)});if(A!==-1){O.splice(A,1),O.splice(E,0,e(_));const h=O,F=new Map(h.map((N,te)=>[N.id,te])),G=e(k).map(N=>{if(N.locked)return N;const te=F.get(N.id);return{...N,position:te!==void 0?te:N.position}}).sort((N,te)=>N.position-te.position).map((N,te)=>({...N,position:te}));M(k,G),await ae(G)}M(_,null),M(m,null)}function re(){M(_,null),M(m,null)}async function ae(y){const E=y.map(x=>({id:x.id,position:x.position}));try{if(!(await fetch("/api/sketches",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:E})})).ok)throw console.error("Failed to reorder sketches API call failed"),await q(),new Error("Failed to reorder sketches")}catch(x){console.error("Error reordering sketches:",x),await q()}}async function q(){try{const y=await fetch(`/api/sketches?show_id=${f}`);if(!y.ok)throw new Error("Failed to load sketches");const E=await y.json();M(k,E.map(x=>({...x,position:x.position??0,locked:!!x.locked})).sort((x,O)=>x.position-O.position))}catch(y){console.error("Error loading sketches:",y),M(k,[])}}function ie(){M(W,!0),setTimeout(()=>{window.print(),M(W,!1)},100)}function J(y){M(I,e(I)===y?null:y)}ut(()=>e(k),()=>{M(p,[...new Set(e(k).flatMap(y=>y.character_performers||[]).map(y=>y.performer_name))].sort())}),ut(()=>(e(V),e(k)),()=>{M(v,e(V)?e(k).filter(y=>{var E;return(E=y.character_performers)==null?void 0:E.some(x=>x.performer_name===e(V))}):e(k))}),ut(()=>(e(H),e(k)),()=>{M(b,e(H)?e(k).filter(y=>{var E;return(E=y.character_performers)==null?void 0:E.some(x=>x.performer_name===e(H))}):e(k))}),Tt(),He();var Y=Xe(),$=Ye(Y);{var C=y=>{var E=ss(),x=n(E);as(x,{get printVersion(){return e(w)},get printViewPerformer(){return e(H)},get performers(){return e(p)},$$events:{back:()=>M(W,!1),versionChange:h=>M(w,h.detail.printVersion),performerSelect:h=>M(H,h.detail.performer),print:ie}});var O=c(x,2),A=n(O);na(A,{get sketches(){return e(b)},get showTitle(){return S.title},get version(){return e(w)}}),i(O),i(E),U(y,E)},ee=y=>{var E=ns(),x=n(E);Ea(x,{show:S,get performers(){return e(p)},get selectedPerformer(){return e(V)},set selectedPerformer(P){M(V,P)},get printVersion(){return e(w)},set printVersion(P){M(w,P)},get isSidebarCollapsed(){return e(L)},set isSidebarCollapsed(P){M(L,P)},$$events:{collapse:({detail:P})=>M(L,P.collapsed),filter:({detail:P})=>M(V,P.performer),print:({detail:P})=>{M(w,P.printVersion),ie()},importComplete:q,csvImport:j},$$legacy:!0});var O=c(x,2),A=n(O);Oa(A,{get viewMode(){return e(Z)},set viewMode(P){M(Z,P)},get printVersion(){return e(w)},set printVersion(P){M(w,P)},get showPrintView(){return e(W)},set showPrintView(P){M(W,P)},$$events:{viewModeChange:P=>M(Z,P.detail.viewMode),printVersionChange:P=>M(w,P.detail.printVersion),showPrintViewChange:P=>M(W,P.detail.showPrintView)},$$legacy:!0});var h=c(A,2);{var F=P=>{Ba(P,{get sketches(){return e(k)},get filteredSketches(){return e(v)},get draggedSketch(){return e(_)},get draggedOverIndex(){return e(m)},flipDurationMs:B,get expandedSketchId(){return e(I)},set expandedSketchId(R){M(I,R)},get selectedSketch(){return e(u)},set selectedSketch(R){M(u,R)},$$events:{select:R=>M(u,R.detail.sketch),lock:R=>r(R.detail.id,R.detail.locked),delete:R=>D(R.detail.id),expand:R=>J(R.detail.sketchId),dragstart:R=>Q(R.detail.event,R.detail.sketch),dragover:R=>ue(R.detail.event,R.detail.index),dragleave:ke,drop:R=>me(R.detail.event,R.detail.index),dragend:re},$$legacy:!0})},G=P=>{ts(P,{get sketches(){return e(k)},get filteredSketches(){return e(v)},get draggedSketch(){return e(_)},get draggedOverIndex(){return e(m)},flipDurationMs:B,get expandedSketchId(){return e(I)},set expandedSketchId(R){M(I,R)},get selectedSketch(){return e(u)},set selectedSketch(R){M(u,R)},$$events:{select:R=>M(u,R.detail.sketch),lock:R=>r(R.detail.id,R.detail.locked),delete:R=>D(R.detail.id),expand:R=>J(R.detail.sketchId),dragstart:R=>Q(R.detail.event,R.detail.sketch),dragover:R=>ue(R.detail.event,R.detail.index),dragleave:ke,drop:R=>me(R.detail.event,R.detail.index),dragend:re},$$legacy:!0})};de(h,P=>{e(Z)==="list"?P(F):P(G,!1)})}var N=c(h,2);{var te=P=>{var R=is(),K=n(R),oe=n(K);Qr(oe,{get sketch(){return e(u)},$$events:{close:()=>M(u,null),update:T}}),i(K),i(R),ne("click",K,ct(function(Ce){br.call(this,a,Ce)})),ne("click",R,()=>M(u,null)),ne("keydown",R,Ce=>Ce.key==="Escape"&&M(u,null)),U(P,R)};de(N,P=>{e(u)&&P(te)})}i(O),i(E),U(y,E)};de($,y=>{e(W)?y(C):y(ee,!1)})}U(l,Y),je(),o()}export{ms as component};
