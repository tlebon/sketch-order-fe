import{c as Ae,a as W,t as ae,n as tt,d as rt}from"../chunks/CFdHu8IA.js";import"../chunks/BbmbYZNE.js";import{a9 as nt,E as xt,aI as St,aJ as Ct,e as at,u as ut,aK as Et,a4 as Dt,q as $t,w as Oe,ad as ot,ae as lt,af as Ot,aL as Pt,G as It,p as Se,f as Le,a as Ce,s as u,c as o,r as n,t as he,m as a,Q as ge,D as L,X as Pe,aM as He,aN as Ze,d as Tt,aO as vt,aP as Rt}from"../chunks/lowV6HZa.js";import{k as Mt,w as jt,l as Lt,s as se,e as ne,d as ht,r as At}from"../chunks/5gYYOIeN.js";import{s as Fe,r as qe,p as de,i as ve,a as Vt,b as zt}from"../chunks/ZOUqE9m-.js";import{i as Ie}from"../chunks/lXCSdFG9.js";import{s as Ft}from"../chunks/CoBrbGaD.js";import{c as Re,o as ft}from"../chunks/x7zS-rwl.js";import{c as qt,I as Ne,e as je,i as Ge,a as ye,s as $e,r as We,b as ze}from"../chunks/CDohF1HD.js";import{b as Nt}from"../chunks/CDEW-RGa.js";import{s as Ue}from"../chunks/CnvLdIrB.js";const Ut=()=>performance.now(),Me={tick:i=>requestAnimationFrame(i),now:()=>Ut(),tasks:new Set};function pt(){const i=Me.now();Me.tasks.forEach(r=>{r.c(i)||(Me.tasks.delete(r),r.f())}),Me.tasks.size!==0&&Me.tick(pt)}function Bt(i){let r;return Me.tasks.size===0&&Me.tick(pt),{promise:new Promise(s=>{Me.tasks.add(r={c:i,f:s})}),abort(){Me.tasks.delete(r)}}}function Qe(i,r){jt(()=>{i.dispatchEvent(new CustomEvent(r))})}function Ht(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const r=i.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("")}function dt(i){const r={},s=i.split(";");for(const l of s){const[p,g]=l.split(":");if(!p||g===void 0)break;const c=Ht(p.trim());r[c]=g.trim()}return r}const Wt=i=>i;function gt(i,r,s){var l=qt,p,g,c,y=null;l.a??(l.a={element:i,measure(){p=this.element.getBoundingClientRect()},apply(){if(c==null||c.abort(),g=this.element.getBoundingClientRect(),p.left!==g.left||p.right!==g.right||p.top!==g.top||p.bottom!==g.bottom){const Q=r()(this.element,{from:p,to:g},s==null?void 0:s());c=Ye(this.element,Q,void 0,1,()=>{c==null||c.abort(),c=void 0})}},fix(){if(!i.getAnimations().length){var{position:Q,width:h,height:P}=getComputedStyle(i);if(Q!=="absolute"&&Q!=="fixed"){var x=i.style;y={position:x.position,width:x.width,height:x.height,transform:x.transform},x.position="absolute",x.width=h,x.height=P;var T=i.getBoundingClientRect();if(p.left!==T.left||p.top!==T.top){var F=`translate(${p.left-T.left}px, ${p.top-T.top}px)`;x.transform=x.transform?`${x.transform} ${F}`:F}}}},unfix(){if(y){var Q=i.style;Q.position=y.position,Q.width=y.width,Q.height=y.height,Q.transform=y.transform}}}),l.a.element=i}function _t(i,r,s,l){var p=(i&Et)!==0,g="both",c,y=r.inert,Q=r.style.overflow,h,P;function x(){var q=Ot,f=nt;ot(null),lt(null);try{return c??(c=s()(r,(l==null?void 0:l())??{},{direction:g}))}finally{ot(q),lt(f)}}var T={is_global:p,in(){r.inert=y,Qe(r,"introstart"),h=Ye(r,x(),P,1,()=>{Qe(r,"introend"),h==null||h.abort(),h=c=void 0,r.style.overflow=Q})},out(q){r.inert=!0,Qe(r,"outrostart"),P=Ye(r,x(),h,0,()=>{Qe(r,"outroend"),q==null||q()})},stop:()=>{h==null||h.abort(),P==null||P.abort()}},F=nt;if((F.transitions??(F.transitions=[])).push(T),Mt){var X=p;if(!X){for(var ee=F.parent;ee&&(ee.f&xt)!==0;)for(;(ee=ee.parent)&&(ee.f&St)===0;);X=!ee||(ee.f&Ct)!==0}X&&at(()=>{ut(()=>T.in())})}}function Ye(i,r,s,l,p){var g=l===1;if(Dt(r)){var c,y=!1;return $t(()=>{if(!y){var q=r({direction:g?"in":"out"});c=Ye(i,q,s,l,p)}}),{abort:()=>{y=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(s==null||s.deactivate(),!(r!=null&&r.duration))return p(),{abort:Oe,deactivate:Oe,reset:Oe,t:()=>l};const{delay:Q=0,css:h,tick:P,easing:x=Wt}=r;var T=[];if(g&&s===void 0&&(P&&P(0,1),h)){var F=dt(h(0,1));T.push(F,F)}var X=()=>1-l,ee=i.animate(T,{duration:Q});return ee.onfinish=()=>{var q=(s==null?void 0:s.t())??1-l;s==null||s.abort();var f=l-q,C=r.duration*Math.abs(f),E=[];if(C>0){var b=!1;if(h)for(var N=Math.ceil(C/16.666666666666668),B=0;B<=N;B+=1){var z=q+f*x(B/N),e=dt(h(z,1-z));E.push(e),b||(b=e.overflow==="hidden")}b&&(i.style.overflow="hidden"),X=()=>{var t=ee.currentTime;return q+f*x(t/C)},P&&Bt(()=>{if(ee.playState!=="running")return!1;var t=X();return P(t,1-t),!0})}ee=i.animate(E,{duration:C,fill:"forwards"}),ee.onfinish=()=>{X=()=>l,P==null||P(l,1-l),p()}},{abort:()=>{ee&&(ee.cancel(),ee.effect=null,ee.onfinish=Oe)},deactivate:()=>{p=Oe},reset:()=>{l===0&&(P==null||P(1,0))},t:()=>X()}}function et(i,r,s){if(i.multiple)return Gt(i,r);for(var l of i.options){var p=Ke(l);if(Pt(p,r)){l.selected=!0;return}}(!s||r!==void 0)&&(i.selectedIndex=-1)}function mt(i,r){let s=!0;at(()=>{r&&et(i,ut(r),s),s=!1;var l=new MutationObserver(()=>{var p=i.__value;et(i,p)});return l.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function Kt(i,r,s=r){var l=!0;Lt(i,"change",p=>{var g=p?"[selected]":":checked",c;if(i.multiple)c=[].map.call(i.querySelectorAll(g),Ke);else{var y=i.querySelector(g)??i.querySelector("option:not([disabled])");c=y&&Ke(y)}s(c)}),at(()=>{var p=r();if(et(i,p,l),l&&p===void 0){var g=i.querySelector(":checked");g!==null&&(p=Ke(g),s(p))}i.__value=p,l=!1}),mt(i)}function Gt(i,r){for(var s of i.options)s.selected=~r.indexOf(Ke(s))}function Ke(i){return"__value"in i?i.__value:i.value}function Je(i){return function(...r){var s=r[0];return s.stopPropagation(),i==null?void 0:i.apply(this,r)}}function Jt(i,r){var g;var s=(g=i.$$events)==null?void 0:g[r.type],l=It(s)?s.slice():s==null?[]:[s];for(var p of l)p.call(this,r)}function Qt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"funnel"},()=>s,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:(p,g)=>{var c=Ae(),y=Le(c);Ue(y,()=>r.children??Oe),W(p,c)},$$slots:{default:!0}})),Ce()}function Zt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"layout-grid"},()=>s,{iconNode:[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]],children:(p,g)=>{var c=Ae(),y=Le(c);Ue(y,()=>r.children??Oe),W(p,c)},$$slots:{default:!0}})),Ce()}function Xt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"list"},()=>s,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(p,g)=>{var c=Ae(),y=Le(c);Ue(y,()=>r.children??Oe),W(p,c)},$$slots:{default:!0}})),Ce()}function bt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"printer"},()=>s,{iconNode:[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1"}]],children:(p,g)=>{var c=Ae(),y=Le(c);Ue(y,()=>r.children??Oe),W(p,c)},$$slots:{default:!0}})),Ce()}function kt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"triangle-alert"},()=>s,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(p,g)=>{var c=Ae(),y=Le(c);Ue(y,()=>r.children??Oe),W(p,c)},$$slots:{default:!0}})),Ce()}function Yt(i,r){Se(r,!0);let s=qe(r,["$$slots","$$events","$$legacy"]);Ne(i,Fe({name:"upload"},()=>s,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(p,g)=>{var c=Ae(),y=Le(c);Ue(y,()=>r.children??Oe),W(p,c)},$$slots:{default:!0}})),Ce()}const er=()=>{const i=Ft;return{page:{subscribe:i.page.subscribe},navigating:{subscribe:i.navigating.subscribe},updated:i.updated}},tr={subscribe(i){return er().page.subscribe(i)}};var rr=ae("<option> </option>"),ar=ae('<div class="performer-filter svelte-9vn570"><label for="performer-select" class="svelte-9vn570">Filter by Performer</label> <select id="performer-select" class="svelte-9vn570"><option>All Performers</option><!></select></div>');function wt(i,r){Se(r,!1);let s=de(r,"performers",24,()=>[]),l=de(r,"selectedPerformer",12,null);const p=Re();function g(x){const T=x.target,F=T.value===""?null:T.value;l(F),p("select",{performer:F})}Ie();var c=ar(),y=u(o(c),2);mt(y,()=>l()||"");var Q,h=o(y);h.value=h.__value="";var P=u(h);je(P,1,s,Ge,(x,T)=>{var F=rr(),X={},ee=o(F,!0);n(F),he(()=>{X!==(X=a(T))&&(F.value=(F.__value=a(T))??""),se(ee,a(T))}),W(x,F)}),n(y),n(c),he(()=>{Q!==(Q=l()||"")&&(y.value=(y.__value=l()||"")??"",et(y,l()||""))}),ne("change",y,g),W(i,c),Ce()}function sr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Xe={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var ir=Xe.exports,ct;function nr(){return ct||(ct=1,function(i,r){((s,l)=>{i.exports=l()})(ir,function s(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},p,g=!l.document&&!!l.postMessage,c=l.IS_PAPA_WORKER||!1,y={},Q=0,h={};function P(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var d=N(t);d.chunkSize=parseInt(d.chunkSize),t.step||t.chunk||(d.chunkSize=null),this._handle=new ee(d),(this._handle.streamer=this)._config=d}).call(this,e),this.parseChunk=function(t,d){var S=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<S){let U=this._config.newline;U||(w=this._config.quoteChar||'"',U=this._handle.guessLineEndings(t,w)),t=[...t.split(U).slice(S)].join(U)}this.isFirstChunk&&z(this._config.beforeFirstChunk)&&(w=this._config.beforeFirstChunk(t))!==void 0&&(t=w),this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+t,w=(this._partialLine="",this._handle.parse(S,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=w.meta.cursor,S=(this._finished||(this._partialLine=S.substring(t-this._baseIndex),this._baseIndex=t),w&&w.data&&(this._rowCount+=w.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)l.postMessage({results:w,workerId:h.WORKER_ID,finished:S});else if(z(this._config.chunk)&&!d){if(this._config.chunk(w,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=w=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(w.data),this._completeResults.errors=this._completeResults.errors.concat(w.errors),this._completeResults.meta=w.meta),this._completed||!S||!z(this._config.complete)||w&&w.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),S||w&&w.meta.paused||this._nextChunk(),w}this._halted=!0},this._sendError=function(t){z(this._config.error)?this._config.error(t):c&&this._config.error&&l.postMessage({workerId:h.WORKER_ID,error:t,finished:!1})}}function x(e){var t;(e=e||{}).chunkSize||(e.chunkSize=h.RemoteChunkSize),P.call(this,e),this._nextChunk=g?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),g||(t.onload=B(this._chunkLoaded,this),t.onerror=B(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!g),this._config.downloadRequestHeaders){var d,S=this._config.downloadRequestHeaders;for(d in S)t.setRequestHeader(d,S[d])}var w;this._config.chunkSize&&(w=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+w));try{t.send(this._config.downloadRequestBody)}catch(U){this._chunkError(U.message)}g&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(d){d=t.statusText||d,this._sendError(new Error(d))}}function T(e){(e=e||{}).chunkSize||(e.chunkSize=h.LocalChunkSize),P.call(this,e);var t,d,S=typeof FileReader<"u";this.stream=function(w){this._input=w,d=w.slice||w.webkitSlice||w.mozSlice,S?((t=new FileReader).onload=B(this._chunkLoaded,this),t.onerror=B(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var w=this._input,U=(this._config.chunkSize&&(U=Math.min(this._start+this._config.chunkSize,this._input.size),w=d.call(w,this._start,U)),t.readAsText(w,this._config.encoding));S||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(w){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(w.target.result)},this._chunkError=function(){this._sendError(t.error)}}function F(e){var t;P.call(this,e=e||{}),this.stream=function(d){return t=d,this._nextChunk()},this._nextChunk=function(){var d,S;if(!this._finished)return d=this._config.chunkSize,t=d?(S=t.substring(0,d),t.substring(d)):(S=t,""),this._finished=!t,this.parseChunk(S)}}function X(e){P.call(this,e=e||{});var t=[],d=!0,S=!1;this.pause=function(){P.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){P.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(w){this._input=w,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){S&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):d=!0},this._streamData=B(function(w){try{t.push(typeof w=="string"?w:w.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(U){this._streamError(U)}},this),this._streamError=B(function(w){this._streamCleanUp(),this._sendError(w)},this),this._streamEnd=B(function(){this._streamCleanUp(),S=!0,this._streamData("")},this),this._streamCleanUp=B(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ee(e){var t,d,S,w,U=Math.pow(2,53),oe=-U,fe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ce=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,K=this,H=0,M=0,le=!1,G=!1,Z=[],$={data:[],errors:[],meta:{}};function m(O){return e.skipEmptyLines==="greedy"?O.join("").trim()==="":O.length===1&&O[0].length===0}function Y(){if($&&S&&(I("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),S=!1),e.skipEmptyLines&&($.data=$.data.filter(function(v){return!m(v)})),D()){let v=function(R,J){z(e.transformHeader)&&(R=e.transformHeader(R,J)),Z.push(R)};if($)if(Array.isArray($.data[0])){for(var O=0;D()&&O<$.data.length;O++)$.data[O].forEach(v);$.data.splice(0,1)}else $.data.forEach(v)}function j(v,R){for(var J=e.header?{}:[],V=0;V<v.length;V++){var re=V,_=v[V],_=((k,A)=>(ie=>(e.dynamicTypingFunction&&e.dynamicTyping[ie]===void 0&&(e.dynamicTyping[ie]=e.dynamicTypingFunction(ie)),(e.dynamicTyping[ie]||e.dynamicTyping)===!0))(k)?A==="true"||A==="TRUE"||A!=="false"&&A!=="FALSE"&&((ie=>{if(fe.test(ie)&&(ie=parseFloat(ie),oe<ie&&ie<U))return 1})(A)?parseFloat(A):ce.test(A)?new Date(A):A===""?null:A):A)(re=e.header?V>=Z.length?"__parsed_extra":Z[V]:re,_=e.transform?e.transform(_,re):_);re==="__parsed_extra"?(J[re]=J[re]||[],J[re].push(_)):J[re]=_}return e.header&&(V>Z.length?I("FieldMismatch","TooManyFields","Too many fields: expected "+Z.length+" fields but parsed "+V,M+R):V<Z.length&&I("FieldMismatch","TooFewFields","Too few fields: expected "+Z.length+" fields but parsed "+V,M+R)),J}var te;$&&(e.header||e.dynamicTyping||e.transform)&&(te=1,!$.data.length||Array.isArray($.data[0])?($.data=$.data.map(j),te=$.data.length):$.data=j($.data,0),e.header&&$.meta&&($.meta.fields=Z),M+=te)}function D(){return e.header&&Z.length===0}function I(O,j,te,v){O={type:O,code:j,message:te},v!==void 0&&(O.row=v),$.errors.push(O)}z(e.step)&&(w=e.step,e.step=function(O){$=O,D()?Y():(Y(),$.data.length!==0&&(H+=O.data.length,e.preview&&H>e.preview?d.abort():($.data=$.data[0],w($,K))))}),this.parse=function(O,j,te){var v=e.quoteChar||'"',v=(e.newline||(e.newline=this.guessLineEndings(O,v)),S=!1,e.delimiter?z(e.delimiter)&&(e.delimiter=e.delimiter(O),$.meta.delimiter=e.delimiter):((v=((R,J,V,re,_)=>{var k,A,ie,_e;_=_||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var ke=0;ke<_.length;ke++){for(var be,De=_[ke],me=0,xe=0,we=0,ue=(ie=void 0,new f({comments:re,delimiter:De,newline:J,preview:10}).parse(R)),pe=0;pe<ue.data.length;pe++)V&&m(ue.data[pe])?we++:(be=ue.data[pe].length,xe+=be,ie===void 0?ie=be:0<be&&(me+=Math.abs(be-ie),ie=be));0<ue.data.length&&(xe/=ue.data.length-we),(A===void 0||me<=A)&&(_e===void 0||_e<xe)&&1.99<xe&&(A=me,k=De,_e=xe)}return{successful:!!(e.delimiter=k),bestDelimiter:k}})(O,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=v.bestDelimiter:(S=!0,e.delimiter=h.DefaultDelimiter),$.meta.delimiter=e.delimiter),N(e));return e.preview&&e.header&&v.preview++,t=O,d=new f(v),$=d.parse(t,j,te),Y(),le?{meta:{paused:!0}}:$||{meta:{paused:!1}}},this.paused=function(){return le},this.pause=function(){le=!0,d.abort(),t=z(e.chunk)?"":t.substring(d.getCharIndex())},this.resume=function(){K.streamer._halted?(le=!1,K.streamer.parseChunk(t,!0)):setTimeout(K.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,d.abort(),$.meta.aborted=!0,z(e.complete)&&e.complete($),t=""},this.guessLineEndings=function(R,v){R=R.substring(0,1048576);var v=new RegExp(q(v)+"([^]*?)"+q(v),"gm"),te=(R=R.replace(v,"")).split("\r"),v=R.split(`
`),R=1<v.length&&v[0].length<te[0].length;if(te.length===1||R)return`
`;for(var J=0,V=0;V<te.length;V++)te[V][0]===`
`&&J++;return J>=te.length/2?`\r
`:"\r"}}function q(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t=(e=e||{}).delimiter,d=e.newline,S=e.comments,w=e.step,U=e.preview,oe=e.fastMode,fe=null,ce=!1,K=e.quoteChar==null?'"':e.quoteChar,H=K;if(e.escapeChar!==void 0&&(H=e.escapeChar),(typeof t!="string"||-1<h.BAD_DELIMITERS.indexOf(t))&&(t=","),S===t)throw new Error("Comment character same as delimiter");S===!0?S="#":(typeof S!="string"||-1<h.BAD_DELIMITERS.indexOf(S))&&(S=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var M=0,le=!1;this.parse=function(G,Z,$){if(typeof G!="string")throw new Error("Input must be a string");var m=G.length,Y=t.length,D=d.length,I=S.length,O=z(w),j=[],te=[],v=[],R=M=0;if(!G)return me();if(oe||oe!==!1&&G.indexOf(K)===-1){for(var J=G.split(d),V=0;V<J.length;V++){if(v=J[V],M+=v.length,V!==J.length-1)M+=d.length;else if($)return me();if(!S||v.substring(0,I)!==S){if(O){if(j=[],_e(v.split(t)),xe(),le)return me()}else _e(v.split(t));if(U&&U<=V)return j=j.slice(0,U),me(!0)}}return me()}for(var re=G.indexOf(t,M),_=G.indexOf(d,M),k=new RegExp(q(H)+q(K),"g"),A=G.indexOf(K,M);;)if(G[M]===K)for(A=M,M++;;){if((A=G.indexOf(K,A+1))===-1)return $||te.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:j.length,index:M}),be();if(A===m-1)return be(G.substring(M,A).replace(k,K));if(K===H&&G[A+1]===H)A++;else if(K===H||A===0||G[A-1]!==H){re!==-1&&re<A+1&&(re=G.indexOf(t,A+1));var ie=ke((_=_!==-1&&_<A+1?G.indexOf(d,A+1):_)===-1?re:Math.min(re,_));if(G.substr(A+1+ie,Y)===t){v.push(G.substring(M,A).replace(k,K)),G[M=A+1+ie+Y]!==K&&(A=G.indexOf(K,M)),re=G.indexOf(t,M),_=G.indexOf(d,M);break}if(ie=ke(_),G.substring(A+1+ie,A+1+ie+D)===d){if(v.push(G.substring(M,A).replace(k,K)),De(A+1+ie+D),re=G.indexOf(t,M),A=G.indexOf(K,M),O&&(xe(),le))return me();if(U&&j.length>=U)return me(!0);break}te.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:j.length,index:M}),A++}}else if(S&&v.length===0&&G.substring(M,M+I)===S){if(_===-1)return me();M=_+D,_=G.indexOf(d,M),re=G.indexOf(t,M)}else if(re!==-1&&(re<_||_===-1))v.push(G.substring(M,re)),M=re+Y,re=G.indexOf(t,M);else{if(_===-1)break;if(v.push(G.substring(M,_)),De(_+D),O&&(xe(),le))return me();if(U&&j.length>=U)return me(!0)}return be();function _e(we){j.push(we),R=M}function ke(we){var ue=0;return ue=we!==-1&&(we=G.substring(A+1,we))&&we.trim()===""?we.length:ue}function be(we){return $||(we===void 0&&(we=G.substring(M)),v.push(we),M=m,_e(v),O&&xe()),me()}function De(we){M=we,_e(v),v=[],_=G.indexOf(d,M)}function me(we){if(e.header&&!Z&&j.length&&!ce){var ue=j[0],pe={},Ee=new Set(ue);let st=!1;for(let Ve=0;Ve<ue.length;Ve++){let Te=ue[Ve];if(pe[Te=z(e.transformHeader)?e.transformHeader(Te,Ve):Te]){let Be,it=pe[Te];for(;Be=Te+"_"+it,it++,Ee.has(Be););Ee.add(Be),ue[Ve]=Be,pe[Te]++,st=!0,(fe=fe===null?{}:fe)[Be]=Te}else pe[Te]=1,ue[Ve]=Te;Ee.add(Te)}st&&console.warn("Duplicate headers found and renamed."),ce=!0}return{data:j,errors:te,meta:{delimiter:t,linebreak:d,aborted:le,truncated:!!we,cursor:R+(Z||0),renamedHeaders:fe}}}function xe(){w(me()),j=[],te=[]}},this.abort=function(){le=!0},this.getCharIndex=function(){return M}}function C(e){var t=e.data,d=y[t.workerId],S=!1;if(t.error)d.userError(t.error,t.file);else if(t.results&&t.results.data){var w={abort:function(){S=!0,E(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(z(d.userStep)){for(var U=0;U<t.results.data.length&&(d.userStep({data:t.results.data[U],errors:t.results.errors,meta:t.results.meta},w),!S);U++);delete t.results}else z(d.userChunk)&&(d.userChunk(t.results,w,t.file),delete t.results)}t.finished&&!S&&E(t.workerId,t.results)}function E(e,t){var d=y[e];z(d.userComplete)&&d.userComplete(t),d.terminate(),delete y[e]}function b(){throw new Error("Not implemented.")}function N(e){if(typeof e!="object"||e===null)return e;var t,d=Array.isArray(e)?[]:{};for(t in e)d[t]=N(e[t]);return d}function B(e,t){return function(){e.apply(t,arguments)}}function z(e){return typeof e=="function"}return h.parse=function(e,t){var d=(t=t||{}).dynamicTyping||!1;if(z(d)&&(t.dynamicTypingFunction=d,d={}),t.dynamicTyping=d,t.transform=!!z(t.transform)&&t.transform,!t.worker||!h.WORKERS_SUPPORTED)return d=null,h.NODE_STREAM_INPUT,typeof e=="string"?(e=(S=>S.charCodeAt(0)!==65279?S:S.slice(1))(e),d=new(t.download?x:F)(t)):e.readable===!0&&z(e.read)&&z(e.on)?d=new X(t):(l.File&&e instanceof File||e instanceof Object)&&(d=new T(t)),d.stream(e);(d=(()=>{var S;return!!h.WORKERS_SUPPORTED&&(S=(()=>{var w=l.URL||l.webkitURL||null,U=s.toString();return h.BLOB_URL||(h.BLOB_URL=w.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",U,")();"],{type:"text/javascript"})))})(),(S=new l.Worker(S)).onmessage=C,S.id=Q++,y[S.id]=S)})()).userStep=t.step,d.userChunk=t.chunk,d.userComplete=t.complete,d.userError=t.error,t.step=z(t.step),t.chunk=z(t.chunk),t.complete=z(t.complete),t.error=z(t.error),delete t.worker,d.postMessage({input:e,config:t,workerId:d.id})},h.unparse=function(e,t){var d=!1,S=!0,w=",",U=`\r
`,oe='"',fe=oe+oe,ce=!1,K=null,H=!1,M=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||h.BAD_DELIMITERS.filter(function(Z){return t.delimiter.indexOf(Z)!==-1}).length||(w=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(d=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(ce=t.skipEmptyLines),typeof t.newline=="string"&&(U=t.newline),typeof t.quoteChar=="string"&&(oe=t.quoteChar),typeof t.header=="boolean"&&(S=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");K=t.columns}t.escapeChar!==void 0&&(fe=t.escapeChar+oe),t.escapeFormulae instanceof RegExp?H=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(q(oe),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return le(null,e,ce);if(typeof e[0]=="object")return le(K||Object.keys(e[0]),e,ce)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||K),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),le(e.fields||[],e.data||[],ce);throw new Error("Unable to serialize unrecognized input");function le(Z,$,m){var Y="",D=(typeof Z=="string"&&(Z=JSON.parse(Z)),typeof $=="string"&&($=JSON.parse($)),Array.isArray(Z)&&0<Z.length),I=!Array.isArray($[0]);if(D&&S){for(var O=0;O<Z.length;O++)0<O&&(Y+=w),Y+=G(Z[O],O);0<$.length&&(Y+=U)}for(var j=0;j<$.length;j++){var te=(D?Z:$[j]).length,v=!1,R=D?Object.keys($[j]).length===0:$[j].length===0;if(m&&!D&&(v=m==="greedy"?$[j].join("").trim()==="":$[j].length===1&&$[j][0].length===0),m==="greedy"&&D){for(var J=[],V=0;V<te;V++){var re=I?Z[V]:V;J.push($[j][re])}v=J.join("").trim()===""}if(!v){for(var _=0;_<te;_++){0<_&&!R&&(Y+=w);var k=D&&I?Z[_]:_;Y+=G($[j][k],_)}j<$.length-1&&(!m||0<te&&!R)&&(Y+=U)}}return Y}function G(Z,$){var m,Y;return Z==null?"":Z.constructor===Date?JSON.stringify(Z).slice(1,25):(Y=!1,H&&typeof Z=="string"&&H.test(Z)&&(Z="'"+Z,Y=!0),m=Z.toString().replace(M,fe),(Y=Y||d===!0||typeof d=="function"&&d(Z,$)||Array.isArray(d)&&d[$]||((D,I)=>{for(var O=0;O<I.length;O++)if(-1<D.indexOf(I[O]))return!0;return!1})(m,h.BAD_DELIMITERS)||-1<m.indexOf(w)||m.charAt(0)===" "||m.charAt(m.length-1)===" ")?oe+m+oe:m)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!g&&!!l.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=f,h.ParserHandle=ee,h.NetworkStreamer=x,h.FileStreamer=T,h.StringStreamer=F,h.ReadableStreamStreamer=X,l.jQuery&&((p=l.jQuery).fn.parse=function(e){var t=e.config||{},d=[];return this.each(function(U){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var oe=0;oe<this.files.length;oe++)d.push({file:this.files[oe],inputElem:this,instanceConfig:p.extend({},t)})}),S(),this;function S(){if(d.length===0)z(e.complete)&&e.complete();else{var U,oe,fe,ce,K=d[0];if(z(e.before)){var H=e.before(K.file,K.inputElem);if(typeof H=="object"){if(H.action==="abort")return U="AbortError",oe=K.file,fe=K.inputElem,ce=H.reason,void(z(e.error)&&e.error({name:U},oe,fe,ce));if(H.action==="skip")return void w();typeof H.config=="object"&&(K.instanceConfig=p.extend(K.instanceConfig,H.config))}else if(H==="skip")return void w()}var M=K.instanceConfig.complete;K.instanceConfig.complete=function(le){z(M)&&M(le,K.file,K.inputElem),w()},h.parse(K.file,K.instanceConfig)}}function w(){d.splice(0,1),S()}}),c&&(l.onmessage=function(e){e=e.data,h.WORKER_ID===void 0&&e&&(h.WORKER_ID=e.workerId),typeof e.input=="string"?l.postMessage({workerId:h.WORKER_ID,results:h.parse(e.input,e.config),finished:!0}):(l.File&&e.input instanceof File||e.input instanceof Object)&&(e=h.parse(e.input,e.config))&&l.postMessage({workerId:h.WORKER_ID,results:e,finished:!0})}),(x.prototype=Object.create(P.prototype)).constructor=x,(T.prototype=Object.create(P.prototype)).constructor=T,(F.prototype=Object.create(F.prototype)).constructor=F,(X.prototype=Object.create(P.prototype)).constructor=X,h})}(Xe)),Xe.exports}var or=nr();const lr=sr(or);function dr(i){const r=lr.parse(i,{header:!0,skipEmptyLines:!0,transformHeader:s=>s.trim().toLowerCase(),dynamicTyping:!1,transform:s=>s.trim()});return r.errors.length>0?(console.error("CSV Parsing Errors with Papaparse:",r.errors),r.data.filter(l=>l&&typeof l=="object"&&Object.keys(l).length>0)):r.data.filter(s=>s&&typeof s=="object"&&Object.keys(s).length>0)}function cr(i){const r={};return i.forEach(s=>{var x;const l=s.title;if(!l)return;const p=[],g=Object.keys(s),c=g.findIndex(T=>T.toLowerCase()==="casted");if(c!==-1)for(let T=c+1;T<g.length;T++){const F=g[T].trim(),X=(x=s[g[T]])==null?void 0:x.trim();F&&X&&p.push({character_name:X,performer_name:F})}const y=s.time||s.duration||"5:00",[Q,h]=y.split(":").map(Number),P=Q+(h||0)/60;r[l]={id:crypto.randomUUID(),title:l,description:s.description||"",duration:Math.ceil(P),chars:parseInt(s.chars||"0",10),casted:p.length,locked:!1,character_performers:p.map(T=>({character_name:T.character_name,performer_name:T.performer_name})),raw_data:s}}),Object.values(r)}async function ur(i){return new Promise((r,s)=>{const l=new FileReader;l.onload=p=>{var g;try{const c=(g=p.target)==null?void 0:g.result,y=dr(c);r(y)}catch(c){s(c)}},l.onerror=()=>s(l.error),l.readAsText(i)})}var vr=ae('<div><h2 class="text-lg font-medium text-gray-900 mb-4">Import Running Order</h2> <div class="space-y-6"><div class="flex items-center justify-center w-full"><label for="csv-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"><div class="flex flex-col items-center justify-center pt-5 pb-6"><svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg> <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p> <p class="text-xs text-gray-500">CSV files only</p></div> <input id="csv-file" type="file" accept=".csv" class="hidden"></label></div> <button type="button" class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-2">Upload CSV</button></div></div>');function hr(i,r){Se(r,!1),de(r,"showId",8);const s=Re();let l=ge(),p=ge(!1);function g(f){const C=f.map(t=>t.toLowerCase().trim());if(["sketch","cues","props","costume","stage dressing"].every(t=>C.includes(t)))return"techDetails";const N=["title"],B=["time","chars","casted","rocio","jacob","adrian","vera","max","gusta","richie","harry","connor","kieran","chiara","lari","theresa","cliff","tim"],z=N.every(t=>C.includes(t)),e=B.some(t=>C.includes(t));return z&&e?"sketches":"unknown"}async function c(){const f=a(l).files;if(!(!f||f.length===0))try{const C=f[0],E=await ur(C);if(!E||E.length===0){alert("CSV file is empty or could not be processed."),He(l,a(l).value="");return}const b=Object.keys(E[0]),N=g(b);if(N==="unknown"){alert('Could not automatically determine CSV type. Please check the file headers and format. Expected headers for sketches: "title" and at least one of "Time", "chars", etc. Expected headers for tech details: "Sketch", "Cues", "Props", "Costume", "Stage Dressing".'),He(l,a(l).value="");return}let B;N==="sketches"?B=cr(E):B=E,s("import",{importType:N,data:B}),He(l,a(l).value="")}catch(C){console.error("Error importing CSV:",C),alert("Error importing CSV file. Please check the file format and content."),He(l,a(l).value="")}}function y(f){f.preventDefault(),L(p,!0)}function Q(f){f.preventDefault(),L(p,!1)}function h(f){var E;f.preventDefault(),L(p,!1);const C=(E=f.dataTransfer)==null?void 0:E.files;C&&C.length>0&&(He(l,a(l).files=C),c())}Ie();var P=vr();let x;var T=u(o(P),2),F=o(T),X=o(F),ee=u(o(X),2);Nt(ee,f=>L(l,f),()=>a(l)),n(X),n(F);var q=u(F,2);q.__click=c,n(T),n(P),he(f=>x=ye(P,1,"bg-white p-6 rounded-lg shadow-sm",null,x,f),[()=>({"border-2":a(p),"border-dashed":a(p),"border-blue-500":a(p)})],Pe),ne("dragover",P,f=>y(f)),ne("dragleave",P,f=>Q(f)),ne("drop",P,f=>h(f)),W(i,P),Ce()}ht(["click"]);const fr=i=>i;function pr(i){const r=i-1;return r*r*r+1}function gr(i,{delay:r=0,duration:s=400,easing:l=fr}={}){const p=+getComputedStyle(i).opacity;return{delay:r,duration:s,easing:l,css:g=>`opacity: ${g*p}`}}function _r(i,{delay:r=0,duration:s=400,easing:l=pr,axis:p="y"}={}){const g=getComputedStyle(i),c=+g.opacity,y=p==="y"?"height":"width",Q=parseFloat(g[y]),h=p==="y"?["top","bottom"]:["left","right"],P=h.map(f=>`${f[0].toUpperCase()}${f.slice(1)}`),x=parseFloat(g[`padding${P[0]}`]),T=parseFloat(g[`padding${P[1]}`]),F=parseFloat(g[`margin${P[0]}`]),X=parseFloat(g[`margin${P[1]}`]),ee=parseFloat(g[`border${P[0]}Width`]),q=parseFloat(g[`border${P[1]}Width`]);return{delay:r,duration:s,easing:l,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*c};${y}: ${f*Q}px;padding-${h[0]}: ${f*x}px;padding-${h[1]}: ${f*T}px;margin-${h[0]}: ${f*F}px;margin-${h[1]}: ${f*X}px;border-${h[0]}-width: ${f*ee}px;border-${h[1]}-width: ${f*q}px;min-${y}: 0`}}var mr=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),br=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),kr=ae('<span class="text-amber-500"> </span>'),wr=ae('<li class="flex justify-between"><span class="font-medium text-gray-700"> </span> <span class="text-gray-500"> </span></li>'),yr=ae('<div class="cast-list px-4 pb-3 pt-1 bg-gray-50"><ul class="text-xs space-y-1"></ul></div>'),xr=ae('<div class="border-t border-gray-200 px-4 py-2"><button class="cast-toggle text-sm text-blue-600 hover:text-blue-800 font-medium focus:outline-none w-full text-left flex justify-between items-center"><span> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!>',1),Sr=ae('<div tabindex="0" role="button" style="min-height: 150px;"><div class="p-4 flex-grow"><div class="flex justify-between items-center mb-2"><div class="flex items-center gap-2"><h3 class="text-lg font-semibold text-gray-800 truncate"> </h3> <!></div> <div class="flex items-center gap-0.5"><button><!></button> <button class="action-button delete-button svelte-1qd7kif" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <p class="description text-sm text-gray-600 mb-3 line-clamp-1"> </p> <div class="stats text-xs text-gray-500 space-x-3 mb-3"><span> </span> <span> </span> <span> </span> <!></div></div> <!></div>');function Cr(i,r){Se(r,!1);let s=de(r,"sketch",8),l=de(r,"isSelected",8,!1),p=de(r,"showCharacterWarning",8,!1),g=ge(!1);const c=Re();function y(m){m.target instanceof HTMLElement&&m.target.closest("button, .cast-toggle")||m.target instanceof HTMLElement&&m.target.closest(".card")&&c("select",{sketch:s()})}function Q(m){m.stopPropagation(),c("lock",{id:s().id,locked:!s().locked})}function h(m){m.stopPropagation(),c("delete",{id:s().id})}function P(m){m.stopPropagation(),L(g,!a(g))}function x(m){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),m.target instanceof HTMLElement&&m.target.closest("button, .cast-toggle")?m.target.closest(".cast-toggle")&&P(m):y(m))}Ie();var T=Sr(),F=o(T),X=o(F),ee=o(X),q=o(ee),f=o(q,!0);n(q);var C=u(q,2);{var E=m=>{kt(m,{class:"warning-icon",size:16})};ve(C,m=>{p()&&m(E)})}n(ee);var b=u(ee,2),N=o(b);let B;var z=o(N);{var e=m=>{var Y=mr();W(m,Y)},t=m=>{var Y=br();W(m,Y)};ve(z,m=>{s().locked?m(e):m(t,!1)})}n(N);var d=u(N,2);n(b),n(X);var S=u(X,2),w=o(S,!0);n(S);var U=u(S,2),oe=o(U),fe=o(oe);n(oe);var ce=u(oe,2),K=o(ce);n(ce);var H=u(ce,2),M=o(H);n(H);var le=u(H,2);{var G=m=>{var Y=kr(),D=o(Y);n(Y),he(()=>{var I;return se(D,`(${(((I=s().character_performers)==null?void 0:I.length)||0)??""}/${s().chars??""} characters)`)}),W(m,Y)};ve(le,m=>{p()&&m(G)})}n(U),n(F);var Z=u(F,2);{var $=m=>{var Y=xr(),D=Le(Y),I=o(D),O=o(I),j=o(O);n(O);var te=u(O,2);n(I),n(D);var v=u(D,2);{var R=J=>{var V=yr(),re=o(V);je(re,5,()=>s().character_performers,_=>_.id||_.character_name+_.performer_name,(_,k)=>{var A=wr(),ie=o(A),_e=o(ie,!0);n(ie);var ke=u(ie,2),be=o(ke,!0);n(ke),n(A),he(()=>{se(_e,a(k).character_name),se(be,a(k).performer_name)}),W(_,A)}),n(re),n(V),_t(3,V,()=>_r,()=>({duration:200})),W(J,V)};ve(v,J=>{a(g)&&J(R)})}he(()=>{$e(I,"aria-expanded",a(g)),se(j,`Show Cast (${s().character_performers.length??""})`),ye(te,0,`w-4 h-4 transform transition-transform duration-200 ${a(g)?"rotate-180":""}`)}),ne("click",I,P),W(m,Y)};ve(Z,m=>{s().character_performers&&s().character_performers.length>0&&m($)})}n(T),he(m=>{ye(T,1,`card ${l()?"selected border-blue-500":"border-gray-200"} ${s().locked?"locked":""} border bg-white rounded-lg shadow hover:shadow-md transition-all duration-200 flex flex-col`,"svelte-1qd7kif"),$e(T,"aria-label",`View sketch details for ${s().title??""}`),$e(q,"title",s().title),se(f,s().title),B=ye(N,1,"action-button lock-button svelte-1qd7kif",null,B,m),$e(N,"aria-label",s().locked?"Unlock sketch":"Lock sketch"),$e(N,"title",s().locked?"Unlock sketch":"Lock sketch"),$e(S,"title",s().description||"A sketch waiting for its story..."),se(w,s().description||"A sketch waiting for its story..."),se(fe,`Duration: ${s().duration??""} min`),se(K,`Chars: ${s().chars??""}`),se(M,`Casted: ${s().casted??""}`)},[()=>({locked:s().locked})],Pe),ne("click",N,Je(Q)),ne("click",d,Je(h)),ne("click",T,y),ne("keydown",T,x),W(i,T),Ce()}function Er(i,r){L(r,!0)}function Dr(i,r,s,l,p,g,c,y){L(r,!1),L(s,l().title),L(p,l().description),L(g,l().duration),L(c,l().chars),L(y,[...l().character_performers||[]])}function $r(i,r,s,l,p,g,c,y,Q){const h={...r(),title:a(s),description:a(l),duration:a(p),chars:a(g),casted:a(c).length,character_performers:a(c)};y("update",{sketch:h}),L(Q,!1)}var Or=i=>i.stopPropagation(),Pr=(i,r)=>i.key==="Enter"&&r(),Ir=(i,r,s)=>r(a(s).id),Tr=ae('<li class="svelte-9bbfpy"><span class="character svelte-9bbfpy"> </span> <span class="performer svelte-9bbfpy"> </span> <button type="button" class="remove-button svelte-9bbfpy">Ã—</button></li>'),Rr=ae('<div class="character-list svelte-9bbfpy"><h4>Current Assignments</h4> <ul class="svelte-9bbfpy"></ul></div>'),Mr=ae('<div class="edit-form svelte-9bbfpy"><div class="form-group svelte-9bbfpy"><label for="title" class="svelte-9bbfpy">Title</label> <input type="text" id="title" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="description" class="svelte-9bbfpy">Description</label> <textarea id="description" class="svelte-9bbfpy"></textarea></div> <div class="form-group svelte-9bbfpy"><label for="duration" class="svelte-9bbfpy">Duration (minutes)</label> <input type="number" id="duration" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label for="chars" class="svelte-9bbfpy">Number of Characters</label> <input type="number" id="chars" min="1" required class="svelte-9bbfpy"></div> <div class="form-group svelte-9bbfpy"><label class="svelte-9bbfpy">Character Assignments</label> <div class="character-inputs svelte-9bbfpy"><input type="text" placeholder="Character name" class="svelte-9bbfpy"> <input type="text" placeholder="Performer name" class="svelte-9bbfpy"> <button type="button" class="svelte-9bbfpy">Add</button></div></div> <!> <div class="form-actions svelte-9bbfpy"><button type="button" class="svelte-9bbfpy">Cancel</button> <button type="button" class="svelte-9bbfpy">Save</button></div></div>'),jr=ae('<p class="description svelte-9bbfpy"> </p>'),Lr=ae('<div class="cast-item svelte-9bbfpy"><span class="character-name svelte-9bbfpy"> </span> <span class="performer-name svelte-9bbfpy"> </span></div>'),Ar=ae('<div class="cast-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Cast</h4> <div class="cast-grid svelte-9bbfpy"></div></div>'),Vr=ae('<div class="tech-grid svelte-9bbfpy"><div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Cues</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Props</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Costume</span> <span class="tech-value svelte-9bbfpy"> </span></div> <div class="tech-item svelte-9bbfpy"><span class="tech-label svelte-9bbfpy">Stage Dressing</span> <span class="tech-value svelte-9bbfpy"> </span></div></div>'),zr=ae('<p class="no-tech-details svelte-9bbfpy">No tech details available for this sketch.</p>'),Fr=ae('<div class="view-mode svelte-9bbfpy"><div class="header svelte-9bbfpy"><h2 class="svelte-9bbfpy"> </h2> <button type="button" class="edit-button svelte-9bbfpy">Edit</button></div> <!> <div class="stats-container svelte-9bbfpy"><div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Duration</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Characters</span> <span class="stat-value svelte-9bbfpy"> </span></div> <div class="stat-item svelte-9bbfpy"><span class="stat-label svelte-9bbfpy">Casted</span> <span class="stat-value svelte-9bbfpy"> </span></div></div> <!> <div class="tech-section svelte-9bbfpy"><h4 class="section-title svelte-9bbfpy">Tech Details</h4> <!></div></div>'),qr=ae('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6"><div class="flex justify-between items-start mb-4"><div class="flex items-center gap-4"><button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Back to show"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button> <h2 class="text-2xl font-bold text-gray-900"> </h2></div> <button type="button" class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close details"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!></div></div></div>');function Nr(i,r){Se(r,!1);let s=de(r,"sketch",8);const l=Re();let p=ge(!1),g=ge(s().title),c=ge(s().description),y=ge(s().duration),Q=ge(s().chars),h=ge(""),P=ge(""),x=ge([...s().character_performers||[]]);function T(){!a(h)||!a(P)||(L(x,[...a(x),{id:crypto.randomUUID(),sketch_id:s().id,character_name:a(h),performer_name:a(P),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),L(h,""),L(P,""))}function F(w){L(x,a(x).filter(U=>U.id!==w))}function X(w){w.stopPropagation(),l("close")}function ee(w){w.key==="Escape"&&X(w)}ft(()=>(document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee))),Ie();var q=qr();q.__click=X;var f=o(q);f.__click=[Or];var C=o(f),E=o(C),b=o(E),N=o(b);N.__click=X;var B=u(N,2),z=o(B,!0);n(B),n(b);var e=u(b,2);e.__click=X,n(E);var t=u(E,2);{var d=w=>{var U=Mr(),oe=o(U),fe=u(o(oe),2);We(fe),n(oe);var ce=u(oe,2),K=u(o(ce),2);At(K),n(ce);var H=u(ce,2),M=u(o(H),2);We(M),n(H);var le=u(H,2),G=u(o(le),2);We(G),n(le);var Z=u(le,2),$=u(o(Z),2),m=o($);We(m);var Y=u(m,2);We(Y),Y.__keydown=[Pr,T];var D=u(Y,2);D.__click=T,n($),n(Z);var I=u(Z,2);{var O=R=>{var J=Rr(),V=u(o(J),2);je(V,5,()=>a(x),Ge,(re,_)=>{var k=Tr(),A=o(k),ie=o(A,!0);n(A);var _e=u(A,2),ke=o(_e,!0);n(_e);var be=u(_e,2);be.__click=[Ir,F,_],n(k),he(()=>{se(ie,a(_).character_name),se(ke,a(_).performer_name)}),W(re,k)}),n(V),n(J),W(R,J)};ve(I,R=>{a(x).length>0&&R(O)})}var j=u(I,2),te=o(j);te.__click=[Dr,p,g,s,c,y,Q,x];var v=u(te,2);v.__click=[$r,s,g,c,y,Q,x,l,p],n(j),n(U),ze(fe,()=>a(g),R=>L(g,R)),ze(K,()=>a(c),R=>L(c,R)),ze(M,()=>a(y),R=>L(y,R)),ze(G,()=>a(Q),R=>L(Q,R)),ze(m,()=>a(h),R=>L(h,R)),ze(Y,()=>a(P),R=>L(P,R)),W(w,U)},S=w=>{var U=Fr(),oe=o(U),fe=o(oe),ce=o(fe,!0);n(fe);var K=u(fe,2);K.__click=[Er,p],n(oe);var H=u(oe,2);{var M=_=>{var k=jr(),A=o(k,!0);n(k),he(()=>se(A,s().description)),W(_,k)};ve(H,_=>{s().description&&_(M)})}var le=u(H,2),G=o(le),Z=u(o(G),2),$=o(Z);n(Z),n(G);var m=u(G,2),Y=u(o(m),2),D=o(Y,!0);n(Y),n(m);var I=u(m,2),O=u(o(I),2),j=o(O,!0);n(O),n(I),n(le);var te=u(le,2);{var v=_=>{var k=Ar(),A=u(o(k),2);je(A,5,()=>s().character_performers,Ge,(ie,_e)=>{var ke=Lr(),be=o(ke),De=o(be,!0);n(be);var me=u(be,2),xe=o(me,!0);n(me),n(ke),he(()=>{se(De,a(_e).character_name),se(xe,a(_e).performer_name)}),W(ie,ke)}),n(A),n(k),W(_,k)};ve(te,_=>{var k;(k=s().character_performers)!=null&&k.length&&_(v)})}var R=u(te,2),J=u(o(R),2);{var V=_=>{var k=Vr(),A=o(k),ie=u(o(A),2),_e=o(ie,!0);n(ie),n(A);var ke=u(A,2),be=u(o(ke),2),De=o(be,!0);n(be),n(ke);var me=u(ke,2),xe=u(o(me),2),we=o(xe,!0);n(xe),n(me);var ue=u(me,2),pe=u(o(ue),2),Ee=o(pe,!0);n(pe),n(ue),n(k),he(()=>{se(_e,s().techDetails.cues||"N/A"),se(De,s().techDetails.props||"N/A"),se(we,s().techDetails.costume||"N/A"),se(Ee,s().techDetails.stage_dressing||"N/A")}),W(_,k)},re=_=>{var k=zr();W(_,k)};ve(J,_=>{s().techDetails?_(V):_(re,!1)})}n(R),n(U),he(()=>{se(ce,s().title),se($,`${s().duration??""} min`),se(D,s().chars),se(j,s().casted)}),W(w,U)};ve(t,w=>{a(p)?w(d):w(S,!1)})}n(C),n(f),n(q),he(()=>se(z,s().title)),W(i,q),Ce()}ht(["click","keydown"]);function Ur(i){const r=i-1;return r*r*r+1}function yt(i,{from:r,to:s},l={}){var{delay:p=0,duration:g=B=>Math.sqrt(B)*120,easing:c=Ur}=l,y=getComputedStyle(i),Q=y.transform==="none"?"":y.transform,[h,P]=y.transformOrigin.split(" ").map(parseFloat);h/=i.clientWidth,P/=i.clientHeight;var x=Br(i),T=i.clientWidth/s.width/x,F=i.clientHeight/s.height/x,X=r.left+r.width*h,ee=r.top+r.height*P,q=s.left+s.width*h,f=s.top+s.height*P,C=(X-q)*T,E=(ee-f)*F,b=r.width/s.width,N=r.height/s.height;return{delay:p,duration:typeof g=="function"?g(Math.sqrt(C*C+E*E)):g,easing:c,css:(B,z)=>{var e=z*C,t=z*E,d=B+z*b,S=B+z*N;return`transform: ${Q} translate(${e}px, ${t}px) scale(${d}, ${S});`}}}function Br(i){if("currentCSSZoom"in i)return i.currentCSSZoom;for(var r=i,s=1;r!==null;)s*=+getComputedStyle(r).zoom,r=r.parentElement;return s}var Hr=ae('<div class="detail svelte-1k3z6oi"><strong>Costume:</strong> </div>'),Wr=ae('<div class="detail svelte-1k3z6oi"><strong>Stage:</strong> </div>'),Kr=ae('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),Gr=ae('<div class="detail svelte-1k3z6oi"><strong>Cues:</strong> </div>'),Jr=ae('<div class="detail svelte-1k3z6oi"><strong>Props:</strong> </div>'),Qr=ae('<div class="tech-details svelte-1k3z6oi"><!> <!></div>'),Zr=ae('<div class="sketch svelte-1k3z6oi"><div class="sketch-header svelte-1k3z6oi"><span class="position svelte-1k3z6oi"> </span> <span class="title svelte-1k3z6oi"> </span> <span class="duration svelte-1k3z6oi"> </span></div> <div class="performers svelte-1k3z6oi"> </div> <!> <!></div>'),Xr=ae('<div class="print-container svelte-1k3z6oi"><div class="header svelte-1k3z6oi"><h1 class="svelte-1k3z6oi"> </h1> <div class="version-info svelte-1k3z6oi"><!></div></div> <div class="sketches svelte-1k3z6oi"></div></div>');function Yr(i,r){Se(r,!1);const s=ge();let l=de(r,"sketches",8),p=de(r,"showTitle",8),g=de(r,"version",8);function c(f){const C=Math.floor(f/60),E=f%60;return C>0?`${C}h ${E}m`:`${E}m`}function y(f){return(f.character_performers||[]).map(C=>C.performer_name).join(", ")}Ze(()=>Tt(l()),()=>{L(s,[...l()].sort((f,C)=>f.position-C.position))}),vt(),Ie();var Q=Xr(),h=o(Q),P=o(h),x=o(P,!0);n(P);var T=u(P,2),F=o(T);{var X=f=>{var C=rt("Green Room Version");W(f,C)},ee=(f,C)=>{{var E=N=>{var B=rt("Hallway Version");W(N,B)},b=N=>{var B=rt("Tech Booth Version");W(N,B)};ve(f,N=>{g()==="hallway"?N(E):N(b,!1)},C)}};ve(F,f=>{g()==="greenroom"?f(X):f(ee,!1)})}n(T),n(h);var q=u(h,2);je(q,5,()=>a(s),Ge,(f,C)=>{var E=Zr(),b=o(E),N=o(b),B=o(N);n(N);var z=u(N,2),e=o(z,!0);n(z);var t=u(z,2),d=o(t,!0);n(t),n(b);var S=u(b,2),w=o(S,!0);n(S);var U=u(S,2);{var oe=K=>{var H=Kr(),M=o(H);{var le=$=>{var m=Hr(),Y=u(o(m));n(m),he(()=>se(Y,` ${a(C).techDetails.costume??""}`)),W($,m)};ve(M,$=>{var m;(m=a(C).techDetails)!=null&&m.costume&&$(le)})}var G=u(M,2);{var Z=$=>{var m=Wr(),Y=u(o(m));n(m),he(()=>se(Y,` ${a(C).techDetails.stage_dressing??""}`)),W($,m)};ve(G,$=>{var m;(m=a(C).techDetails)!=null&&m.stage_dressing&&$(Z)})}n(H),W(K,H)};ve(U,K=>{(g()==="hallway"||g()==="techbooth")&&K(oe)})}var fe=u(U,2);{var ce=K=>{var H=Qr(),M=o(H);{var le=$=>{var m=Gr(),Y=u(o(m));n(m),he(()=>se(Y,` ${a(C).techDetails.cues??""}`)),W($,m)};ve(M,$=>{var m;(m=a(C).techDetails)!=null&&m.cues&&$(le)})}var G=u(M,2);{var Z=$=>{var m=Jr(),Y=u(o(m));n(m),he(()=>se(Y,` ${a(C).techDetails.props??""}`)),W($,m)};ve(G,$=>{var m;(m=a(C).techDetails)!=null&&m.props&&$(Z)})}n(H),W(K,H)};ve(fe,K=>{g()==="techbooth"&&K(ce)})}n(E),he((K,H)=>{se(B,`${a(C).position+1}.`),se(e,a(C).title),se(d,K),se(w,H)},[()=>c(a(C).duration),()=>y(a(C))],Pe),W(f,E)}),n(q),n(Q),he(()=>se(x,p())),W(i,Q),Ce()}var ea=ae("<button> </button>"),ta=ae('<div class="filter-dropdown svelte-uawkgq"><button>All Performers</button> <!></div>'),ra=ae('<div class="collapsed-buttons svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Print Set List"><!></button> <div class="filter-container svelte-uawkgq"><button class="sidebar-button svelte-uawkgq" title="Filter by Performer"><!></button> <!></div> <button class="sidebar-button svelte-uawkgq" title="Import CSV"><!></button></div>'),aa=ae('<div><button class="sidebar-button collapse-button svelte-uawkgq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <div class="sidebar-header svelte-uawkgq"><h1 class="svelte-uawkgq"> </h1> <div class="print-controls svelte-uawkgq"><select class="svelte-uawkgq"><option>Green Room Version</option><option>Hallway Version</option><option>Tech Booth Version</option></select> <button class="print-button svelte-uawkgq">Print Set List</button></div></div> <div class="sidebar-content svelte-uawkgq"><!> <div class="mt-4"><!></div></div> <!></div>');function sa(i,r){Se(r,!1);let s=de(r,"show",8),l=de(r,"performers",8),p=de(r,"selectedPerformer",12,null),g=de(r,"printVersion",12,"greenroom"),c=de(r,"isSidebarCollapsed",12,!1);const y=Re();let Q=ge(!1);function h(){c(!c()),y("collapse",{collapsed:c()})}function P(){L(Q,!a(Q))}function x(H){y("filter",{performer:H}),L(Q,!1)}function T(){y("print",{printVersion:g()})}function F(H){y("csvImport",H.detail)}Ie();var X=aa();let ee;var q=o(X),f=o(q);let C;n(q);var E=u(q,2),b=o(E),N=o(b,!0);n(b);var B=u(b,2),z=o(B);he(()=>{g(),Rt(()=>{})});var e=o(z);e.value=e.__value="greenroom";var t=u(e);t.value=t.__value="hallway";var d=u(t);d.value=d.__value="techbooth",n(z);var S=u(z,2);n(B),n(E);var w=u(E,2),U=o(w);wt(U,{get performers(){return l()},get selectedPerformer(){return p()},set selectedPerformer(H){p(H)},$$legacy:!0});var oe=u(U,2),fe=o(oe);hr(fe,{get showId(){return s().id},$$events:{import:F,importComplete:()=>y("importComplete")}}),n(oe),n(w);var ce=u(w,2);{var K=H=>{var M=ra(),le=o(M),G=o(le);bt(G,{size:20}),n(le);var Z=u(le,2),$=o(Z),m=o($);Qt(m,{size:20}),n($);var Y=u($,2);{var D=j=>{var te=ta(),v=o(te);let R;var J=u(v,2);je(J,1,l,Ge,(V,re)=>{var _=ea();let k;var A=o(_,!0);n(_),he(ie=>{k=ye(_,1,"filter-option svelte-uawkgq",null,k,ie),se(A,a(re))},[()=>({active:p()===a(re)})],Pe),ne("click",_,()=>x(a(re))),W(V,_)}),n(te),he(V=>R=ye(v,1,"filter-option svelte-uawkgq",null,R,V),[()=>({active:p()===null})],Pe),ne("click",v,()=>x(null)),_t(3,te,()=>gr),W(j,te)};ve(Y,j=>{a(Q)&&j(D)})}n(Z);var I=u(Z,2),O=o(I);Yt(O,{size:20}),n(I),n(M),ne("click",le,T),ne("click",$,P),ne("click",I,()=>{const j=document.querySelector('input[type="file"]');j==null||j.click()}),W(H,M)};ve(ce,H=>{c()&&H(K)})}n(X),he((H,M)=>{ee=ye(X,1,"sidebar svelte-uawkgq",null,ee,H),$e(q,"aria-label",c()?"Expand sidebar":"Collapse sidebar"),C=ye(f,0,"arrow-icon svelte-uawkgq",null,C,M),se(N,s().title)},[()=>({collapsed:c()}),()=>({collapsed:c()})],Pe),ne("click",q,h),Kt(z,g),ne("click",S,T),W(i,X),Ce()}var ia=ae('<div class="view-controls svelte-6p89z8"><div class="view-buttons svelte-6p89z8"><button aria-label="Grid view"><!></button> <button aria-label="List view"><!></button></div> <div class="print-buttons svelte-6p89z8"><button>Green Room</button> <button>Hallway</button> <button>Tech Booth</button></div></div>');function na(i,r){Se(r,!1);let s=de(r,"viewMode",12,"list"),l=de(r,"printVersion",12,"greenroom"),p=de(r,"showPrintView",8,!1);const g=Re();function c(z){s(z),g("viewModeChange",{viewMode:z})}function y(z){l(z),g("printVersionChange",{printVersion:z}),g("showPrintViewChange",{showPrintView:!0})}Ie();var Q=ia(),h=o(Q),P=o(h);let x;var T=o(P);Zt(T,{size:20}),n(P);var F=u(P,2);let X;var ee=o(F);Xt(ee,{size:20}),n(F),n(h);var q=u(h,2),f=o(q);let C;var E=u(f,2);let b;var N=u(E,2);let B;n(q),n(Q),he((z,e,t,d,S)=>{x=ye(P,1,"view-button svelte-6p89z8",null,x,z),X=ye(F,1,"view-button svelte-6p89z8",null,X,e),C=ye(f,1,"print-view-button svelte-6p89z8",null,C,t),b=ye(E,1,"print-view-button svelte-6p89z8",null,b,d),B=ye(N,1,"print-view-button svelte-6p89z8",null,B,S)},[()=>({active:s()==="grid"}),()=>({active:s()==="list"}),()=>({active:p()&&l()==="greenroom"}),()=>({active:p()&&l()==="hallway"}),()=>({active:p()&&l()==="techbooth"})],Pe),ne("click",P,()=>c("grid")),ne("click",F,()=>c("list")),ne("click",f,()=>y("greenroom")),ne("click",E,()=>y("hallway")),ne("click",N,()=>y("techbooth")),W(i,Q),Ce()}var oa=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd"></path></svg>'),la=tt('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0m-4 8v3m-6 2h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>'),da=ae('<span class="character-count svelte-t9pjlk"> </span>'),ca=ae('<div class="description svelte-t9pjlk"><strong>Description:</strong> </div>'),ua=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Costume:</strong> </div>'),va=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Stage:</strong> </div>'),ha=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Cues:</strong> </div>'),fa=ae('<div class="detail svelte-t9pjlk"><strong class="svelte-t9pjlk">Props:</strong> </div>'),pa=ae('<div class="tech-details svelte-t9pjlk"><!> <!> <!> <!></div>'),ga=ae('<div class="list-item-details svelte-t9pjlk"><!> <!></div>'),_a=ae('<div role="listitem"><div class="list-item-header svelte-t9pjlk"><div class="list-item-main svelte-t9pjlk"><span class="position svelte-t9pjlk"> </span> <button class="title svelte-t9pjlk"> </button> <!> <span class="duration svelte-t9pjlk"> </span> <div class="list-item-actions svelte-t9pjlk"><button><!></button> <button class="action-button delete-button svelte-t9pjlk" aria-label="Delete sketch" title="Delete sketch"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <div class="list-item-performers svelte-t9pjlk"> <!></div></div> <!></div>'),ma=ae('<div class="list-view svelte-t9pjlk"></div>');function ba(i,r){Se(r,!1),de(r,"sketches",24,()=>[]);let s=de(r,"filteredSketches",24,()=>[]),l=de(r,"expandedSketchId",8,null),p=de(r,"draggedSketch",8,null),g=de(r,"draggedOverIndex",8,null),c=de(r,"flipDurationMs",8,300);de(r,"selectedSketch",8,null);const y=Re();function Q(E){y("select",{sketch:E})}function h(E,b){y("lock",{id:E,locked:b})}function P(E){y("delete",{id:E})}function x(E,b){y("dragstart",{event:E,sketch:b})}function T(E,b){y("dragover",{event:E,index:b})}function F(){y("dragleave")}function X(E,b){y("drop",{event:E,index:b})}function ee(){y("dragend")}function q(E){var N;return(((N=E.character_performers)==null?void 0:N.length)||0)!==E.chars}function f(E){const b=Math.floor(E/60),N=E%60;return b>0?`${b}h ${N}m`:`${N}m`}Ie();var C=ma();je(C,15,s,E=>E.id,(E,b,N)=>{var B=_a();let z;var e=o(B),t=o(e),d=o(t),S=o(d);n(d);var w=u(d,2),U=o(w,!0);n(w);var oe=u(w,2);{var fe=v=>{kt(v,{class:"warning-icon",size:16})};ve(oe,v=>{q(a(b))&&v(fe)})}var ce=u(oe,2),K=o(ce,!0);n(ce);var H=u(ce,2),M=o(H);let le;var G=o(M);{var Z=v=>{var R=oa();W(v,R)},$=v=>{var R=la();W(v,R)};ve(G,v=>{a(b).locked?v(Z):v($,!1)})}n(M);var m=u(M,2);n(H),n(t);var Y=u(t,2),D=o(Y),I=u(D);{var O=v=>{var R=da(),J=o(R);n(R),he(()=>{var V;return se(J,`(${(((V=a(b).character_performers)==null?void 0:V.length)||0)??""}/${a(b).chars??""} characters)`)}),W(v,R)};ve(I,v=>{q(a(b))&&v(O)})}n(Y),n(e);var j=u(e,2);{var te=v=>{var R=ga(),J=o(R);{var V=k=>{var A=ca(),ie=u(o(A));n(A),he(()=>se(ie,` ${a(b).description??""}`)),W(k,A)};ve(J,k=>{a(b).description&&k(V)})}var re=u(J,2);{var _=k=>{var A=pa(),ie=o(A);{var _e=ue=>{var pe=ua(),Ee=u(o(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.costume??""}`)),W(ue,pe)};ve(ie,ue=>{a(b).techDetails.costume&&ue(_e)})}var ke=u(ie,2);{var be=ue=>{var pe=va(),Ee=u(o(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.stage_dressing??""}`)),W(ue,pe)};ve(ke,ue=>{a(b).techDetails.stage_dressing&&ue(be)})}var De=u(ke,2);{var me=ue=>{var pe=ha(),Ee=u(o(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.cues??""}`)),W(ue,pe)};ve(De,ue=>{a(b).techDetails.cues&&ue(me)})}var xe=u(De,2);{var we=ue=>{var pe=fa(),Ee=u(o(pe));n(pe),he(()=>se(Ee,` ${a(b).techDetails.props??""}`)),W(ue,pe)};ve(xe,ue=>{a(b).techDetails.props&&ue(we)})}n(A),W(k,A)};ve(re,k=>{a(b).techDetails&&k(_)})}n(R),W(v,R)};ve(j,v=>{l()===a(b).id&&v(te)})}n(B),he((v,R,J,V)=>{z=ye(B,1,"list-item svelte-t9pjlk",null,z,v),$e(B,"draggable",!a(b).locked),se(S,`${a(b).position+1}.`),$e(w,"aria-label",`View details for ${a(b).title}`),se(U,a(b).title),se(K,R),le=ye(M,1,"action-button lock-button svelte-t9pjlk",null,le,J),$e(M,"aria-label",a(b).locked?"Unlock sketch":"Lock sketch"),$e(M,"title",a(b).locked?"Unlock sketch":"Lock sketch"),se(D,`${V??""} `)},[()=>{var v;return{expanded:l()===a(b).id,locked:a(b).locked,dragging:((v=p())==null?void 0:v.id)===a(b).id,"drag-over":g()===a(N)}},()=>f(a(b).duration),()=>({locked:a(b).locked}),()=>(a(b).character_performers||[]).map(v=>v.performer_name).join(", ")],Pe),ne("click",w,()=>Q(a(b))),ne("keydown",w,v=>v.key==="Enter"&&Q(a(b))),ne("click",M,Je(()=>h(a(b).id,!a(b).locked))),ne("click",m,Je(()=>P(a(b).id))),gt(B,()=>yt,()=>({duration:c()})),ne("dragstart",B,v=>x(v,a(b))),ne("dragover",B,v=>T(v,a(N))),ne("dragleave",B,F),ne("drop",B,v=>X(v,a(N))),ne("dragend",B,ee),W(E,B)}),n(C),W(i,C),Ce()}var ka=ae('<div role="listitem"><!></div>'),wa=ae('<div class="grid-view svelte-1q07nmr"></div>');function ya(i,r){Se(r,!1),de(r,"sketches",24,()=>[]);let s=de(r,"filteredSketches",24,()=>[]);de(r,"expandedSketchId",8,null);let l=de(r,"draggedSketch",8,null),p=de(r,"draggedOverIndex",8,null),g=de(r,"flipDurationMs",8,300);de(r,"selectedSketch",8,null);const c=Re();function y(f){c("select",{sketch:f})}function Q(f){c("lock",f.detail)}function h(f){c("delete",f.detail)}function P(f,C){c("dragstart",{event:f,sketch:C})}function x(f,C){c("dragover",{event:f,index:C})}function T(){c("dragleave")}function F(f,C){c("drop",{event:f,index:C})}function X(){c("dragend")}function ee(f){var E;return(((E=f.character_performers)==null?void 0:E.length)||0)!==f.chars}Ie();var q=wa();je(q,15,s,f=>f.id,(f,C,E)=>{var b=ka();let N;var B=o(b);const z=Pe(()=>ee(a(C)));Cr(B,{get sketch(){return a(C)},get showCharacterWarning(){return a(z)},$$events:{update:()=>{},select:()=>y(a(C)),lock:Q,delete:h}}),n(b),he(e=>{N=ye(b,1,"sketch-list-item svelte-1q07nmr",null,N,e),$e(b,"draggable",!a(C).locked)},[()=>{var e;return{locked:a(C).locked,dragging:((e=l())==null?void 0:e.id)===a(C).id,"drag-over":p()===a(E)}}],Pe),gt(b,()=>yt,()=>({duration:g()})),ne("dragstart",b,e=>P(e,a(C))),ne("dragover",b,e=>x(e,a(E))),ne("dragleave",b,T),ne("drop",b,e=>F(e,a(E))),ne("dragend",b,X),W(f,b)}),n(q),W(i,q),Ce()}var xa=ae('<div class="print-header svelte-1xa2n7i"><div class="left svelte-1xa2n7i"><button class="back-btn svelte-1xa2n7i"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="m15 18-6-6 6-6"></path></svg> Back to Show</button> <h2 class="print-title svelte-1xa2n7i"> </h2></div> <div class="right svelte-1xa2n7i"><div class="performer-filter-wrapper svelte-1xa2n7i"><!></div> <div class="print-version-btns svelte-1xa2n7i"><button>Greenroom</button> <button>Hallway</button> <button>Tech Booth</button></div> <button class="print-btn svelte-1xa2n7i" aria-label="Print set list"><!></button></div></div>');function Sa(i,r){Se(r,!1);let s=de(r,"printVersion",8,"greenroom"),l=de(r,"printViewPerformer",8,null),p=de(r,"performers",24,()=>[]);const g=Re();function c(S){g("versionChange",{printVersion:S})}function y(S){g("performerSelect",{performer:S.detail.performer})}function Q(){g("back")}function h(){g("print")}Ie();var P=xa(),x=o(P),T=o(x),F=u(T,2),X=o(F);n(F),n(x);var ee=u(x,2),q=o(ee),f=o(q);wt(f,{get performers(){return p()},get selectedPerformer(){return l()},$$events:{select:y}}),n(q);var C=u(q,2),E=o(C);let b;var N=u(E,2);let B;var z=u(N,2);let e;n(C);var t=u(C,2),d=o(t);bt(d,{size:20}),n(t),n(ee),n(P),he((S,w,U)=>{se(X,`Print View - ${s()??""}`),b=ye(E,1,"print-view-button svelte-1xa2n7i",null,b,S),B=ye(N,1,"print-view-button svelte-1xa2n7i",null,B,w),e=ye(z,1,"print-view-button svelte-1xa2n7i",null,e,U)},[()=>({active:s()==="greenroom"}),()=>({active:s()==="hallway"}),()=>({active:s()==="techbooth"})],Pe),ne("click",T,Q),ne("click",E,()=>c("greenroom")),ne("click",N,()=>c("hallway")),ne("click",z,()=>c("techbooth")),ne("click",t,h),W(i,P),Ce()}var Ca=ae('<div class="fixed inset-0 bg-white z-50 overflow-auto"><!> <div class="p-4"><!></div></div>'),Ea=ae('<div class="modal-backdrop svelte-1ghqok6" role="dialog" aria-modal="true" aria-label="Sketch details"><div class="modal-content svelte-1ghqok6" role="document"><!></div></div>'),Da=ae('<div class="show-page svelte-1ghqok6"><!> <div class="content svelte-1ghqok6"><!> <!> <!></div></div>');function za(i,r){Se(r,!1);const[s,l]=zt(),p=()=>Vt(tr,"$page",s),g=ge(),c=ge(),y=ge();let Q=de(r,"data",8);Re();const h=p().params.id;let P=Q().show,x=ge(Q().sketches),T=ge(null),F=ge(null),X=ge("list");const ee=300;let q=ge(!1),f=ge("greenroom"),C=ge(null),E=ge(null),b=ge(null),N=ge(null),B=ge(!1);ft(async()=>{await M()});async function z(D){try{const{importType:I,data:O}=D.detail;if(I==="unknown"){console.error("Import type is unknown. Aborting."),alert("Could not determine CSV type. Please check file format.");return}let j;I==="sketches"?j={show_id:h,importType:I,data:O.map((R,J)=>({...R,position:a(x).length+J}))}:j={show_id:h,importType:I,data:O};const te=await fetch("/api/sketches/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!te.ok){const R=await te.json().catch(()=>({error:"Failed to import data. Unknown error."}));throw new Error(R.error||"Failed to import data")}const v=await te.json();if(I==="sketches"){const R=v.filter(J=>J.success&&J.sketch).map(J=>J.sketch);if(R.length>0)L(x,[...a(x),...R].sort((J,V)=>J.position-V.position)),alert(`${R.length} sketch(es) imported successfully.`);else{const J=v.filter(V=>!V.success);J.length>0?(alert(`Import partially failed. ${J.length} sketch(es) had issues. Check console for details.`),console.error("Sketch import errors:",J)):alert("No new sketches were imported. The file might have been empty or all rows failed.")}}else{const R=v.filter(V=>V.success).length,J=v.length-R;alert(`Tech details import complete. ${R} successful, ${J} failed. Check console for details.`),J>0&&console.error("Tech detail import issues:",v.filter(V=>!V.success)),await M()}}catch(I){console.error("Error importing data:",I),alert(`Error during import: ${I instanceof Error?I.message:"Unknown error"}`)}}async function e(D){try{if(!(await fetch(`/api/sketches/${D.detail.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({locked:D.detail.locked})})).ok)throw new Error("Failed to update sketch");L(x,a(x).map(O=>O.id===D.detail.id?{...O,locked:D.detail.locked}:O))}catch(I){console.error("Error updating sketch:",I)}}function t(D,I){e(new CustomEvent("lock",{detail:{id:D,locked:I}}))}async function d(D){var O;const I=D.detail.id;if(I)try{if(!(await fetch(`/api/sketches/${I}`,{method:"DELETE"})).ok)throw new Error("Failed to delete sketch");const te=a(x).findIndex(v=>v.id===I);L(x,a(x).filter(v=>v.id!==I)),L(x,a(x).map((v,R)=>({...v,position:R}))),((O=a(T))==null?void 0:O.id)===I&&L(T,null),await H(a(x))}catch(j){console.error("Error deleting sketch:",j)}}function S(D){d(new CustomEvent("delete",{detail:{id:D}}))}async function w(D){var I;try{if(!(await fetch(`/api/sketches/${D.detail.sketch.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D.detail.sketch)})).ok)throw new Error("Failed to update sketch");L(x,a(x).map(j=>j.id===D.detail.sketch.id?D.detail.sketch:j).sort((j,te)=>j.position-te.position)),((I=a(T))==null?void 0:I.id)===D.detail.sketch.id&&L(T,D.detail.sketch)}catch(O){console.error("Error updating sketch:",O)}}function U(D,I){if(I.locked){D.preventDefault();return}L(E,I),D.dataTransfer&&(D.dataTransfer.effectAllowed="move")}function oe(D,I){D.preventDefault(),!(!a(E)||a(E).locked||a(c)[I].locked)&&(L(b,I),D.dataTransfer&&(D.dataTransfer.dropEffect="move"))}function fe(){L(b,null)}async function ce(D,I){if(D.preventDefault(),!a(E)||a(E).locked||a(c)[I].locked)return;const j=[...a(c)],te=j.findIndex(v=>{var R;return v.id===((R=a(E))==null?void 0:R.id)});if(te!==-1){j.splice(te,1),j.splice(I,0,a(E));const v=j,R=new Map(v.map((V,re)=>[V.id,re])),J=a(x).map(V=>{if(V.locked)return V;const re=R.get(V.id);return{...V,position:re!==void 0?re:V.position}}).sort((V,re)=>V.position-re.position).map((V,re)=>({...V,position:re}));L(x,J),await H(J)}L(E,null),L(b,null)}function K(){L(E,null),L(b,null)}async function H(D){const I=D.map(O=>({id:O.id,position:O.position}));try{if(!(await fetch("/api/sketches",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:I})})).ok)throw console.error("Failed to reorder sketches API call failed"),await M(),new Error("Failed to reorder sketches")}catch(O){console.error("Error reordering sketches:",O),await M()}}async function M(){try{const D=await fetch(`/api/sketches?show_id=${h}`);if(!D.ok)throw new Error("Failed to load sketches");const I=await D.json();L(x,I.map(O=>({...O,position:O.position??0,locked:!!O.locked})).sort((O,j)=>O.position-j.position))}catch(D){console.error("Error loading sketches:",D),L(x,[])}}function le(){L(q,!0),setTimeout(()=>{window.print(),L(q,!1)},100)}function G(D){L(C,a(C)===D?null:D)}Ze(()=>a(x),()=>{L(g,[...new Set(a(x).flatMap(D=>D.character_performers||[]).map(D=>D.performer_name))].sort())}),Ze(()=>(a(F),a(x)),()=>{L(c,a(F)?a(x).filter(D=>{var I;return(I=D.character_performers)==null?void 0:I.some(O=>O.performer_name===a(F))}):a(x))}),Ze(()=>(a(N),a(x)),()=>{L(y,a(N)?a(x).filter(D=>{var I;return(I=D.character_performers)==null?void 0:I.some(O=>O.performer_name===a(N))}):a(x))}),vt(),Ie();var Z=Ae(),$=Le(Z);{var m=D=>{var I=Ca(),O=o(I);Sa(O,{get printVersion(){return a(f)},get printViewPerformer(){return a(N)},get performers(){return a(g)},$$events:{back:()=>L(q,!1),versionChange:v=>L(f,v.detail.printVersion),performerSelect:v=>L(N,v.detail.performer),print:le}});var j=u(O,2),te=o(j);Yr(te,{get sketches(){return a(y)},get showTitle(){return P.title},get version(){return a(f)}}),n(j),n(I),W(D,I)},Y=D=>{var I=Da(),O=o(I);sa(O,{show:P,get performers(){return a(g)},get selectedPerformer(){return a(F)},set selectedPerformer(_){L(F,_)},get printVersion(){return a(f)},set printVersion(_){L(f,_)},get isSidebarCollapsed(){return a(B)},set isSidebarCollapsed(_){L(B,_)},$$events:{collapse:({detail:_})=>L(B,_.collapsed),filter:({detail:_})=>L(F,_.performer),print:({detail:_})=>{L(f,_.printVersion),le()},importComplete:M,csvImport:z},$$legacy:!0});var j=u(O,2),te=o(j);na(te,{get viewMode(){return a(X)},set viewMode(_){L(X,_)},get printVersion(){return a(f)},set printVersion(_){L(f,_)},get showPrintView(){return a(q)},set showPrintView(_){L(q,_)},$$events:{viewModeChange:_=>L(X,_.detail.viewMode),printVersionChange:_=>L(f,_.detail.printVersion),showPrintViewChange:_=>L(q,_.detail.showPrintView)},$$legacy:!0});var v=u(te,2);{var R=_=>{ba(_,{get sketches(){return a(x)},get filteredSketches(){return a(c)},get draggedSketch(){return a(E)},get draggedOverIndex(){return a(b)},flipDurationMs:ee,get expandedSketchId(){return a(C)},set expandedSketchId(k){L(C,k)},get selectedSketch(){return a(T)},set selectedSketch(k){L(T,k)},$$events:{select:k=>L(T,k.detail.sketch),lock:k=>t(k.detail.id,k.detail.locked),delete:k=>S(k.detail.id),expand:k=>G(k.detail.sketchId),dragstart:k=>U(k.detail.event,k.detail.sketch),dragover:k=>oe(k.detail.event,k.detail.index),dragleave:fe,drop:k=>ce(k.detail.event,k.detail.index),dragend:K},$$legacy:!0})},J=_=>{ya(_,{get sketches(){return a(x)},get filteredSketches(){return a(c)},get draggedSketch(){return a(E)},get draggedOverIndex(){return a(b)},flipDurationMs:ee,get expandedSketchId(){return a(C)},set expandedSketchId(k){L(C,k)},get selectedSketch(){return a(T)},set selectedSketch(k){L(T,k)},$$events:{select:k=>L(T,k.detail.sketch),lock:k=>t(k.detail.id,k.detail.locked),delete:k=>S(k.detail.id),expand:k=>G(k.detail.sketchId),dragstart:k=>U(k.detail.event,k.detail.sketch),dragover:k=>oe(k.detail.event,k.detail.index),dragleave:fe,drop:k=>ce(k.detail.event,k.detail.index),dragend:K},$$legacy:!0})};ve(v,_=>{a(X)==="list"?_(R):_(J,!1)})}var V=u(v,2);{var re=_=>{var k=Ea(),A=o(k),ie=o(A);Nr(ie,{get sketch(){return a(T)},$$events:{close:()=>L(T,null),update:w}}),n(A),n(k),ne("click",A,Je(function(_e){Jt.call(this,r,_e)})),ne("click",k,()=>L(T,null)),ne("keydown",k,_e=>_e.key==="Escape"&&L(T,null)),W(_,k)};ve(V,_=>{a(T)&&_(re)})}n(j),n(I),W(D,I)};ve($,D=>{a(q)?D(m):D(Y,!1)})}W(i,Z),Ce(),l()}export{za as component};
